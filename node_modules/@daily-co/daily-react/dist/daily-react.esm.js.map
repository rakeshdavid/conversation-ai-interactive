{"version":3,"file":"daily-react.esm.js","sources":["../src/DailyContext.tsx","../src/hooks/useDaily.ts","../src/DailyEventContext.tsx","../src/hooks/useDailyEvent.ts","../src/lib/constants.ts","../src/hooks/useParticipantProperty.ts","../src/hooks/useThrottledDailyEvent.ts","../src/lib/customDeepEqual.ts","../src/lib/recoil-custom.ts","../src/utils/getParticipantPaths.ts","../src/utils/resolveParticipantPaths.ts","../src/DailyParticipants.tsx","../src/hooks/useLocalSessionId.ts","../src/hooks/useActiveSpeakerId.ts","../src/utils/isTrackOff.ts","../src/hooks/useParticipantIds.ts","../src/hooks/useScreenShare.ts","../src/hooks/useMediaTrack.ts","../src/hooks/useMergedRef.ts","../src/components/DailyAudioTrack.tsx","../src/components/DailyAudio.tsx","../src/components/DailyVideo.tsx","../src/DailyDevicesContext.tsx","../src/DailyDevices.tsx","../src/DailyLiveStreaming.tsx","../src/DailyMeeting.tsx","../src/DailyNetwork.tsx","../src/DailyRecordings.tsx","../src/hooks/useMeetingState.ts","../src/DailyRoom.tsx","../src/DailyTranscriptions.tsx","../src/hooks/useCallInstance.ts","../src/hooks/useCallObject.ts","../src/DailyProvider.tsx","../src/hooks/useParticipant.ts","../src/hooks/useActiveParticipant.ts","../src/hooks/useAppMessage.ts","../src/lib/inlineAudioWorklet.ts","../src/hooks/useAudioLevel.ts","../src/hooks/useAudioLevelObserver.ts","../src/hooks/useAudioTrack.ts","../src/hooks/useCallFrame.ts","../src/hooks/useCPULoad.ts","../src/hooks/useDailyError.ts","../src/hooks/useDevices.ts","../src/hooks/useInputSettings.ts","../src/hooks/useLiveStreaming.ts","../src/hooks/useLocalParticipant.ts","../src/hooks/useMeetingSessionState.ts","../src/hooks/useNetwork.ts","../src/hooks/useParticipantCounts.ts","../src/hooks/usePermissions.ts","../src/hooks/useReceiveSettings.ts","../src/hooks/useRecording.ts","../src/hooks/useRoom.ts","../src/hooks/useRoomExp.ts","../src/hooks/useScreenAudioTrack.ts","../src/hooks/useScreenVideoTrack.ts","../src/hooks/useSendSettings.ts","../src/hooks/useTranscription.ts","../src/hooks/useVideoTrack.ts","../src/hooks/useWaitingParticipants.ts"],"sourcesContent":["import { DailyCall } from '@daily-co/daily-js';\nimport { createContext } from 'react';\n\nexport const DailyContext = createContext<DailyCall | null>(null);\n","import { useContext, useDebugValue } from 'react';\n\nimport { DailyContext } from '../DailyContext';\n\n/**\n * Returns callObject instance passed to or created by closest <DailyProvider>.\n */\nexport const useDaily = () => {\n  const daily = useContext(DailyContext);\n  useDebugValue(daily);\n  return daily;\n};\n","import { DailyEvent } from '@daily-co/daily-js';\nimport { createContext } from 'react';\n\ninterface EventContextValue {\n  on(ev: DailyEvent, callback: Function, key: number): void;\n  off(ev: DailyEvent, key: number): void;\n}\n\nexport const DailyEventContext = createContext<EventContextValue>({\n  on: () => {},\n  off: () => {},\n});\n","import { DailyEvent, DailyEventObject } from '@daily-co/daily-js';\nimport {\n  useContext,\n  useDebugValue,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\n\nimport { DailyEventContext } from '../DailyEventContext';\n\ntype EventCallback<T extends DailyEvent> = (event: DailyEventObject<T>) => void;\n\nlet priorityCounter = -1;\nexport const getPriorityUnique = () => priorityCounter--;\nlet uniqueCounter = 1;\nexport const getUnique = () => uniqueCounter++;\n\n/**\n * Sets up a daily event listener using [on](https://docs.daily.co/reference/daily-js/instance-methods/on) method.\n * When this hook is unmounted the event listener is unregistered using [off](https://docs.daily.co/reference/daily-js/instance-methods/off).\n *\n * Warning: callback has to be a memoized reference (e.g. via [useCallback](https://reactjs.org/docs/hooks-reference.html#usecallback)).\n * Otherwise a console error might be thrown indicating a re-render loop issue.\n *\n * @param ev The DailyEvent to register.\n * @param callback A memoized callback reference to run when the event is emitted.\n */\nexport const useDailyEvent = <T extends DailyEvent>(\n  ev: T,\n  callback: EventCallback<T>,\n  INTERNAL_priority = false\n) => {\n  const { off, on } = useContext(DailyEventContext);\n  const [isBlocked, setIsBlocked] = useState(false);\n  const reassignCount = useRef<number>(0);\n\n  const eventId = useMemo(\n    () => (INTERNAL_priority ? getPriorityUnique() : getUnique()),\n    [INTERNAL_priority]\n  );\n\n  useEffect(() => {\n    if (!ev || isBlocked) return;\n    /**\n     * Check if callback has been reassigned often enough without hitting the 50ms timeout.\n     */\n    if (reassignCount.current > 100000) {\n      console.error(\n        `useDailyEvent called with potentially non-memoized event callback or due to too many re-renders.\n        Memoize using useCallback to avoid re-render loop or reduce the amount of state transitions the callback depends on.\n        Passed callback for '${ev}' event is NOT registered.`,\n        callback\n      );\n      setIsBlocked(true);\n      return;\n    }\n    reassignCount.current++;\n    const timeout = setTimeout(() => {\n      reassignCount.current = 0;\n    }, 50);\n    on(ev, callback, eventId);\n    return () => {\n      clearTimeout(timeout);\n      off(ev, eventId);\n    };\n  }, [callback, ev, eventId, isBlocked, off, on]);\n\n  useDebugValue({\n    event: ev,\n    eventId,\n    isBlocked,\n    callback,\n  });\n};\n","export const RECOIL_PREFIX = 'daily-react-';\n","import { useDebugValue } from 'react';\nimport { atomFamily, selectorFamily, useRecoilValue } from 'recoil';\n\nimport { ExtendedDailyParticipant } from '../DailyParticipants';\nimport { RECOIL_PREFIX } from '../lib/constants';\nimport type { NumericKeys } from '../types/NumericKeys';\nimport type { Paths } from '../types/paths';\nimport type { PathValue } from '../types/pathValue';\n\ntype PropertyType = {\n  id: string;\n  property: Paths<ExtendedDailyParticipant>;\n};\n\ntype PropertiesType = {\n  id: string;\n  properties: Paths<ExtendedDailyParticipant>[];\n};\n\n/**\n * Stores all property paths for a given participant.\n */\nexport const participantPropertyPathsState = atomFamily<\n  Paths<ExtendedDailyParticipant>[],\n  string\n>({\n  key: RECOIL_PREFIX + 'participant-property-paths',\n  default: [],\n});\n\n/**\n * Stores resolved values for each participant and property path.\n */\nexport const participantPropertyState = atomFamily<any, PropertyType>({\n  key: RECOIL_PREFIX + 'participant-property',\n  default: null,\n  dangerouslyAllowMutability: true, // daily-js mutates track props (_managedByDaily, etc)\n});\n\n/**\n * Stores resolved values for each participant and property path.\n */\nexport const participantPropertiesState = selectorFamily<any, PropertiesType>({\n  key: RECOIL_PREFIX + 'participant-properties',\n  get:\n    ({ id, properties }) =>\n    ({ get }) => {\n      return properties.map((path) =>\n        get(participantPropertyState({ id, property: path }))\n      );\n    },\n  dangerouslyAllowMutability: true, // daily-js mutates track props (_managedByDaily, etc)\n});\n\ntype UseParticipantPropertyReturnType<\n  T extends ExtendedDailyParticipant,\n  P extends Paths<T> | Paths<T>[]\n> = P extends Paths<T>[]\n  ? { [K in keyof P]: K extends NumericKeys ? PathValue<T, P[K]> : unknown }\n  : P extends Paths<T>\n  ? PathValue<T, P>\n  : never;\n\n/**\n * Returns a participant's property that you subscribe to.\n * @param participantId The participant's session_id.\n * @param propertyPaths the array of participant property that you want to subscribe to.\n */\nexport const useParticipantProperty = <\n  T extends ExtendedDailyParticipant = ExtendedDailyParticipant,\n  P extends Paths<T> | [Paths<T>, ...Paths<T>[]] =\n    | Paths<T>\n    | [Paths<T>, ...Paths<T>[]]\n>(\n  participantId: string,\n  propertyPaths: P\n): UseParticipantPropertyReturnType<T, P> => {\n  const properties = useRecoilValue(\n    Array.isArray(propertyPaths)\n      ? participantPropertiesState({\n          id: participantId,\n          properties: propertyPaths as Paths<ExtendedDailyParticipant>[],\n        })\n      : participantPropertyState({\n          id: participantId,\n          property: propertyPaths as Paths<ExtendedDailyParticipant>,\n        })\n  );\n\n  useDebugValue(\n    Array.isArray(propertyPaths)\n      ? propertyPaths.reduce(\n          (o: Record<any, any>, path: Paths<T>, i: number) => {\n            o[path] = properties[i];\n            return o;\n          },\n          {}\n        )\n      : {\n          [propertyPaths as any]: properties,\n        }\n  );\n\n  return properties;\n};\n","import { DailyEvent, DailyEventObject } from '@daily-co/daily-js';\nimport throttle from 'lodash.throttle';\nimport {\n  useCallback,\n  useContext,\n  useDebugValue,\n  useEffect,\n  useMemo,\n  useRef,\n} from 'react';\n\nimport { DailyEventContext } from '../DailyEventContext';\nimport { getPriorityUnique, getUnique, useDailyEvent } from './useDailyEvent';\n\ntype EnsureArray<T> = T extends DailyEvent ? [T] : T;\n\ntype EventObjectsFor<T> = EnsureArray<T> extends (infer U)[]\n  ? U extends DailyEvent\n    ? DailyEventObject<U>\n    : never\n  : never;\n\ntype EventCallback<T extends DailyEvent | DailyEvent[]> = (\n  events: EventObjectsFor<T>[]\n) => void;\n\n/**\n * Sets up a throttled daily event listener using [on](https://docs.daily.co/reference/daily-js/instance-methods/on) method.\n * When this hook is unmounted the event listener is unregistered using [off](https://docs.daily.co/reference/daily-js/instance-methods/off).\n *\n * In comparison to useDailyEvent the callback passed here will be called with an array of event objects.\n *\n * You can pass an array of DailyEvents to register multiple daily events with a single callback handler.\n * The events returned in the callback parameter are guaranteed to be in the same order as they were emitted.\n *\n * @param ev The DailyEvent to register or an array of DailyEvent to register.\n * @param callback A memoized callback reference to run when throttled events are emitted.\n * @param throttleTimeout The minimum waiting time until the callback is called again. Default: 500\n */\nexport const useThrottledDailyEvent = <T extends DailyEvent>(\n  ev: T | T[],\n  callback: EventCallback<EnsureArray<T>>,\n  throttleTimeout = 500,\n  INTERNAL_priority = false\n) => {\n  const { off, on } = useContext(DailyEventContext);\n  const eventId = useMemo(() => {\n    if (Array.isArray(ev))\n      return ev.reduce<Record<string, number>>((r, e) => {\n        r[e] = INTERNAL_priority ? getPriorityUnique() : getUnique();\n        return r;\n      }, {});\n    return { [ev]: INTERNAL_priority ? getPriorityUnique() : getUnique() };\n  }, [ev, INTERNAL_priority]);\n\n  const throttledEvents = useRef<EventObjectsFor<T>[]>([]);\n\n  useDailyEvent(\n    'call-instance-destroyed',\n    useCallback(() => {\n      throttledEvents.current.length = 0;\n    }, [])\n  );\n\n  const emitEvents = useMemo(\n    () =>\n      throttle(\n        () => {\n          if (throttledEvents.current.length === 0) return;\n          callback(throttledEvents.current);\n          throttledEvents.current.length = 0;\n        },\n        throttleTimeout,\n        {\n          trailing: true,\n        }\n      ),\n    [callback, throttleTimeout]\n  );\n\n  useEffect(() => {\n    if (!ev) return;\n    const addEvent = (ev: DailyEventObject) => {\n      throttledEvents.current.push(ev);\n      emitEvents();\n    };\n    if (Array.isArray(ev)) {\n      ev.forEach((e) => on(e, addEvent, eventId[e]));\n    } else {\n      on(ev, addEvent, eventId[ev]);\n    }\n    return () => {\n      if (Array.isArray(ev)) {\n        ev.forEach((e) => off(e, eventId[e]));\n      } else {\n        off(ev, eventId[ev]);\n      }\n    };\n  }, [emitEvents, ev, eventId, off, on]);\n\n  useDebugValue({\n    event: ev,\n    eventId,\n  });\n};\n","/**\n * Compares two variables for deep equality.\n * Gracefully handles equality checks on MediaStreamTracks by comparing their ids.\n */\nexport function customDeepEqual(a: any, b: any): boolean {\n  if (a === b) return true;\n\n  // Handle special case for MediaStream\n  if (a instanceof MediaStream && b instanceof MediaStream) {\n    return (\n      a.id === b.id &&\n      a.active === b.active &&\n      a.getTracks().length === b.getTracks().length &&\n      a\n        .getTracks()\n        .every((track, idx) => customDeepEqual(track, b.getTracks()[idx]))\n    );\n  }\n\n  // Handle special case for MediaStreamTrack\n  if (a instanceof MediaStreamTrack && b instanceof MediaStreamTrack) {\n    return a.id === b.id && a.kind === b.kind && a.readyState === b.readyState;\n  }\n\n  // Handle special case for Date\n  if (a instanceof Date && b instanceof Date) {\n    return a.getTime() === b.getTime();\n  }\n\n  // Handle special case for RegExp\n  if (a instanceof RegExp && b instanceof RegExp) {\n    return a.source === b.source && a.flags === b.flags;\n  }\n\n  // Handle special case for Set\n  if (a instanceof Set && b instanceof Set) {\n    if (a.size !== b.size) {\n      return false;\n    }\n\n    for (const value of a.values()) {\n      if (!b.has(value)) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  // Handle special case for Map\n  if (a instanceof Map && b instanceof Map) {\n    if (a.size !== b.size) {\n      return false;\n    }\n    for (const [key, value] of a.entries()) {\n      if (!b.has(key)) {\n        return false;\n      }\n      if (!customDeepEqual(value, b.get(key))) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  // If a or b are not objects or null, they can't be deeply equal\n  if (\n    typeof a !== 'object' ||\n    a === null ||\n    typeof b !== 'object' ||\n    b === null\n  ) {\n    return false;\n  }\n\n  // Get the keys of a and b. This handles both arrays and objects, since arrays are technically objects.\n  let keysA = Object.keys(a);\n  let keysB = Object.keys(b);\n\n  // If the number of keys are different, the objects are not equal\n  if (keysA.length !== keysB.length) return false;\n\n  for (let key of keysA) {\n    if (\n      // If key exists in a, but not in b -> not equal\n      !(key in b) ||\n      // Both keys exist in both object -> run nested equality check\n      !customDeepEqual(a[key], b[key])\n    )\n      return false;\n  }\n\n  // All keys and values match -> the objects are deeply equal\n  return true;\n}\n","import {\n  ReadOnlySelectorFamilyOptions,\n  ReadOnlySelectorOptions,\n  RecoilValueReadOnly,\n  selector,\n  selectorFamily,\n  SerializableParam,\n} from 'recoil';\n\ninterface EqualSelectorOptions<T>\n  extends Pick<ReadOnlySelectorOptions<T>, 'key' | 'get'> {\n  equals: (a: T, b: T) => boolean;\n}\n\n/**\n * Same API as [selector](https://recoiljs.org/docs/api-reference/core/selector), but with an additional `equals` key.\n * Allows to run custom equality checks before returning a new calculated value.\n * Use this, when returning non-primitive types from state.\n * Resource: https://github.com/facebookexperimental/Recoil/issues/1416#issuecomment-1044953271\n */\nexport function equalSelector<T>(\n  options: EqualSelectorOptions<T>\n): RecoilValueReadOnly<T> {\n  const inner = selector({\n    key: `${options.key}_inner`,\n    get: options.get,\n  });\n\n  let prior: T | undefined;\n\n  return selector({\n    key: options.key,\n    get: ({ get }) => {\n      const latest = get(inner);\n      if (prior != null && options.equals(latest, prior)) {\n        return prior;\n      }\n      prior = latest;\n      return latest as T;\n    },\n  });\n}\n\ninterface EqualSelectorFamilyOptions<T, P extends SerializableParam>\n  extends Pick<ReadOnlySelectorFamilyOptions<T, P>, 'key' | 'get'> {\n  equals: (a: T, b: T) => boolean;\n}\n\n/**\n * Same API as [selectorFamily](https://recoiljs.org/docs/api-reference/utils/selectorFamily/), but with an additional `equals` key.\n * Allows to run custom equality checks before returning a new calculated value.\n * Use this, when returning non-primitive types from state.\n * Resource: https://github.com/facebookexperimental/Recoil/issues/1416#issuecomment-1168603409\n */\nexport function equalSelectorFamily<T, P extends SerializableParam>(\n  options: EqualSelectorFamilyOptions<T, P>\n) {\n  const inner = selectorFamily<T, P>({\n    key: `${options.key}_inner`,\n    get: options.get,\n  });\n\n  const priorValues: Map<P, T | undefined> = new Map();\n\n  return selectorFamily<T, P>({\n    ...options,\n    key: options.key,\n    get:\n      (param: P) =>\n      ({ get }) => {\n        const latest = get(inner(param));\n        const prior = priorValues.get(param);\n        if (prior != null && options.equals(latest, prior)) {\n          return prior;\n        }\n        priorValues.set(param, latest);\n        return latest;\n      },\n  });\n}\n","import { ExtendedDailyParticipant } from '../DailyParticipants';\nimport { Paths } from '../types/paths';\n\n/**\n * Returns all property paths for an object.\n */\nconst getPaths = (\n  o: Record<any, any>,\n  currentPath = '',\n  visited = new Set()\n): string[] => {\n  if (typeof o !== 'object' || o === null || visited.has(o)) {\n    return [currentPath];\n  }\n\n  visited.add(o);\n\n  const paths = [];\n  for (const key in o) {\n    if (Object.prototype.hasOwnProperty.call(o, key)) {\n      const newPath = currentPath ? `${currentPath}.${key}` : key;\n      paths.push(newPath, ...getPaths(o[key], newPath, visited));\n    }\n  }\n\n  visited.delete(o);\n\n  return paths;\n};\n\n/**\n * Returns all property paths for a given participant object.\n */\nexport const getParticipantPaths = (p: ExtendedDailyParticipant) => {\n  return getPaths(p) as Paths<ExtendedDailyParticipant>[];\n};\n","import { ExtendedDailyParticipant } from '../DailyParticipants';\nimport type { NumericKeys } from '../types/NumericKeys';\nimport type { Paths } from '../types/paths';\nimport type { PathValue } from '../types/pathValue';\n\nconst resolvePath = <T extends ExtendedDailyParticipant, P extends Paths<T>>(\n  participant: T | null,\n  path: P\n): PathValue<T, P> => {\n  return String(path)\n    .split('.')\n    .filter((key) => key.length)\n    .reduce((p: any, key) => p && p[key], participant);\n};\n\ntype ResolveParticipantPathsReturnType<\n  T extends ExtendedDailyParticipant,\n  P extends Paths<T>[]\n> = { [K in keyof P]: K extends NumericKeys ? PathValue<T, P[K]> : never };\n\nexport const resolveParticipantPaths = <\n  T extends ExtendedDailyParticipant,\n  P extends Paths<T>[]\n>(\n  participant: T | null,\n  paths: P\n): ResolveParticipantPathsReturnType<T, P> => {\n  return paths.map((path) =>\n    resolvePath(participant, path)\n  ) as ResolveParticipantPathsReturnType<T, P>;\n};\n","import {\n  DailyParticipant,\n  DailyParticipantsObject,\n  DailyParticipantTracks,\n  DailyWaitingParticipant,\n} from '@daily-co/daily-js';\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { atom, atomFamily, selector, useRecoilCallback } from 'recoil';\n\nimport { useDaily } from './hooks/useDaily';\nimport { useDailyEvent } from './hooks/useDailyEvent';\nimport {\n  participantPropertyPathsState,\n  participantPropertyState,\n} from './hooks/useParticipantProperty';\nimport { useThrottledDailyEvent } from './hooks/useThrottledDailyEvent';\nimport { RECOIL_PREFIX } from './lib/constants';\nimport { customDeepEqual } from './lib/customDeepEqual';\nimport { equalSelector } from './lib/recoil-custom';\nimport { getParticipantPaths } from './utils/getParticipantPaths';\nimport { resolveParticipantPaths } from './utils/resolveParticipantPaths';\n\n/**\n * Extends DailyParticipant with convenient additional properties.\n * The `tracks` object needs to omit custom track keys, otherwise\n * autocomplete for `tracks` in useParticipantProperty doesn't work.\n */\nexport interface ExtendedDailyParticipant\n  extends Omit<DailyParticipant, 'tracks'> {\n  last_active?: Date;\n  tracks: DailyParticipantTracks;\n}\n\n/**\n * Stores the most recent peerId as reported from [active-speaker-change](https://docs.daily.co/reference/daily-js/events/meeting-events#active-speaker-change) event.\n */\nexport const activeIdState = atom<string | null>({\n  key: RECOIL_PREFIX + 'active-id',\n  default: null,\n});\n\nexport const localIdState = atom<string>({\n  key: RECOIL_PREFIX + 'local-id',\n  default: '',\n});\n\nexport const localJoinDateState = atom<Date | null>({\n  key: RECOIL_PREFIX + 'local-joined-date',\n  default: null,\n});\n\nexport const participantIdsState = atom<string[]>({\n  key: RECOIL_PREFIX + 'participant-ids',\n  default: [],\n});\n\nexport const participantState = atomFamily<\n  ExtendedDailyParticipant | null,\n  string\n>({\n  key: RECOIL_PREFIX + 'participant-state',\n  default: null,\n  dangerouslyAllowMutability: true, // daily-js mutates track props (_managedByDaily, etc)\n});\n\nexport const participantsState = selector<ExtendedDailyParticipant[]>({\n  key: RECOIL_PREFIX + 'participants',\n  get: ({ get }) => {\n    const ids = get(participantIdsState);\n    const participants = ids\n      .map((id) => get(participantState(id)))\n      .filter(Boolean) as ExtendedDailyParticipant[];\n    return participants;\n  },\n  dangerouslyAllowMutability: true, // daily-js mutates track props (_managedByDaily, etc)\n});\n\n/**\n * Holds all participants in the waiting room.\n */\nexport const waitingParticipantsState = atom<string[]>({\n  key: RECOIL_PREFIX + 'waiting-participants',\n  default: [],\n});\n\n/**\n * Holds each invidiual waiting participant's information.\n */\nexport const waitingParticipantState = atomFamily<\n  DailyWaitingParticipant,\n  string\n>({\n  key: RECOIL_PREFIX + 'waiting-participant',\n  default: {\n    awaitingAccess: {\n      level: 'full',\n    },\n    id: '',\n    name: '',\n  },\n});\n\n/**\n * Returns all waiting participant objects in an array.\n */\nexport const allWaitingParticipantsSelector = equalSelector({\n  key: RECOIL_PREFIX + 'waitingParticipantsSelector',\n  equals: customDeepEqual,\n  get: ({ get }) => {\n    const ids = get(waitingParticipantsState);\n    return ids.map((id) => get(waitingParticipantState(id)));\n  },\n});\n\nexport const DailyParticipants: React.FC<React.PropsWithChildren<unknown>> = ({\n  children,\n}) => {\n  const daily = useDaily();\n  const [initialized, setInitialized] = useState(false);\n\n  const initParticipants = useRecoilCallback(\n    ({ transact_UNSTABLE }) =>\n      (participants: DailyParticipantsObject) => {\n        transact_UNSTABLE(({ set }) => {\n          set(localIdState, participants.local.session_id);\n          const participantsArray = Object.values(participants);\n          const ids = participantsArray.map((p) => p.session_id);\n          set(participantIdsState, ids);\n          participantsArray.forEach((p) => {\n            set(participantState(p.session_id), p);\n            const paths = getParticipantPaths(p);\n            // Set list of property paths\n            set(participantPropertyPathsState(p.session_id), paths);\n            // Set all property path values\n            paths.forEach((property) => {\n              const [value] = resolveParticipantPaths(\n                p as ExtendedDailyParticipant,\n                [property]\n              );\n              set(\n                participantPropertyState({\n                  id: p.session_id,\n                  property,\n                }),\n                value\n              );\n            });\n          });\n          setInitialized(true);\n        });\n      },\n    []\n  );\n  /**\n   * Initialize participants state based on daily.participants().\n   * Retries every 100ms to initialize the state, until daily is ready.\n   */\n  useEffect(() => {\n    if (!daily || initialized) return;\n    const interval = setInterval(() => {\n      const participants = daily.participants();\n      if (!('local' in participants)) return;\n      initParticipants(participants);\n      clearInterval(interval);\n    }, 100);\n    return () => {\n      clearInterval(interval);\n    };\n  }, [daily, initialized, initParticipants]);\n  const handleInitEvent = useCallback(() => {\n    if (!daily) return;\n    const participants = daily?.participants();\n    if (!participants.local) return;\n    initParticipants(participants);\n  }, [daily, initParticipants]);\n  useDailyEvent('started-camera', handleInitEvent, true);\n  useDailyEvent('access-state-updated', handleInitEvent, true);\n  useDailyEvent(\n    'joining-meeting',\n    useRecoilCallback(\n      ({ set }) =>\n        () => {\n          set(localJoinDateState, new Date());\n          handleInitEvent();\n        },\n      [handleInitEvent]\n    ),\n    true\n  );\n  useDailyEvent(\n    'joined-meeting',\n    useCallback(\n      (ev) => {\n        initParticipants(ev.participants);\n      },\n      [initParticipants]\n    ),\n    true\n  );\n\n  /**\n   * Reset stored participants, when meeting has ended.\n   */\n  const handleCleanup = useRecoilCallback(\n    ({ reset, snapshot }) =>\n      async () => {\n        reset(localIdState);\n        reset(activeIdState);\n        const ids = await snapshot.getPromise(participantIdsState);\n        if (Array.isArray(ids))\n          ids.forEach((id) => reset(participantState(id)));\n        reset(participantIdsState);\n      },\n    []\n  );\n  useDailyEvent('call-instance-destroyed', handleCleanup, true);\n  useDailyEvent('left-meeting', handleCleanup, true);\n\n  useThrottledDailyEvent(\n    [\n      'active-speaker-change',\n      'participant-joined',\n      'participant-updated',\n      'participant-left',\n    ],\n    useRecoilCallback(\n      ({ transact_UNSTABLE }) =>\n        (evts) => {\n          if (!evts.length) return;\n          transact_UNSTABLE(({ get, reset, set }) => {\n            evts.forEach((ev) => {\n              switch (ev.action) {\n                case 'active-speaker-change': {\n                  set(activeIdState, ev.activeSpeaker.peerId);\n                  set(participantState(ev.activeSpeaker.peerId), (prev) => {\n                    if (!prev) return null;\n                    return {\n                      ...prev,\n                      last_active: new Date(),\n                    };\n                  });\n                  break;\n                }\n                case 'participant-joined': {\n                  // Update list of ids\n                  set(participantIdsState, (prevIds) =>\n                    prevIds.includes(ev.participant.session_id)\n                      ? prevIds\n                      : [...prevIds, ev.participant.session_id]\n                  );\n                  // Store entire object\n                  set(\n                    participantState(ev.participant.session_id),\n                    ev.participant\n                  );\n\n                  const paths = getParticipantPaths(ev.participant);\n                  // Set list of property paths\n                  set(\n                    participantPropertyPathsState(ev.participant.session_id),\n                    paths\n                  );\n                  // Set all property path values\n                  paths.forEach((property) => {\n                    const [value] = resolveParticipantPaths(\n                      ev.participant as ExtendedDailyParticipant,\n                      [property]\n                    );\n                    set(\n                      participantPropertyState({\n                        id: ev.participant.session_id,\n                        property,\n                      }),\n                      value\n                    );\n                  });\n                  break;\n                }\n                case 'participant-updated': {\n                  // Update entire object\n                  set(participantState(ev.participant.session_id), (prev) => ({\n                    ...prev,\n                    ...ev.participant,\n                  }));\n                  // Update local session_id\n                  if (ev.participant.local) {\n                    set(localIdState, (prevId) =>\n                      prevId !== ev.participant.session_id\n                        ? ev.participant.session_id\n                        : prevId\n                    );\n                  }\n\n                  const paths = getParticipantPaths(ev.participant);\n                  const oldPaths = get(\n                    participantPropertyPathsState(ev.participant.session_id)\n                  );\n                  // Set list of property paths\n                  set(\n                    participantPropertyPathsState(ev.participant.session_id),\n                    (prev) => (customDeepEqual(prev, paths) ? prev : paths)\n                  );\n                  // Reset old path values\n                  oldPaths\n                    .filter((p) => !paths.includes(p))\n                    .forEach((property) => {\n                      reset(\n                        participantPropertyState({\n                          id: ev.participant.session_id,\n                          property,\n                        })\n                      );\n                    });\n                  // Set all property path values\n                  paths.forEach((property) => {\n                    const [value] = resolveParticipantPaths(\n                      ev.participant as ExtendedDailyParticipant,\n                      [property]\n                    );\n                    set(\n                      participantPropertyState({\n                        id: ev.participant.session_id,\n                        property,\n                      }),\n                      (prev) => (customDeepEqual(prev, value) ? prev : value)\n                    );\n                  });\n                  break;\n                }\n                case 'participant-left': {\n                  // Remove from list of ids\n                  set(participantIdsState, (prevIds) =>\n                    prevIds.includes(ev.participant.session_id)\n                      ? [\n                          ...prevIds.filter(\n                            (id) => id !== ev.participant.session_id\n                          ),\n                        ]\n                      : prevIds\n                  );\n                  // Remove entire object\n                  reset(participantState(ev.participant.session_id));\n\n                  const oldPaths = get(\n                    participantPropertyPathsState(ev.participant.session_id)\n                  );\n                  // Remove property path values\n                  oldPaths.forEach((property) => {\n                    reset(\n                      participantPropertyState({\n                        id: ev.participant.session_id,\n                        property,\n                      })\n                    );\n                  });\n                  // Remove all property paths\n                  reset(\n                    participantPropertyPathsState(ev.participant.session_id)\n                  );\n                  break;\n                }\n              }\n            });\n          });\n        },\n      []\n    ),\n    100,\n    true\n  );\n\n  useThrottledDailyEvent(\n    [\n      'waiting-participant-added',\n      'waiting-participant-updated',\n      'waiting-participant-removed',\n    ],\n    useRecoilCallback(\n      ({ transact_UNSTABLE }) =>\n        (evts) => {\n          transact_UNSTABLE(({ reset, set }) => {\n            evts.forEach((ev) => {\n              switch (ev.action) {\n                case 'waiting-participant-added':\n                  set(waitingParticipantsState, (wps) => {\n                    if (!wps.includes(ev.participant.id)) {\n                      return [...wps, ev.participant.id];\n                    }\n                    return wps;\n                  });\n                  set(\n                    waitingParticipantState(ev.participant.id),\n                    ev.participant\n                  );\n                  break;\n                case 'waiting-participant-updated':\n                  set(\n                    waitingParticipantState(ev.participant.id),\n                    ev.participant\n                  );\n                  break;\n                case 'waiting-participant-removed':\n                  set(waitingParticipantsState, (wps) =>\n                    wps.filter((wp) => wp !== ev.participant.id)\n                  );\n                  reset(waitingParticipantState(ev.participant.id));\n                  break;\n              }\n            });\n          });\n        },\n      []\n    ),\n    100,\n    true\n  );\n\n  return <>{children}</>;\n};\n","import { useDebugValue } from 'react';\nimport { useRecoilValue } from 'recoil';\n\nimport { localIdState } from '../DailyParticipants';\n\n/**\n * Returns the local participant's session_id or empty string '',\n * if the local participant doesn't exist.\n */\nexport const useLocalSessionId = () => {\n  const localId = useRecoilValue(localIdState);\n  useDebugValue(localId);\n  return localId;\n};\n","import { useDebugValue, useEffect, useState } from 'react';\nimport { useRecoilValue } from 'recoil';\n\nimport { activeIdState } from '../DailyParticipants';\nimport { useLocalSessionId } from './useLocalSessionId';\n\ninterface UseActiveSpeakerIdArgs {\n  /**\n   * Anytime the active-speaker-change event emits a new id, this callback can be used\n   * to determine if the new speaker id should be ignored or not.\n   * Return false from the callback to ignore the new speaker id in this hook's instance.\n   */\n  filter?(id: string | null): boolean;\n  /**\n   * If set to true, useActiveParticipant will never return the local participant.\n   */\n  ignoreLocal?: boolean;\n}\n\nconst noopFilter = () => true;\n\n/**\n * Returns the most recent speaker id mentioned in an [active-speaker-change](https://docs.daily.co/reference/daily-js/events/meeting-events#active-speaker-change) event.\n */\nexport const useActiveSpeakerId = ({\n  filter = noopFilter,\n  ignoreLocal = false,\n}: UseActiveSpeakerIdArgs = {}) => {\n  const localSessionId = useLocalSessionId();\n  const recentActiveId = useRecoilValue(activeIdState);\n  const isIgnoredLocalId = ignoreLocal && recentActiveId === localSessionId;\n  const isFilteredOut = !filter?.(recentActiveId);\n  const isRecentIdRelevant = !isIgnoredLocalId && !isFilteredOut;\n  const [activeId, setActiveId] = useState<string | null>(\n    isRecentIdRelevant ? recentActiveId : null\n  );\n\n  useEffect(() => {\n    if (isIgnoredLocalId || isFilteredOut) return;\n    setActiveId(recentActiveId);\n  }, [isFilteredOut, isIgnoredLocalId, recentActiveId]);\n\n  useDebugValue(activeId);\n\n  return activeId;\n};\n","import { DailyTrackState } from '@daily-co/daily-js';\n\nexport const isTrackOff = (trackState: DailyTrackState['state']) =>\n  ['blocked', 'off'].includes(trackState);\n","import { DailyEventObject } from '@daily-co/daily-js';\nimport { useCallback, useDebugValue, useEffect, useState } from 'react';\nimport { Snapshot, useRecoilCallback, useRecoilValue } from 'recoil';\n\nimport {\n  ExtendedDailyParticipant,\n  participantIdsState,\n  participantState,\n} from '../DailyParticipants';\nimport { RECOIL_PREFIX } from '../lib/constants';\nimport { customDeepEqual } from '../lib/customDeepEqual';\nimport { equalSelectorFamily } from '../lib/recoil-custom';\nimport { isTrackOff } from '../utils/isTrackOff';\nimport {\n  participantPropertiesState,\n  participantPropertyState,\n} from './useParticipantProperty';\nimport { useThrottledDailyEvent } from './useThrottledDailyEvent';\n\ntype FilterParticipantsFunction = (\n  p: ExtendedDailyParticipant,\n  index: number,\n  arr: ExtendedDailyParticipant[]\n) => boolean;\ntype SerializableFilterParticipants =\n  | 'local'\n  | 'remote'\n  | 'owner'\n  | 'record'\n  | 'screen';\ntype FilterParticipants =\n  | SerializableFilterParticipants\n  | FilterParticipantsFunction;\n\ntype SortParticipantsFunction = (\n  a: ExtendedDailyParticipant,\n  b: ExtendedDailyParticipant\n) => 1 | -1 | 0;\ntype SerializableSortParticipants =\n  | 'joined_at'\n  | 'session_id'\n  | 'user_id'\n  | 'user_name';\ntype SortParticipants = SerializableSortParticipants | SortParticipantsFunction;\n\n/**\n * Short-cut state selector for useParticipantIds({ filter: 'local' })\n */\nexport const participantIdsFilteredAndSortedState = equalSelectorFamily<\n  string[],\n  {\n    filter: SerializableFilterParticipants | null;\n    sort: SerializableSortParticipants | null;\n  }\n>({\n  key: RECOIL_PREFIX + 'participant-ids-filtered-sorted',\n  equals: customDeepEqual,\n  get:\n    ({ filter, sort }) =>\n    ({ get }) => {\n      const ids = get(participantIdsState);\n      return ids\n        .filter((id) => {\n          switch (filter) {\n            /**\n             * Simple boolean fields first.\n             */\n            case 'local':\n            case 'owner':\n            case 'record': {\n              return get(participantPropertyState({ id, property: filter }));\n            }\n            case 'remote': {\n              return !get(participantPropertyState({ id, property: 'local' }));\n            }\n            case 'screen': {\n              const [screenAudioState, screenVideoState] = get(\n                participantPropertiesState({\n                  id,\n                  properties: [\n                    'tracks.screenAudio.state',\n                    'tracks.screenVideo.state',\n                  ],\n                })\n              );\n              return (\n                !isTrackOff(screenAudioState) || !isTrackOff(screenVideoState)\n              );\n            }\n            default:\n              return true;\n          }\n        })\n        .sort((idA, idB) => {\n          switch (sort) {\n            case 'joined_at':\n            case 'session_id':\n            case 'user_id':\n            case 'user_name': {\n              const [aSort] = get(\n                participantPropertiesState({ id: idA, properties: [sort] })\n              );\n              const [bSort] = get(\n                participantPropertiesState({ id: idB, properties: [sort] })\n              );\n              if (aSort !== undefined || bSort !== undefined) {\n                if (aSort === undefined) return -1;\n                if (bSort === undefined) return 1;\n                if (aSort > bSort) return 1;\n                if (aSort < bSort) return -1;\n              }\n              return 0;\n            }\n            default:\n              return 0;\n          }\n        });\n    },\n});\n\ninterface UseParticipantIdsArgs {\n  filter?: FilterParticipants;\n  onActiveSpeakerChange?(ev: DailyEventObject<'active-speaker-change'>): void;\n  onParticipantJoined?(ev: DailyEventObject<'participant-joined'>): void;\n  onParticipantLeft?(ev: DailyEventObject<'participant-left'>): void;\n  onParticipantUpdated?(ev: DailyEventObject<'participant-updated'>): void;\n  sort?: SortParticipants;\n}\n\n/**\n * Returns a list of participant ids (= session_id).\n * The list can optionally be filtered and sorted, using the filter and sort options.\n */\nexport const useParticipantIds = ({\n  filter,\n  onActiveSpeakerChange,\n  onParticipantJoined,\n  onParticipantLeft,\n  onParticipantUpdated,\n  sort,\n}: UseParticipantIdsArgs = {}) => {\n  /**\n   * For instances of useParticipantIds with string-based filter and sort,\n   * we can immediately return the correct ids from Recoil's state.\n   */\n  const preFilteredSortedIds = useRecoilValue(\n    participantIdsFilteredAndSortedState({\n      filter: typeof filter === 'string' ? filter : null,\n      sort: typeof sort === 'string' ? sort : null,\n    })\n  );\n\n  const shouldUseCustomIds =\n    typeof filter === 'function' || typeof sort === 'function';\n\n  const getCustomFilteredIds = useCallback(\n    (snapshot: Snapshot) => {\n      if (\n        // Ignore if both filter and sort are not functions.\n        typeof filter !== 'function' &&\n        typeof sort !== 'function'\n      )\n        return [];\n\n      const participants: ExtendedDailyParticipant[] = preFilteredSortedIds.map(\n        (id) =>\n          snapshot.getLoadable(participantState(id))\n            .contents as ExtendedDailyParticipant\n      );\n\n      return (\n        participants\n          // Make sure we don't accidentally try to filter/sort `null` participants\n          // This can happen when a participant's id is already present in store\n          // but the participant object is not stored, yet.\n          .filter(Boolean)\n          // Run custom filter, if it's a function. Otherwise don't filter any participants.\n          .filter(typeof filter === 'function' ? filter : () => true)\n          // Run custom sort, if it's a function. Otherwise don't sort.\n          .sort(typeof sort === 'function' ? sort : () => 0)\n          // Map back to session_id.\n          .map((p) => p.session_id)\n          // Filter any potential null/undefined ids.\n          // This shouldn't really happen, but better safe than sorry.\n          .filter(Boolean)\n      );\n    },\n    [filter, preFilteredSortedIds, sort]\n  );\n\n  const [customIds, setCustomIds] = useState<string[]>([]);\n\n  const maybeUpdateCustomIds = useRecoilCallback(\n    ({ snapshot }) =>\n      () => {\n        if (!shouldUseCustomIds) return;\n        const newIds = getCustomFilteredIds(snapshot);\n        if (customDeepEqual(newIds, customIds)) return;\n        setCustomIds(newIds);\n      },\n    [customIds, getCustomFilteredIds, shouldUseCustomIds]\n  );\n\n  useEffect(() => {\n    maybeUpdateCustomIds();\n  }, [maybeUpdateCustomIds]);\n\n  useThrottledDailyEvent(\n    [\n      'participant-joined',\n      'participant-updated',\n      'active-speaker-change',\n      'participant-left',\n    ],\n    useCallback(\n      (evts) => {\n        if (!evts.length) return;\n        evts.forEach((ev) => {\n          switch (ev.action) {\n            case 'participant-joined':\n              onParticipantJoined?.(ev);\n              break;\n            case 'participant-updated':\n              onParticipantUpdated?.(ev);\n              break;\n            case 'active-speaker-change':\n              onActiveSpeakerChange?.(ev);\n              break;\n            case 'participant-left':\n              onParticipantLeft?.(ev);\n              break;\n          }\n        });\n        maybeUpdateCustomIds();\n      },\n      [\n        maybeUpdateCustomIds,\n        onActiveSpeakerChange,\n        onParticipantJoined,\n        onParticipantLeft,\n        onParticipantUpdated,\n      ]\n    )\n  );\n\n  const result =\n    typeof filter === 'function' || typeof sort === 'function'\n      ? customIds\n      : preFilteredSortedIds;\n\n  useDebugValue(result);\n\n  return result;\n};\n","import {\n  DailyCall,\n  DailyEventObjectNonFatalError,\n  DailyTrackState,\n} from '@daily-co/daily-js';\nimport { useCallback, useDebugValue } from 'react';\nimport { useRecoilValue } from 'recoil';\n\nimport { RECOIL_PREFIX } from '../lib/constants';\nimport { customDeepEqual } from '../lib/customDeepEqual';\nimport { equalSelector } from '../lib/recoil-custom';\nimport { Reconstruct } from '../types/Reconstruct';\nimport { useDaily } from './useDaily';\nimport { useDailyEvent } from './useDailyEvent';\nimport { participantIdsFilteredAndSortedState } from './useParticipantIds';\nimport { participantPropertyState } from './useParticipantProperty';\n\nexport interface ScreenShare {\n  local: boolean;\n  screenAudio: DailyTrackState;\n  screenVideo: DailyTrackState;\n  screenId: string;\n  session_id: string;\n}\n\nconst screenSharesState = equalSelector({\n  key: RECOIL_PREFIX + 'screen-shares',\n  equals: customDeepEqual,\n  get: ({ get }) => {\n    const screenIds = get(\n      participantIdsFilteredAndSortedState({ filter: 'screen', sort: null })\n    );\n    return screenIds.map<ScreenShare>((id) => {\n      return {\n        local: get(participantPropertyState({ id, property: 'local' })),\n        screenAudio: get(\n          participantPropertyState({ id, property: 'tracks.screenAudio' })\n        ),\n        screenVideo: get(\n          participantPropertyState({ id, property: 'tracks.screenVideo' })\n        ),\n        screenId: `${id}-screen`,\n        session_id: id,\n      };\n    });\n  },\n});\n\ntype DailyEventObjectScreenShareError = Reconstruct<\n  DailyEventObjectNonFatalError,\n  'type',\n  'screen-share-error'\n>;\n\ninterface UseScreenShareArgs {\n  onError?(ev: DailyEventObjectScreenShareError): void;\n  onLocalScreenShareStarted?(): void;\n  onLocalScreenShareStopped?(): void;\n}\n\n/**\n * Allows access to information about shared screens, and methods to start or stop a local screen share.\n */\nexport const useScreenShare = ({\n  onError,\n  onLocalScreenShareStarted,\n  onLocalScreenShareStopped,\n}: UseScreenShareArgs = {}) => {\n  const daily = useDaily();\n\n  const startScreenShare = useCallback(\n    (...args: Parameters<DailyCall['startScreenShare']>) => {\n      daily?.startScreenShare(...args);\n    },\n    [daily]\n  );\n\n  const stopScreenShare = useCallback(\n    (...args: Parameters<DailyCall['stopScreenShare']>) => {\n      daily?.stopScreenShare(...args);\n    },\n    [daily]\n  );\n\n  useDailyEvent(\n    'local-screen-share-started',\n    useCallback(\n      () => onLocalScreenShareStarted?.(),\n      [onLocalScreenShareStarted]\n    )\n  );\n  useDailyEvent(\n    'local-screen-share-stopped',\n    useCallback(\n      () => onLocalScreenShareStopped?.(),\n      [onLocalScreenShareStopped]\n    )\n  );\n  useDailyEvent(\n    'nonfatal-error',\n    useCallback(\n      (ev) => {\n        if (ev.type !== 'screen-share-error') return;\n        onError?.(ev as DailyEventObjectScreenShareError);\n      },\n      [onError]\n    )\n  );\n\n  const screens = useRecoilValue(screenSharesState);\n\n  const result = {\n    isSharingScreen: screens.some((s) => s.local),\n    screens,\n    startScreenShare,\n    stopScreenShare,\n  };\n\n  useDebugValue(result);\n\n  return result;\n};\n","import { DailyParticipantTracks, DailyTrackState } from '@daily-co/daily-js';\nimport { useDebugValue } from 'react';\n\nimport { isTrackOff } from '../utils/isTrackOff';\nimport { useParticipantProperty } from './useParticipantProperty';\n\ntype MediaType = keyof DailyParticipantTracks;\n\nexport interface MediaTrackState extends DailyTrackState {\n  isOff: boolean;\n}\n\n/**\n * Returns a participant's track and state, based on the given MediaType.\n *\n * Equivalent to daily.participants()[participantId].tracks[type].\n *\n * @param participantId The participant's session_id.\n * @param type The track type. Default: \"video\"\n */\nexport const useMediaTrack = (\n  participantId: string,\n  type: MediaType = 'video'\n): MediaTrackState => {\n  const trackState = useParticipantProperty(participantId, `tracks.${type}`);\n\n  const result: MediaTrackState = trackState\n    ? {\n        ...trackState,\n        isOff: isTrackOff(trackState.state),\n      }\n    : {\n        isOff: true,\n        persistentTrack: undefined,\n        state: 'off',\n        subscribed: false,\n      };\n\n  useDebugValue(result);\n\n  return result;\n};\n","/**\n * Original source: https://github.com/jaredLunde/react-hook/blob/master/packages/merged-ref/src/index.tsx\n * Original author: Jared Lunde (https://github.com/jaredLunde)\n * Originally published under the MIT license: https://github.com/jaredLunde/react-hook/blob/master/LICENSE\n */\n\nimport React, { useCallback } from 'react';\n\nfunction useMergedRef<T>(...refs: React.Ref<T>[]): React.RefCallback<T> {\n  return useCallback(\n    (element: T) => {\n      for (let i = 0; i < refs.length; i++) {\n        const ref = refs[i];\n        if (typeof ref === 'function') ref(element);\n        else if (ref && typeof ref === 'object')\n          (ref as React.MutableRefObject<T>).current = element;\n      }\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    refs\n  );\n}\n\nexport default useMergedRef;\n","import React, { forwardRef, memo, useEffect, useRef } from 'react';\n\nimport { useMediaTrack } from '../hooks/useMediaTrack';\nimport useMergedRef from '../hooks/useMergedRef';\n\nexport interface DailyAudioPlayException {\n  name?: string;\n  message?: string;\n  sessionId: string;\n  target: HTMLAudioElement;\n  type: string;\n}\n\ninterface Props extends React.AudioHTMLAttributes<HTMLAudioElement> {\n  /**\n   * Callback to handle failed attempt to play audio.\n   */\n  onPlayFailed?(e: DailyAudioPlayException): void;\n  sessionId: string;\n  type?: 'audio' | 'screenAudio' | 'rmpAudio';\n}\n\nexport const DailyAudioTrack = memo(\n  forwardRef<HTMLAudioElement, Props>(\n    ({ onPlayFailed, sessionId, type = 'audio', ...props }, ref) => {\n      const audioEl = useRef<HTMLAudioElement>(null);\n      const audio = useMediaTrack(sessionId, type);\n      const audioRef = useMergedRef<HTMLAudioElement>(audioEl, ref);\n      const subscribedState = audio?.subscribed;\n\n      /**\n       * Setup audio tag.\n       */\n      useEffect(() => {\n        const audioTag = audioEl.current;\n        if (!audioTag || !audio?.persistentTrack) return;\n        let playTimeout: ReturnType<typeof setTimeout>;\n        const handleCanPlay = () => {\n          audioTag.play().catch((e) => {\n            onPlayFailed?.({\n              sessionId,\n              target: audioTag,\n              type,\n              message: e.message,\n              name: e.name,\n            });\n          });\n        };\n        const handlePlay = () => {\n          clearTimeout(playTimeout);\n        };\n        audioTag.addEventListener('canplay', handleCanPlay);\n        audioTag.addEventListener('play', handlePlay);\n        audioTag.srcObject = new MediaStream([audio?.persistentTrack]);\n\n        return () => {\n          audioTag?.removeEventListener('canplay', handleCanPlay);\n          audioTag?.removeEventListener('play', handlePlay);\n        };\n      }, [audio?.persistentTrack, onPlayFailed, sessionId, type]);\n\n      return (\n        <audio\n          autoPlay\n          ref={audioRef}\n          {...props}\n          data-session-id={sessionId}\n          data-audio-type={type}\n          data-subscribed={subscribedState}\n        />\n      );\n    }\n  )\n);\nDailyAudioTrack.displayName = 'DailyAudioTrack';\n","import React, {\n  forwardRef,\n  memo,\n  useCallback,\n  useImperativeHandle,\n  useRef,\n  useState,\n} from 'react';\nimport { useRecoilCallback } from 'recoil';\n\nimport { ExtendedDailyParticipant } from '../DailyParticipants';\nimport { useActiveSpeakerId } from '../hooks/useActiveSpeakerId';\nimport { useDaily } from '../hooks/useDaily';\nimport { useLocalSessionId } from '../hooks/useLocalSessionId';\nimport { useParticipantIds } from '../hooks/useParticipantIds';\nimport { participantPropertyState } from '../hooks/useParticipantProperty';\nimport { useScreenShare } from '../hooks/useScreenShare';\nimport { useThrottledDailyEvent } from '../hooks/useThrottledDailyEvent';\nimport { isTrackOff } from '../utils/isTrackOff';\nimport { DailyAudioPlayException, DailyAudioTrack } from './DailyAudioTrack';\n\ninterface Props {\n  /**\n   * When enabled and the call is configured for manual track subscriptions,\n   * DailyAudio will automatically subscribe to the active speaker's audio track.\n   */\n  autoSubscribeActiveSpeaker?: boolean;\n  /**\n   * Maximum amount of parallel speakers. Default: 5.\n   */\n  maxSpeakers?: number;\n  /**\n   * Callback to handle failed attempt to play audio.\n   */\n  onPlayFailed?(e: DailyAudioPlayException): void;\n  /**\n   * When enabled, plays audio from a local screenAudio track.\n   */\n  playLocalScreenAudio?: boolean;\n}\n\nexport interface DailyAudioHandle {\n  /**\n   * Returns all rendered audio elements.\n   */\n  getAllAudio(): HTMLAudioElement[];\n  /**\n   * Returns the audio element assigned to the current active speaker.\n   */\n  getActiveSpeakerAudio(): HTMLAudioElement | null;\n  /**\n   * Returns all rendered audio elements for rmpAudio tracks.\n   */\n  getRmpAudio(): HTMLAudioElement[];\n  /**\n   * Returns all rendered audio elements for screenAudio tracks.\n   */\n  getScreenAudio(): HTMLAudioElement[];\n  /**\n   * Returns the audio track for the given sessionId.\n   */\n  getAudioBySessionId(sessionId: string): HTMLAudioElement | null;\n  /**\n   * Returns the rmpAudio track for the given sessionId.\n   */\n  getRmpAudioBySessionId(sessionId: string): HTMLAudioElement | null;\n  /**\n   * Returns the screenAudio track for the given sessionId.\n   */\n  getScreenAudioBySessionId(sessionId: string): HTMLAudioElement | null;\n}\n\nexport const DailyAudio = memo(\n  forwardRef<DailyAudioHandle, Props>(\n    (\n      {\n        autoSubscribeActiveSpeaker = false,\n        maxSpeakers = 5,\n        onPlayFailed,\n        playLocalScreenAudio = false,\n      },\n      ref\n    ) => {\n      const daily = useDaily();\n      const [speakers, setSpeakers] = useState<string[]>(\n        new Array(maxSpeakers).fill('')\n      );\n      const { screens } = useScreenShare();\n      const localSessionId = useLocalSessionId();\n      const activeSpeakerId = useActiveSpeakerId({\n        ignoreLocal: true,\n      });\n\n      const containerRef = useRef<HTMLDivElement>(null);\n      useImperativeHandle(\n        ref,\n        () => ({\n          getActiveSpeakerAudio: () => {\n            return (\n              containerRef.current?.querySelector(\n                `audio[data-session-id=\"${activeSpeakerId}\"][data-audio-type=\"audio\"]`\n              ) ?? null\n            );\n          },\n          getAllAudio: () => {\n            return Array.from(\n              containerRef.current?.querySelectorAll('audio') ?? []\n            );\n          },\n          getAudioBySessionId: (id) => {\n            return (\n              containerRef.current?.querySelector(\n                `audio[data-session-id=\"${id}\"][data-audio-type=\"audio\"]`\n              ) ?? null\n            );\n          },\n          getRmpAudio: () => {\n            return Array.from(\n              containerRef.current?.querySelectorAll(\n                'audio[data-audio-type=\"rmpAudio\"]'\n              ) ?? []\n            );\n          },\n          getScreenAudio: () => {\n            return Array.from(\n              containerRef.current?.querySelectorAll(\n                'audio[data-audio-type=\"screenAudio\"]'\n              ) ?? []\n            );\n          },\n          getRmpAudioBySessionId: (id) => {\n            return (\n              containerRef.current?.querySelector(\n                `audio[data-session-id=\"${id}\"][data-audio-type=\"rmpAudio\"]`\n              ) ?? null\n            );\n          },\n          getScreenAudioBySessionId: (id) => {\n            return (\n              containerRef.current?.querySelector(\n                `audio[data-session-id=\"${id}\"][data-audio-type=\"screenAudio\"]`\n              ) ?? null\n            );\n          },\n        }),\n        [activeSpeakerId]\n      );\n\n      const assignSpeaker = useRecoilCallback(\n        ({ snapshot }) =>\n          async (sessionId: string) => {\n            /**\n             * Only consider remote participants with subscribed or staged audio.\n             */\n            const subscribedParticipants = Object.values(\n              daily?.participants() ?? {}\n            ).filter((p) => !p.local && Boolean(p.tracks.audio.subscribed));\n\n            const isSubscribed = (id: string) =>\n              subscribedParticipants.some((p) => p.session_id === id);\n\n            if (!isSubscribed(sessionId)) {\n              if (\n                daily &&\n                !daily.isDestroyed() &&\n                autoSubscribeActiveSpeaker &&\n                !daily.subscribeToTracksAutomatically()\n              ) {\n                daily.updateParticipant(sessionId, {\n                  setSubscribedTracks: {\n                    audio: true,\n                  },\n                });\n              } else {\n                return;\n              }\n            }\n\n            setSpeakers((prevSpeakers) => {\n              // New speaker is already present\n              if (prevSpeakers.includes(sessionId)) return prevSpeakers;\n\n              // Try to find a free slot: either unassigned or unsubscribed\n              const freeSlotCheck = (id: string) => !id || !isSubscribed(id);\n              if (prevSpeakers.some(freeSlotCheck)) {\n                const idx = prevSpeakers.findIndex(freeSlotCheck);\n                prevSpeakers[idx] = sessionId;\n                return [...prevSpeakers];\n              }\n\n              // From here on we can assume that all assigned audio tracks are subscribed.\n\n              // Try to find muted recent speaker\n              const mutedIdx = prevSpeakers.findIndex((id) =>\n                subscribedParticipants.some(\n                  (p) => p.session_id === id && isTrackOff(p.tracks.audio.state)\n                )\n              );\n              if (mutedIdx >= 0) {\n                prevSpeakers[mutedIdx] = sessionId;\n                return [...prevSpeakers];\n              }\n\n              // Find least recent non-active speaker and replace with new speaker\n              const speakerObjects = subscribedParticipants\n                .filter(\n                  (p) =>\n                    // Only consider participants currently assigned to speaker slots\n                    prevSpeakers.includes(p.session_id) &&\n                    // Don't replace current active participant, to avoid audio drop-outs\n                    p.session_id !== activeSpeakerId\n                )\n                .sort((a, b) => {\n                  const lastActiveA =\n                    snapshot.getLoadable(\n                      participantPropertyState({\n                        id: a.session_id,\n                        property: 'last_active',\n                      })\n                    ).contents ?? new Date('1970-01-01');\n                  const lastActiveB =\n                    snapshot.getLoadable(\n                      participantPropertyState({\n                        id: b.session_id,\n                        property: 'last_active',\n                      })\n                    ).contents ?? new Date('1970-01-01');\n                  if (lastActiveA > lastActiveB) return 1;\n                  if (lastActiveA < lastActiveB) return -1;\n                  return 0;\n                });\n\n              // No previous speaker in call anymore. Assign first free slot.\n              if (!speakerObjects.length) {\n                // Don't replace the active speaker. Instead find first non-active speaker slot.\n                const replaceIdx = prevSpeakers.findIndex(\n                  (id) => id !== activeSpeakerId\n                );\n                prevSpeakers[replaceIdx] = sessionId;\n                return [...prevSpeakers];\n              }\n\n              // Replace least recent speaker with new speaker\n              const replaceIdx = prevSpeakers.indexOf(\n                speakerObjects[0]?.session_id\n              );\n              prevSpeakers[replaceIdx] = sessionId;\n              return [...prevSpeakers];\n            });\n          },\n        [activeSpeakerId, autoSubscribeActiveSpeaker, daily]\n      );\n\n      /**\n       * Unassigns speaker from speaker slot, e.g. because participant left the call.\n       */\n      const removeSpeaker = useCallback((sessionId: string) => {\n        setSpeakers((prevSpeakers) => {\n          if (!prevSpeakers.includes(sessionId)) return prevSpeakers;\n          const newSpeakers = [...prevSpeakers];\n          const idx = newSpeakers.indexOf(sessionId);\n          newSpeakers[idx] = '';\n          return newSpeakers;\n        });\n      }, []);\n\n      useThrottledDailyEvent(\n        ['active-speaker-change', 'track-started', 'participant-left'],\n        useCallback(\n          (evts) => {\n            evts.forEach((ev) => {\n              switch (ev.action) {\n                case 'active-speaker-change':\n                  if (ev.activeSpeaker.peerId === localSessionId) return;\n                  assignSpeaker(ev.activeSpeaker.peerId);\n                  break;\n                case 'track-started':\n                  if (\n                    ev.track.kind === 'audio' &&\n                    ev.participant &&\n                    !ev.participant.local\n                  ) {\n                    assignSpeaker(ev.participant.session_id);\n                  }\n                  break;\n                case 'participant-left':\n                  removeSpeaker(ev.participant.session_id);\n                  break;\n              }\n            });\n          },\n          [assignSpeaker, localSessionId, removeSpeaker]\n        ),\n        200\n      );\n\n      const rmpAudioIds = useParticipantIds({\n        filter: useCallback(\n          (p: ExtendedDailyParticipant) => Boolean(p?.tracks?.rmpAudio),\n          []\n        ),\n      });\n\n      return (\n        <div ref={containerRef}>\n          {speakers.map((sessionId, idx) => (\n            <DailyAudioTrack\n              key={`speaker-slot-${idx}`}\n              onPlayFailed={onPlayFailed}\n              sessionId={sessionId}\n              type=\"audio\"\n            />\n          ))}\n          {screens\n            .filter((screen) => (playLocalScreenAudio ? true : !screen.local))\n            .map((screen) => (\n              <DailyAudioTrack\n                key={screen.screenId}\n                onPlayFailed={onPlayFailed}\n                sessionId={screen.session_id}\n                type=\"screenAudio\"\n              />\n            ))}\n          {rmpAudioIds.map((id) => (\n            <DailyAudioTrack\n              key={`${id}-rmp`}\n              onPlayFailed={onPlayFailed}\n              sessionId={id}\n              type=\"rmpAudio\"\n            />\n          ))}\n        </div>\n      );\n    }\n  )\n);\nDailyAudio.displayName = 'DailyAudio';\n","import React, { forwardRef, useEffect, useMemo, useRef } from 'react';\n\nimport { useLocalSessionId } from '../hooks/useLocalSessionId';\nimport { useMediaTrack } from '../hooks/useMediaTrack';\nimport useMergedRef from '../hooks/useMergedRef';\nimport { useParticipantProperty } from '../hooks/useParticipantProperty';\n\ninterface DailyVideoDimensions {\n  aspectRatio: number;\n  height: number;\n  width: number;\n}\n\ninterface Props\n  extends Omit<React.VideoHTMLAttributes<HTMLVideoElement>, 'onResize'> {\n  /**\n   * For local user-facing camera streams, we'll automatically mirror the video.\n   */\n  automirror?: boolean;\n  /**\n   * Defines whether the video should be fully contained or cover the box. Default: 'contain'.\n   */\n  fit?: 'contain' | 'cover';\n  /**\n   * Forces the video to be mirrored, if set.\n   */\n  mirror?: boolean;\n  /**\n   * Optional styles to apply, when video is playable.\n   */\n  playableStyle?: React.CSSProperties;\n  /**\n   * Optional callback, which is triggered whenever the video's rendered width or height changes.\n   * Returns the video's native width, height and aspectRatio.\n   */\n  onResize?(dimensions: DailyVideoDimensions): void;\n  /**\n   * Identifies the participant for which a video stream should be rendered.\n   */\n  sessionId: string;\n  /**\n   * Defines the track type being used.\n   */\n  type: 'video' | 'screenVideo' | 'rmpVideo';\n}\n\nexport const DailyVideo = forwardRef<HTMLVideoElement, Props>(\n  function DailyVideo(\n    {\n      automirror,\n      fit = 'contain',\n      mirror,\n      onResize,\n      playableStyle = {},\n      sessionId,\n      style = {},\n      type = 'video',\n      ...props\n    },\n    ref\n  ) {\n    const localSessionId = useLocalSessionId();\n    const isLocal = localSessionId === sessionId;\n    const isScreen = type === 'screenVideo';\n    const isLocalCam = isLocal && !isScreen;\n\n    const videoEl = useRef<HTMLVideoElement>(null);\n    const videoRef = useMergedRef<HTMLVideoElement>(videoEl, ref);\n\n    const videoState = useMediaTrack(sessionId, type);\n    const videoTrack = videoState.persistentTrack;\n    /**\n     * Considered as playable video:\n     * - local cam feed\n     * - any screen share\n     * - remote cam feed that is subscribed and reported as playable\n     */\n    const isPlayable = isLocalCam || isScreen || !videoState.isOff;\n    const trackState = useParticipantProperty(sessionId, `tracks.${type}`);\n    const subscribedState = trackState?.subscribed;\n\n    /**\n     * Determine if video needs to be mirrored.\n     */\n    const isMirrored = useMemo(() => {\n      if (typeof mirror === 'boolean') return mirror;\n      if (!automirror) return false;\n      if (!videoTrack) return isLocalCam;\n\n      const videoTrackSettings = videoTrack.getSettings();\n      const isUsersFrontCamera =\n        'facingMode' in videoTrackSettings\n          ? isLocalCam && videoTrackSettings.facingMode === 'user'\n          : isLocalCam;\n      // only apply mirror effect to user facing camera\n      return isUsersFrontCamera;\n    }, [automirror, isLocalCam, mirror, videoTrack]);\n\n    /**\n     * Handle canplay & picture-in-picture events.\n     */\n    useEffect(function setupVideoEvents() {\n      const video = videoEl.current;\n      if (!video) return;\n\n      const playVideo = () => {\n        const promise = video.play();\n        if (promise !== undefined) {\n          promise\n            .then(() => {\n              // All good, playback started.\n              video.controls = false;\n            })\n            .catch((error) => {\n              // Auto-play was prevented. Show video controls, so user can play video manually.\n              video.controls = true;\n              console.warn('Failed to play video', error);\n            });\n        }\n      };\n\n      const handleCanPlay = () => {\n        if (!video.paused) return;\n        playVideo();\n      };\n      const handleEnterPIP = () => {\n        video.style.transform = 'scale(1)';\n      };\n      const handleLeavePIP = () => {\n        video.style.transform = '';\n        setTimeout(() => {\n          if (video.paused) playVideo();\n        }, 100);\n      };\n      const handleVisibilityChange = () => {\n        if (document.visibilityState === 'hidden') return;\n        if (!video.paused) return;\n        playVideo();\n      };\n      video.addEventListener('canplay', handleCanPlay);\n      video.addEventListener('enterpictureinpicture', handleEnterPIP);\n      video.addEventListener('leavepictureinpicture', handleLeavePIP);\n\n      // Videos can be paused if media was played in another app on iOS.\n      // Resuming here, when returning back to Daily call.\n      document.addEventListener('visibilitychange', handleVisibilityChange);\n      return () => {\n        video.removeEventListener('canplay', handleCanPlay);\n        video.removeEventListener('enterpictureinpicture', handleEnterPIP);\n        video.removeEventListener('leavepictureinpicture', handleLeavePIP);\n        document.removeEventListener(\n          'visibilitychange',\n          handleVisibilityChange\n        );\n      };\n    }, []);\n\n    /**\n     * Update srcObject.\n     */\n    useEffect(\n      function updateSrcObject() {\n        const video = videoEl.current;\n        if (!video || !videoTrack) return;\n        video.srcObject = new MediaStream([videoTrack]);\n        video.load();\n        return () => {\n          // clean up when unmounted\n          video.srcObject = null;\n          video.load();\n        };\n      },\n      [videoTrack, videoTrack?.id]\n    );\n\n    /**\n     * Add optional event listener for resize event so the parent component\n     * can know the video's native aspect ratio.\n     */\n    useEffect(\n      function reportVideoDimensions() {\n        const video = videoEl.current;\n        if (!onResize || !video) return;\n\n        let frame: ReturnType<typeof requestAnimationFrame>;\n        function handleResize() {\n          if (frame) cancelAnimationFrame(frame);\n          frame = requestAnimationFrame(() => {\n            const video = videoEl.current;\n            if (!video || document.hidden) return;\n            const videoWidth = video.videoWidth;\n            const videoHeight = video.videoHeight;\n            if (videoWidth && videoHeight) {\n              onResize?.({\n                aspectRatio: videoWidth / videoHeight,\n                height: videoHeight,\n                width: videoWidth,\n              });\n            }\n          });\n        }\n\n        handleResize();\n        video.addEventListener('loadedmetadata', handleResize);\n        video.addEventListener('resize', handleResize);\n\n        return () => {\n          if (frame) cancelAnimationFrame(frame);\n          video.removeEventListener('loadedmetadata', handleResize);\n          video.removeEventListener('resize', handleResize);\n        };\n      },\n      [onResize]\n    );\n\n    return (\n      <video\n        autoPlay\n        muted\n        playsInline\n        ref={videoRef}\n        data-local={isLocal}\n        // Only set data-mirrored and data-playable when true\n        data-mirrored={isMirrored || undefined}\n        data-playable={isPlayable || undefined}\n        data-session-id={sessionId}\n        data-subscribed={subscribedState}\n        data-video-type={type}\n        style={{\n          objectFit: fit,\n          transform: isMirrored ? 'scale(-1, 1)' : '',\n          ...style,\n          ...(isPlayable ? playableStyle : {}),\n        }}\n        {...props}\n      />\n    );\n  }\n);\nDailyVideo.displayName = 'DailyVideo';\n","import { createContext } from 'react';\n\ninterface DevicesContextValue {\n  refreshDevices(): Promise<void>;\n}\n\nexport const DailyDevicesContext = createContext<DevicesContextValue>({\n  refreshDevices: () => Promise.resolve(),\n});\n","import {\n  DailyCameraErrorObject,\n  DailyCameraErrorType,\n} from '@daily-co/daily-js';\nimport React, { useCallback } from 'react';\nimport { atom, useRecoilCallback } from 'recoil';\n\nimport { DailyDevicesContext } from './DailyDevicesContext';\nimport { useDaily } from './hooks/useDaily';\nimport { useDailyEvent } from './hooks/useDailyEvent';\nimport { RECOIL_PREFIX } from './lib/constants';\n\ntype GeneralState =\n  | 'idle'\n  | 'pending'\n  | 'not-supported'\n  | 'granted'\n  | 'blocked'\n  | 'in-use'\n  | 'not-found'\n  | 'constraints-invalid'\n  | 'constraints-none-specified'\n  | 'undefined-mediadevices'\n  | 'unknown';\n\ntype DeviceState = 'granted' | 'in-use';\nexport interface StatefulDevice {\n  device: MediaDeviceInfo;\n  selected: boolean;\n  state: DeviceState;\n}\n\nexport const generalCameraState = atom<GeneralState>({\n  key: RECOIL_PREFIX + 'general-camera-state',\n  default: 'idle',\n});\nexport const generalMicrophoneState = atom<GeneralState>({\n  key: RECOIL_PREFIX + 'general-microphone-state',\n  default: 'idle',\n});\nexport const cameraDevicesState = atom<StatefulDevice[]>({\n  key: RECOIL_PREFIX + 'camera-devices',\n  default: [],\n});\nexport const microphoneDevicesState = atom<StatefulDevice[]>({\n  key: RECOIL_PREFIX + 'microphone-devices',\n  default: [],\n});\nexport const speakerDevicesState = atom<StatefulDevice[]>({\n  key: RECOIL_PREFIX + 'speaker-devices',\n  default: [],\n});\nexport const lastCameraErrorState =\n  atom<DailyCameraErrorObject<DailyCameraErrorType> | null>({\n    key: RECOIL_PREFIX + 'last-camera-error',\n    default: null,\n  });\n\nexport const DailyDevices: React.FC<React.PropsWithChildren<unknown>> = ({\n  children,\n}) => {\n  const daily = useDaily();\n\n  /**\n   * Refreshes list of available devices using enumerateDevices.\n   * Previous device states are kept in place, otherwise states are initialized as 'granted'.\n   */\n  const refreshDevices = useRecoilCallback(\n    ({ transact_UNSTABLE }) =>\n      async () => {\n        /**\n         * Check for legacy browsers.\n         */\n        if (\n          typeof navigator?.mediaDevices?.getUserMedia === 'undefined' ||\n          typeof navigator?.mediaDevices?.enumerateDevices === 'undefined'\n        ) {\n          transact_UNSTABLE(({ set }) => {\n            set(generalCameraState, 'not-supported');\n            set(generalMicrophoneState, 'not-supported');\n          });\n          return;\n        }\n\n        if (!daily) return;\n\n        try {\n          const { devices } = await daily.enumerateDevices();\n          /**\n           * Filter out \"empty\" devices for when device access has not been granted (yet).\n           */\n          const cams = devices.filter(\n            (d) => d.kind === 'videoinput' && d.deviceId !== ''\n          );\n          const mics = devices.filter(\n            (d) => d.kind === 'audioinput' && d.deviceId !== ''\n          );\n          const speakers = devices.filter(\n            (d) => d.kind === 'audiooutput' && d.deviceId !== ''\n          );\n          const { camera, mic, speaker } = await daily.getInputDevices();\n\n          const mapDevice = (\n            device: {} | MediaDeviceInfo,\n            d: MediaDeviceInfo,\n            prevDevices: StatefulDevice[]\n          ) => ({\n            device: d,\n            selected: 'deviceId' in device && d.deviceId === device.deviceId,\n            state:\n              prevDevices.find((p) => p.device.deviceId === d.deviceId)\n                ?.state ?? 'granted',\n          });\n          const sortDeviceByLabel = (a: StatefulDevice, b: StatefulDevice) => {\n            if (a.device.deviceId === 'default') return -1;\n            if (b.device.deviceId === 'default') return 1;\n            if (a.device.label < b.device.label) return -1;\n            if (a.device.label > b.device.label) return 1;\n            return 0;\n          };\n\n          transact_UNSTABLE(({ set }) => {\n            set(cameraDevicesState, (prevCams) =>\n              cams\n                .filter(Boolean)\n                .map<StatefulDevice>((d) => mapDevice(camera, d, prevCams))\n                .sort(sortDeviceByLabel)\n            );\n            set(microphoneDevicesState, (prevMics) =>\n              mics\n                .filter(Boolean)\n                .map<StatefulDevice>((d) => mapDevice(mic, d, prevMics))\n                .sort(sortDeviceByLabel)\n            );\n            set(speakerDevicesState, (prevSpeakers) =>\n              speakers\n                .filter(Boolean)\n                .map<StatefulDevice>((d) => mapDevice(speaker, d, prevSpeakers))\n                .sort(sortDeviceByLabel)\n            );\n          });\n        } catch (e) {\n          transact_UNSTABLE(({ set }) => {\n            set(generalCameraState, 'not-supported');\n            set(generalMicrophoneState, 'not-supported');\n          });\n        }\n      },\n    [daily]\n  );\n\n  /**\n   * Updates general and specific device states, based on blocked status.\n   */\n  const updateDeviceStates = useRecoilCallback(\n    ({ set, snapshot, transact_UNSTABLE }) =>\n      async () => {\n        if (!daily) return;\n\n        const currentCamState = await snapshot.getPromise(generalCameraState);\n        const currentMicState = await snapshot.getPromise(\n          generalMicrophoneState\n        );\n\n        const participants = daily.participants();\n        // Guard against potentially uninitialized local participant\n        if (!participants.local) return;\n\n        const { tracks } = participants.local;\n\n        let camPermissionState: PermissionState = 'prompt';\n        let micPermissionState: PermissionState = 'prompt';\n        if (navigator.permissions) {\n          try {\n            const camPermission = await navigator.permissions.query({\n              // @ts-ignore\n              name: 'camera',\n            });\n            camPermissionState = camPermission.state;\n            const micPermission = await navigator.permissions.query({\n              // @ts-ignore\n              name: 'microphone',\n            });\n            micPermissionState = micPermission.state;\n          } catch {\n            // Permissions query not available\n          }\n        }\n\n        const awaitingCamAccess =\n          camPermissionState === 'prompt' &&\n          ['idle', 'pending'].includes(currentCamState) &&\n          tracks.video.state === 'interrupted' &&\n          !tracks.video.persistentTrack;\n        const initialCamOff =\n          ['idle', 'pending'].includes(currentCamState) &&\n          !tracks.video.persistentTrack &&\n          Boolean(tracks.video.off?.byUser);\n        const awaitingMicAccess =\n          micPermissionState === 'prompt' &&\n          ['idle', 'pending'].includes(currentMicState) &&\n          tracks.audio.state === 'interrupted' &&\n          !tracks.audio.persistentTrack;\n        const initialMicOff =\n          ['idle', 'pending'].includes(currentMicState) &&\n          !tracks.audio.persistentTrack &&\n          Boolean(tracks.audio.off?.byUser);\n\n        if (tracks.audio?.blocked?.byDeviceInUse) {\n          transact_UNSTABLE(({ set }) => {\n            set(generalMicrophoneState, 'in-use');\n            set(microphoneDevicesState, (mics) =>\n              mics.map<StatefulDevice>((m) =>\n                m.selected ? { ...m, state: 'in-use' } : m\n              )\n            );\n          });\n        } else if (tracks.audio?.blocked?.byDeviceMissing) {\n          set(generalMicrophoneState, 'not-found');\n        } else if (\n          tracks.audio?.blocked?.byPermissions ||\n          micPermissionState === 'denied'\n        ) {\n          set(generalMicrophoneState, 'blocked');\n        } else if (awaitingMicAccess) {\n          set(generalMicrophoneState, 'pending');\n        } else if (initialMicOff) {\n          set(generalMicrophoneState, 'idle');\n        } else {\n          transact_UNSTABLE(({ set }) => {\n            set(generalMicrophoneState, 'granted');\n            set(microphoneDevicesState, (mics) =>\n              mics.map<StatefulDevice>((m) =>\n                m.selected ? { ...m, state: 'granted' } : m\n              )\n            );\n          });\n        }\n\n        if (tracks.video?.blocked?.byDeviceInUse) {\n          transact_UNSTABLE(({ set }) => {\n            set(generalCameraState, 'in-use');\n            set(cameraDevicesState, (cams) =>\n              cams.map<StatefulDevice>((m) =>\n                m.selected ? { ...m, state: 'in-use' } : m\n              )\n            );\n          });\n        } else if (tracks.video?.blocked?.byDeviceMissing) {\n          set(generalCameraState, 'not-found');\n        } else if (\n          tracks.video?.blocked?.byPermissions ||\n          camPermissionState === 'denied'\n        ) {\n          set(generalCameraState, 'blocked');\n        } else if (awaitingCamAccess) {\n          set(generalCameraState, 'pending');\n        } else if (initialCamOff) {\n          set(generalCameraState, 'idle');\n        } else {\n          transact_UNSTABLE(({ set }) => {\n            set(generalCameraState, 'granted');\n            set(cameraDevicesState, (cams) =>\n              cams.map<StatefulDevice>((m) =>\n                m.selected ? { ...m, state: 'granted' } : m\n              )\n            );\n          });\n        }\n        refreshDevices();\n      },\n    [daily, refreshDevices]\n  );\n\n  useDailyEvent(\n    'participant-updated',\n    useCallback(\n      (ev) => {\n        if (!ev.participant.local) return;\n        updateDeviceStates();\n      },\n      [updateDeviceStates]\n    )\n  );\n\n  useDailyEvent('available-devices-updated', refreshDevices);\n  useDailyEvent('selected-devices-updated', refreshDevices);\n\n  useDailyEvent(\n    'camera-error',\n    useRecoilCallback(\n      ({ transact_UNSTABLE }) =>\n        (ev) => {\n          transact_UNSTABLE(({ set }) => {\n            set(lastCameraErrorState, ev.error);\n            switch (ev.error?.type) {\n              case 'cam-in-use':\n                set(generalCameraState, 'in-use');\n                break;\n              case 'mic-in-use':\n                set(generalMicrophoneState, 'in-use');\n                break;\n              case 'cam-mic-in-use':\n                set(generalCameraState, 'in-use');\n                set(generalMicrophoneState, 'in-use');\n                break;\n              case 'not-found':\n                if (ev.error?.missingMedia.includes('video'))\n                  set(generalCameraState, 'not-found');\n                if (ev.error?.missingMedia.includes('audio'))\n                  set(generalMicrophoneState, 'not-found');\n                break;\n              case 'permissions':\n                if (ev.error?.blockedMedia.includes('video'))\n                  set(generalCameraState, 'blocked');\n                if (ev.error?.blockedMedia.includes('audio'))\n                  set(generalMicrophoneState, 'blocked');\n                break;\n              case 'constraints':\n                if (ev.error?.reason === 'invalid') {\n                  set(generalCameraState, 'constraints-invalid');\n                  set(generalMicrophoneState, 'constraints-invalid');\n                } else if (ev.error?.reason === 'none-specified') {\n                  set(generalCameraState, 'constraints-none-specified');\n                  set(generalMicrophoneState, 'constraints-none-specified');\n                }\n                break;\n              case 'undefined-mediadevices':\n                set(generalCameraState, 'undefined-mediadevices');\n                set(generalMicrophoneState, 'undefined-mediadevices');\n                break;\n              case 'unknown':\n              default:\n                set(generalCameraState, 'unknown');\n                set(generalMicrophoneState, 'unknown');\n                break;\n            }\n          });\n        },\n      []\n    )\n  );\n\n  /**\n   * Update all device state, when camera is started.\n   */\n  useDailyEvent(\n    'started-camera',\n    useRecoilCallback(\n      ({ transact_UNSTABLE }) =>\n        () => {\n          transact_UNSTABLE(({ set }) => {\n            set(generalCameraState, 'granted');\n            set(generalMicrophoneState, 'granted');\n          });\n          updateDeviceStates();\n        },\n      [updateDeviceStates]\n    )\n  );\n\n  return (\n    <DailyDevicesContext.Provider value={{ refreshDevices }}>\n      {children}\n    </DailyDevicesContext.Provider>\n  );\n};\n","import { DailyStreamingLayoutConfig } from '@daily-co/daily-js';\nimport React from 'react';\nimport { atom, useRecoilCallback } from 'recoil';\n\nimport { useDailyEvent } from './hooks/useDailyEvent';\nimport { RECOIL_PREFIX } from './lib/constants';\n\ninterface LiveStreamingState {\n  errorMsg?: string;\n  isLiveStreaming: boolean;\n  layout?: DailyStreamingLayoutConfig;\n}\n\nexport const liveStreamingState = atom<LiveStreamingState>({\n  key: RECOIL_PREFIX + 'live-streaming',\n  default: {\n    errorMsg: undefined,\n    isLiveStreaming: false,\n    layout: undefined,\n  },\n});\n\nexport const DailyLiveStreaming: React.FC<React.PropsWithChildren<unknown>> = ({\n  children,\n}) => {\n  useDailyEvent(\n    'live-streaming-started',\n    useRecoilCallback(\n      ({ set }) =>\n        (ev) => {\n          set(liveStreamingState, {\n            isLiveStreaming: true,\n            layout: ev?.layout,\n          });\n        },\n      []\n    )\n  );\n\n  useDailyEvent(\n    'live-streaming-stopped',\n    useRecoilCallback(\n      ({ set }) =>\n        () => {\n          set(liveStreamingState, (prevState) => ({\n            ...prevState,\n            isLiveStreaming: false,\n            layout: undefined,\n          }));\n        },\n      []\n    )\n  );\n\n  useDailyEvent(\n    'live-streaming-error',\n    useRecoilCallback(\n      ({ set }) =>\n        (ev) => {\n          set(liveStreamingState, (prevState) => ({\n            ...prevState,\n            errorMsg: ev.errorMsg,\n          }));\n        },\n      []\n    )\n  );\n\n  useDailyEvent(\n    'left-meeting',\n    useRecoilCallback(\n      ({ reset }) =>\n        () => {\n          reset(liveStreamingState);\n        },\n      []\n    )\n  );\n\n  return <>{children}</>;\n};\n","import {\n  DailyEventObjectFatalError,\n  DailyEventObjectNonFatalError,\n  DailyMeetingSessionState,\n  DailyMeetingState,\n} from '@daily-co/daily-js';\nimport React from 'react';\nimport { atom, useRecoilCallback } from 'recoil';\n\nimport { useDaily } from './hooks/useDaily';\nimport { useDailyEvent } from './hooks/useDailyEvent';\nimport { RECOIL_PREFIX } from './lib/constants';\n\nexport const meetingStateState = atom<DailyMeetingState>({\n  key: RECOIL_PREFIX + 'meeting-state',\n  default: 'new',\n});\n\nexport const meetingErrorState = atom<DailyEventObjectFatalError | null>({\n  key: RECOIL_PREFIX + 'meeting-error',\n  default: null,\n});\n\nexport const nonFatalErrorState = atom<DailyEventObjectNonFatalError | null>({\n  key: RECOIL_PREFIX + 'non-fatal-error',\n  default: null,\n});\n\nexport const meetingSessionDataState = atom<DailyMeetingSessionState>({\n  key: 'meeting-session-data',\n  default: {\n    data: undefined,\n    topology: 'none',\n  },\n});\n\nexport const DailyMeeting: React.FC<React.PropsWithChildren<{}>> = ({\n  children,\n}) => {\n  const daily = useDaily();\n\n  /**\n   * Updates meeting state.\n   */\n  const updateMeetingState = useRecoilCallback(\n    ({ set }) =>\n      () => {\n        if (!daily) return;\n        const meetingState = daily.meetingState();\n        set(meetingStateState, meetingState);\n        return meetingState;\n      },\n    [daily]\n  );\n\n  useDailyEvent('loading', updateMeetingState);\n  useDailyEvent('loaded', updateMeetingState);\n  useDailyEvent('joining-meeting', updateMeetingState);\n  useDailyEvent('joined-meeting', updateMeetingState);\n  useDailyEvent('left-meeting', updateMeetingState);\n  useDailyEvent(\n    'error',\n    useRecoilCallback(\n      ({ set }) =>\n        (ev) => {\n          set(meetingErrorState, ev);\n          updateMeetingState();\n        },\n      [updateMeetingState]\n    )\n  );\n  useDailyEvent(\n    'nonfatal-error',\n    useRecoilCallback(\n      ({ set }) =>\n        (ev) => {\n          set(nonFatalErrorState, ev);\n        },\n      []\n    )\n  );\n\n  /**\n   * Updates meeting session state.\n   */\n  const initMeetingSessionState = useRecoilCallback(\n    ({ set }) =>\n      () => {\n        if (!daily) return;\n        set(meetingSessionDataState, daily.meetingSessionState());\n      },\n    [daily]\n  );\n\n  /**\n   * Initialize state when joined meeting or setting up the hook.\n   */\n  useDailyEvent('joined-meeting', initMeetingSessionState);\n\n  /**\n   * Update Recoil state whenever meeting session state is updated.\n   */\n  useDailyEvent(\n    'meeting-session-state-updated',\n    useRecoilCallback(\n      ({ set }) =>\n        (ev) => {\n          set(meetingSessionDataState, ev.meetingSessionState);\n        },\n      []\n    )\n  );\n\n  /**\n   * Reset Recoil state when meeting ends.\n   */\n  useDailyEvent(\n    'left-meeting',\n    useRecoilCallback(\n      ({ reset }) =>\n        () => {\n          reset(meetingSessionDataState);\n        },\n      []\n    )\n  );\n\n  /**\n   * Reset Recoil state when call instance is destroyed.\n   */\n  useDailyEvent(\n    'call-instance-destroyed',\n    useRecoilCallback(\n      ({ transact_UNSTABLE }) =>\n        () => {\n          transact_UNSTABLE(({ reset }) => {\n            reset(meetingStateState);\n            reset(meetingErrorState);\n            reset(nonFatalErrorState);\n            reset(meetingSessionDataState);\n          });\n        },\n      []\n    )\n  );\n\n  return <>{children}</>;\n};\n","import { DailyNetworkStats, DailyNetworkTopology } from '@daily-co/daily-js';\nimport React, { useEffect } from 'react';\nimport { atom, useRecoilCallback, useRecoilValue } from 'recoil';\n\nimport { useDaily } from './hooks/useDaily';\nimport { useDailyEvent } from './hooks/useDailyEvent';\nimport { RECOIL_PREFIX } from './lib/constants';\n\nexport const topologyState = atom<DailyNetworkTopology | 'none'>({\n  key: RECOIL_PREFIX + 'topology',\n  default: 'none',\n});\nexport const networkQualityState = atom<DailyNetworkStats['quality']>({\n  key: RECOIL_PREFIX + 'networkQuality',\n  default: 100,\n});\nexport const networkThresholdState = atom<DailyNetworkStats['threshold']>({\n  key: RECOIL_PREFIX + 'networkThreshold',\n  default: 'good',\n});\n\nexport const DailyNetwork: React.FC<React.PropsWithChildren<{}>> = ({\n  children,\n}) => {\n  const daily = useDaily();\n\n  const topology = useRecoilValue(topologyState);\n\n  const initTopology = useRecoilCallback(\n    ({ set }) =>\n      async () => {\n        if (!daily) return;\n        const topology = await daily.getNetworkTopology();\n        if (!topology || topology?.topology === 'none') return;\n        set(topologyState, topology.topology);\n      },\n    [daily]\n  );\n\n  useDailyEvent('joined-meeting', initTopology);\n  useDailyEvent(\n    'network-connection',\n    useRecoilCallback(\n      ({ set }) =>\n        (ev) => {\n          switch (ev.event) {\n            case 'connected':\n              if (ev.type === 'peer-to-peer') set(topologyState, 'peer');\n              if (ev.type === 'sfu') set(topologyState, 'sfu');\n              break;\n          }\n        },\n      []\n    )\n  );\n  useDailyEvent(\n    'network-quality-change',\n    useRecoilCallback(\n      ({ transact_UNSTABLE }) =>\n        (ev) => {\n          transact_UNSTABLE(({ set }) => {\n            set(networkQualityState, (prevQuality) =>\n              prevQuality !== ev.quality ? ev.quality : prevQuality\n            );\n            set(networkThresholdState, (prevThreshold) =>\n              prevThreshold !== ev.threshold ? ev.threshold : prevThreshold\n            );\n          });\n        },\n      []\n    )\n  );\n\n  useDailyEvent(\n    'left-meeting',\n    useRecoilCallback(\n      ({ transact_UNSTABLE }) =>\n        () => {\n          transact_UNSTABLE(({ reset }) => {\n            reset(topologyState);\n            reset(networkQualityState);\n            reset(networkThresholdState);\n          });\n        },\n      []\n    )\n  );\n\n  useEffect(() => {\n    if (!daily || topology !== 'none') return;\n    initTopology();\n  }, [daily, initTopology, topology]);\n\n  return <>{children}</>;\n};\n","import { DailyStreamingLayoutConfig } from '@daily-co/daily-js';\nimport React, { useEffect } from 'react';\nimport { atom, useRecoilCallback, useSetRecoilState } from 'recoil';\n\nimport { useDailyEvent } from './hooks/useDailyEvent';\nimport { useLocalSessionId } from './hooks/useLocalSessionId';\nimport { useParticipantIds } from './hooks/useParticipantIds';\nimport { RECOIL_PREFIX } from './lib/constants';\n\ninterface RecordingState {\n  /**\n   * Determines whether an error occurred during the last recording attempt.\n   */\n  error?: boolean;\n  /**\n   * Determines whether the local participant is being recorded, based on the recording settings.\n   */\n  isLocalParticipantRecorded: boolean;\n  /**\n   * Determines whether a recording is currently running or not.\n   */\n  isRecording: boolean;\n  /**\n   * Contains the last applied cloud recording layout config.\n   */\n  layout?: DailyStreamingLayoutConfig;\n  /**\n   * Determines whether the recording is running locally.\n   * See [enable_recording](https://docs.daily.co/reference/rest-api/rooms/config#enable_recording).\n   */\n  local?: boolean;\n  /**\n   * Contains the recording id.\n   */\n  recordingId?: string;\n  /**\n   * Contains the date when the 'recording-started' event was received.\n   * This doesn't necessarily match the date the recording was actually started.\n   */\n  recordingStartedDate?: Date;\n  /**\n   * Contains the session_id of the participant who started the recording.\n   */\n  startedBy?: string;\n  /**\n   * Contains the recording type.\n   * See [enable_recording](https://docs.daily.co/reference/rest-api/rooms/config#enable_recording).\n   */\n  type?: string;\n}\n\nexport const recordingState = atom<RecordingState>({\n  key: RECOIL_PREFIX + 'recording',\n  default: {\n    isLocalParticipantRecorded: false,\n    isRecording: false,\n  },\n});\n\nexport const DailyRecordings: React.FC<React.PropsWithChildren<unknown>> = ({\n  children,\n}) => {\n  const setState = useSetRecoilState(recordingState);\n\n  const localSessionId = useLocalSessionId();\n\n  const recordingParticipantIds = useParticipantIds({\n    filter: 'record',\n  });\n  /**\n   * Update recording state, whenever amount of recording participants changes.\n   */\n  useEffect(() => {\n    const hasRecordingParticipants = recordingParticipantIds.length > 0;\n    const isLocalParticipantRecording = recordingParticipantIds.includes(\n      localSessionId || 'local'\n    );\n    setState((s) => ({\n      ...s,\n      // In case type is local or not set, determine based on recording participants\n      isLocalParticipantRecorded:\n        s?.type === 'local' || !s?.type\n          ? hasRecordingParticipants\n          : s.isLocalParticipantRecorded,\n      isRecording:\n        s?.type === 'local' || !s?.type\n          ? hasRecordingParticipants\n          : s.isRecording,\n      local:\n        (s?.type === 'local' || !s?.type) && hasRecordingParticipants\n          ? isLocalParticipantRecording\n          : s?.local,\n      /**\n       * Set type in case recording participants are detected.\n       * We only set `record` on participants, when recording type is 'local'.\n       */\n      type: hasRecordingParticipants ? 'local' : s?.type,\n    }));\n  }, [localSessionId, recordingParticipantIds, setState]);\n\n  useDailyEvent(\n    'recording-started',\n    useRecoilCallback(\n      ({ set }) =>\n        (ev) => {\n          let isLocalParticipantRecorded = true;\n          switch (ev.type) {\n            case 'cloud-beta':\n            case 'cloud': {\n              if (\n                localSessionId &&\n                ev.layout?.preset === 'single-participant' &&\n                ev.layout.session_id !== localSessionId\n              ) {\n                isLocalParticipantRecorded = false;\n              }\n              break;\n            }\n          }\n          set(recordingState, {\n            error: false,\n            isLocalParticipantRecorded,\n            isRecording: true,\n            layout: ev?.layout,\n            local: ev?.local,\n            recordingId: ev?.recordingId,\n            recordingStartedDate: new Date(),\n            startedBy: ev?.startedBy,\n            type: ev?.type,\n          });\n        },\n      [localSessionId]\n    )\n  );\n  useDailyEvent(\n    'recording-stopped',\n    useRecoilCallback(\n      ({ set }) =>\n        () => {\n          set(recordingState, (prevState) => ({\n            ...prevState,\n            isLocalParticipantRecorded: false,\n            isRecording: false,\n          }));\n        },\n      []\n    )\n  );\n  useDailyEvent(\n    'recording-error',\n    useRecoilCallback(\n      ({ set }) =>\n        () => {\n          set(recordingState, (prevState) => ({\n            ...prevState,\n            error: true,\n            isLocalParticipantRecorded: false,\n            isRecording: false,\n          }));\n        },\n      []\n    )\n  );\n  useDailyEvent(\n    'left-meeting',\n    useRecoilCallback(\n      ({ reset }) =>\n        () => {\n          reset(recordingState);\n        },\n      []\n    )\n  );\n  return <>{children}</>;\n};\n","import { DailyMeetingState } from '@daily-co/daily-js';\nimport { useDebugValue } from 'react';\nimport { useRecoilValue } from 'recoil';\n\nimport { meetingStateState } from '../DailyMeeting';\n\n/**\n * Returns a meeting's current state.\n */\nexport const useMeetingState = (): DailyMeetingState | null => {\n  const meetingState = useRecoilValue(meetingStateState);\n  useDebugValue(meetingState);\n  return meetingState;\n};\n","import { DailyRoomInfo } from '@daily-co/daily-js';\nimport React from 'react';\nimport { atom, useRecoilCallback } from 'recoil';\n\nimport { useDaily } from './hooks/useDaily';\nimport { useDailyEvent } from './hooks/useDailyEvent';\nimport { useMeetingState } from './hooks/useMeetingState';\nimport { RECOIL_PREFIX } from './lib/constants';\n\nexport const roomState = atom<DailyRoomInfo | null>({\n  key: RECOIL_PREFIX + 'room',\n  default: null,\n});\n\nexport const DailyRoom: React.FC<React.PropsWithChildren<{}>> = ({\n  children,\n}) => {\n  const daily = useDaily();\n  const meetingState = useMeetingState();\n\n  const updateRoom = useRecoilCallback(\n    ({ set }) =>\n      async () => {\n        if (!daily || meetingState === 'left-meeting') return;\n        const room = await daily.room();\n        if (room && 'id' in room) {\n          set(roomState, room);\n        }\n        return room;\n      },\n    [daily, meetingState]\n  );\n\n  useDailyEvent('access-state-updated', updateRoom);\n\n  useDailyEvent(\n    'left-meeting',\n    useRecoilCallback(\n      ({ reset }) =>\n        () => {\n          reset(roomState);\n        },\n      []\n    )\n  );\n\n  return <>{children}</>;\n};\n","import {\n  DailyEventObjectAppMessage,\n  DailyTranscriptionDeepgramOptions,\n} from '@daily-co/daily-js';\nimport React from 'react';\nimport { atom, useRecoilCallback } from 'recoil';\n\nimport { useDailyEvent } from './hooks/useDailyEvent';\nimport { RECOIL_PREFIX } from './lib/constants';\n\nexport interface Transcription {\n  session_id: string;\n  user_id: string;\n  text: string;\n  timestamp: string;\n  // Deprecated\n  is_final: boolean;\n}\n\ninterface TranscriptionState extends DailyTranscriptionDeepgramOptions {\n  /**\n   * Determines whether an error occurred during the last transcription attempt.\n   */\n  error?: boolean;\n  /**\n   * Determines whether a transcription is currently running or not.\n   */\n  isTranscribing: boolean;\n  /**\n   * Contains the date when the 'transcription-started' event was received.\n   * This doesn't necessarily match the date the transcription was actually started.\n   */\n  transcriptionStartDate?: Date;\n  /**\n   * Contains the session_id of the participant who started the transcription.\n   */\n  startedBy?: string;\n  /**\n   * Contains the session_id of the participant who updated the transcription.\n   */\n  updatedBy?: string;\n  /**\n   * Contains the transcriptions that we received.\n   */\n  transcriptions: Transcription[];\n}\n\nexport const transcriptionState = atom<TranscriptionState>({\n  key: RECOIL_PREFIX + 'transcription',\n  default: {\n    isTranscribing: false,\n    model: 'general',\n    language: 'en',\n    transcriptions: [],\n  },\n});\n\nexport const DailyTranscriptions: React.FC<React.PropsWithChildren<{}>> = ({\n  children,\n}) => {\n  useDailyEvent(\n    'transcription-started',\n    useRecoilCallback(\n      ({ set }) =>\n        (ev) => {\n          set(transcriptionState, {\n            error: false,\n            isTranscribing: true,\n            transcriptionStartDate: new Date(),\n            transcriptions: [],\n            ...ev,\n          });\n        },\n      []\n    )\n  );\n  useDailyEvent(\n    'transcription-stopped',\n    useRecoilCallback(\n      ({ set }) =>\n        (ev) => {\n          set(transcriptionState, (prevState) => ({\n            ...prevState,\n            updatedBy: ev?.updatedBy,\n            isTranscribing: false,\n          }));\n        },\n      []\n    )\n  );\n  useDailyEvent(\n    'transcription-error',\n    useRecoilCallback(\n      ({ set }) =>\n        () => {\n          set(transcriptionState, (prevState) => ({\n            ...prevState,\n            error: true,\n            isTranscribing: false,\n          }));\n        },\n      []\n    )\n  );\n  useDailyEvent(\n    'left-meeting',\n    useRecoilCallback(\n      ({ set }) =>\n        () => {\n          set(transcriptionState, (prevState) => ({\n            ...prevState,\n            isTranscribing: false,\n          }));\n        },\n      []\n    )\n  );\n  useDailyEvent(\n    'app-message',\n    useRecoilCallback(\n      ({ set }) =>\n        (ev: DailyEventObjectAppMessage<Transcription>) => {\n          if (ev?.fromId === 'transcription') {\n            set(transcriptionState, (prevState) => ({\n              ...prevState,\n              // setting it to true whenever a new message is received\n              // as the participants who joined after the transcription-started event\n              // won't be knowing if transcription is started or not\n              isTranscribing: true,\n              transcriptions: [...prevState.transcriptions, ev.data],\n            }));\n          }\n        },\n      []\n    )\n  );\n\n  return <>{children}</>;\n};\n","import Daily, { DailyCall, DailyFactoryOptions } from '@daily-co/daily-js';\nimport { MutableRefObject, useEffect, useRef, useState } from 'react';\n\nimport { customDeepEqual } from '../lib/customDeepEqual';\n\ntype InstanceType = 'callFrame' | 'callObject';\n\nconst defaultOptions: DailyFactoryOptions = {};\nconst defaultShouldCreateInstance = () => true;\n\nexport interface Props {\n  parentElRef?: MutableRefObject<HTMLElement>;\n  options?: DailyFactoryOptions;\n  shouldCreateInstance?(): boolean;\n}\n\nconst defaultProps: Props = {\n  options: defaultOptions,\n  shouldCreateInstance: defaultShouldCreateInstance,\n};\n\n/**\n * Helper hook to maintain custom call instances in React codebases.\n */\nexport const useCallInstance = (\n  type: InstanceType,\n  {\n    parentElRef,\n    options = defaultOptions,\n    shouldCreateInstance = defaultShouldCreateInstance,\n  }: Props = defaultProps\n) => {\n  const [callInstance, setCallInstance] = useState<DailyCall | null>(null);\n\n  /**\n   * Holds last used props when callObject instance was created.\n   */\n  const lastUsedOptions = useRef<DailyFactoryOptions>();\n  useEffect(() => {\n    /**\n     * Call frame instances with a defined parentEl likely pass a ref.\n     * Typically a DOM ref is initialized with useRef(null).\n     * We'll want to wait until parentEl is defined, meaning that the ref is\n     * correctly wired up with a DOM element.\n     * Otherwise we'll just check shouldCreateInstance().\n     */\n    if (\n      (type === 'callFrame' && parentElRef?.current === null) ||\n      !shouldCreateInstance()\n    )\n      return;\n\n    async function destroyCallInstance(co: DailyCall) {\n      await co.destroy();\n    }\n\n    /**\n     * Once instance is destroyed, nullify callInstance, so a new one can be created.\n     */\n    const handleDestroyedInstance = () => {\n      /**\n       * Setting a timeout makes sure the destruction and creation\n       * of call instances happen in separate call stacks.\n       * Otherwise there's a risk for duplicate call instances.\n       */\n      setTimeout(() => setCallInstance(null), 0);\n    };\n\n    let co = Daily.getCallInstance();\n\n    /**\n     * In case a call instance exists outside of this hook instance's knowledge,\n     * store it in state.\n     */\n    if (!callInstance && co && !co.isDestroyed()) {\n      co.once('call-instance-destroyed', handleDestroyedInstance);\n      setCallInstance(co);\n      return;\n    }\n\n    /**\n     * callInstance exists.\n     */\n    if (callInstance) {\n      /**\n       * Props have changed. Destroy current instance, so a new one can be created.\n       */\n      if (!customDeepEqual(lastUsedOptions.current, options)) {\n        destroyCallInstance(callInstance);\n      }\n      /**\n       * Return early.\n       */\n      return;\n    }\n\n    if (!co || co.isDestroyed()) {\n      /**\n       * callInstance doesn't exist or is destroyed (TODO: Check why getCallInstance() can return a destroyed instance),\n       * but should be created.\n       * Important to spread props, because createCallObject/createFrame alters the passed object (adds layout and dailyJsVersion).\n       */\n      switch (type) {\n        case 'callFrame':\n          co = parentElRef?.current\n            ? Daily.createFrame(parentElRef.current, { ...options })\n            : Daily.createFrame({ ...options });\n          break;\n        case 'callObject':\n          co = Daily.createCallObject({ ...options });\n          break;\n      }\n      lastUsedOptions.current = options;\n    }\n\n    setCallInstance(co);\n\n    co.once('call-instance-destroyed', handleDestroyedInstance);\n\n    /**\n     * No cleanup phase here, because callObject.destroy() returns a Promise.\n     * We can't have asynchronous cleanups in a useEffect.\n     * To avoid infinite render loops we compare the props when creating call object instances.\n     */\n  }, [callInstance, options, parentElRef, shouldCreateInstance, type]);\n\n  return callInstance;\n};\n","import { Props, useCallInstance } from './useCallInstance';\n\ntype CallObjectProps = Omit<Props, 'parentEl'>;\n\n/**\n * Helper hook to maintain custom callObject instances in React codebases.\n */\nexport const useCallObject = (props: CallObjectProps) =>\n  useCallInstance('callObject', props);\n","import {\n  DailyCall,\n  DailyEvent,\n  DailyEventObject,\n  DailyFactoryOptions,\n} from '@daily-co/daily-js';\nimport React, { useCallback, useEffect, useMemo, useRef } from 'react';\nimport { RecoilRoot, RecoilRootProps } from 'recoil';\n\nimport { DailyContext } from './DailyContext';\nimport { DailyDevices } from './DailyDevices';\nimport { DailyEventContext } from './DailyEventContext';\nimport { DailyLiveStreaming } from './DailyLiveStreaming';\nimport { DailyMeeting } from './DailyMeeting';\nimport { DailyNetwork } from './DailyNetwork';\nimport { DailyParticipants } from './DailyParticipants';\nimport { DailyRecordings } from './DailyRecordings';\nimport { DailyRoom } from './DailyRoom';\nimport { DailyTranscriptions } from './DailyTranscriptions';\nimport { useCallObject } from './hooks/useCallObject';\n\ntype BaseProps =\n  | DailyFactoryOptions\n  | {\n      callObject: DailyCall | null;\n    };\n\ntype Props = BaseProps & {\n  /**\n   * Allows to override props for [RecoilRoot](https://recoiljs.org/docs/api-reference/core/RecoilRoot/).\n   * In case you use Recoil in your own application, you can pass `override: false` to allow\n   * daily-react to store its state in your application's RecoilRoot.\n   * Default value: {}\n   */\n  recoilRootProps?: Omit<RecoilRootProps, 'children'>;\n};\n\ntype EventsMap = Partial<Record<DailyEvent, Map<number, Function>>>;\n\nexport const DailyProvider: React.FC<React.PropsWithChildren<Props>> = ({\n  children,\n  recoilRootProps = {},\n  ...props\n}) => {\n  const eventsMap = useRef<EventsMap>({});\n\n  /**\n   * Generic event handler to loop through registered event callbacks.\n   */\n  const handleEvent = useCallback((ev: DailyEventObject) => {\n    if (!('action' in ev)) return;\n    const event = ev.action as DailyEvent;\n    const allHandlers = Array.from(eventsMap.current?.[event] ?? []);\n    const priorityHandlers = allHandlers.filter(([key]) => key < 0);\n    const normalHandlers = allHandlers.filter(([key]) => key > 0);\n    const sortedHandlers = [...priorityHandlers, ...normalHandlers];\n    for (let [, cb] of sortedHandlers) {\n      cb(ev);\n    }\n  }, []);\n\n  /**\n   * In case events are set up via useDailyEvent before a DailyCall instance is available,\n   * we'll register the events whenever daily is set.\n   */\n  const initEventHandlers = useCallback(\n    (daily: DailyCall) => {\n      if (!daily) return;\n      (Object.keys(eventsMap.current) as DailyEvent[]).forEach((event) => {\n        daily.off(event as DailyEvent, handleEvent);\n        if (!daily.isDestroyed()) {\n          daily.on(event as DailyEvent, handleEvent);\n        }\n      });\n    },\n    [handleEvent]\n  );\n\n  const externalCallObject = 'callObject' in props ? props.callObject : null;\n\n  const memoizedOptions = useMemo(\n    () => ('callObject' in props ? {} : props),\n    [props]\n  );\n  const internalCallObject = useCallObject({\n    options: memoizedOptions,\n    shouldCreateInstance: useCallback(() => {\n      return !('callObject' in props);\n    }, [props]),\n  });\n\n  const callObject = externalCallObject ?? internalCallObject;\n\n  useEffect(() => {\n    if (!callObject) return;\n    initEventHandlers(callObject);\n  }, [callObject, initEventHandlers]);\n\n  /**\n   * Registers event callback.\n   */\n  const on = useCallback(\n    (ev: DailyEvent, cb: Function, key: number) => {\n      if (!eventsMap.current[ev]) {\n        eventsMap.current[ev] = new Map();\n        if (callObject) {\n          /**\n           * Make sure only 1 event listener is registered at anytime for handleEvent.\n           * Otherwise, events sent from daily-js might be handled multiple times.\n           */\n          callObject.off(ev, handleEvent);\n          if (!callObject.isDestroyed()) {\n            callObject.on(ev, handleEvent);\n          }\n        }\n      }\n      if (!eventsMap.current[ev]?.has(key)) {\n        eventsMap.current[ev]?.set(key, cb);\n      }\n    },\n    [callObject, handleEvent]\n  );\n\n  /**\n   * Unregisters event callback.\n   */\n  const off = useCallback(\n    (ev: DailyEvent, key: number) => {\n      eventsMap.current[ev]?.delete(key);\n      if (eventsMap.current[ev]?.size === 0) {\n        callObject?.off(ev, handleEvent);\n        delete eventsMap.current[ev];\n      }\n    },\n    [callObject, handleEvent]\n  );\n\n  return (\n    <RecoilRoot {...recoilRootProps}>\n      <DailyContext.Provider value={callObject}>\n        <DailyEventContext.Provider value={{ on, off }}>\n          <DailyRoom>\n            <DailyMeeting>\n              <DailyNetwork>\n                <DailyParticipants>\n                  <DailyRecordings>\n                    <DailyLiveStreaming>\n                      <DailyTranscriptions>\n                        <DailyDevices>{children}</DailyDevices>\n                      </DailyTranscriptions>\n                    </DailyLiveStreaming>\n                  </DailyRecordings>\n                </DailyParticipants>\n              </DailyNetwork>\n            </DailyMeeting>\n          </DailyRoom>\n        </DailyEventContext.Provider>\n      </DailyContext.Provider>\n    </RecoilRoot>\n  );\n};\n","import { DailyEventObject } from '@daily-co/daily-js';\nimport { useCallback, useDebugValue } from 'react';\nimport { useRecoilValue } from 'recoil';\n\nimport { participantState } from '../DailyParticipants';\nimport { useThrottledDailyEvent } from './useThrottledDailyEvent';\n\ninterface UseParticipantArgs {\n  onParticipantLeft?(ev: DailyEventObject<'participant-left'>): void;\n  onParticipantUpdated?(ev: DailyEventObject<'participant-updated'>): void;\n}\n\n/**\n * Returns the participant identified by the given sessionId.\n * @param sessionId  The participant's session_id or \"local\".\n * @deprecated Use [useParticipantProperty](https://docs.daily.co/reference/daily-react/use-participant-property) instead to only subscribe to required participant properties.\n */\nexport const useParticipant = (\n  sessionId: string,\n  { onParticipantLeft, onParticipantUpdated }: UseParticipantArgs = {}\n) => {\n  const participant = useRecoilValue(participantState(sessionId));\n\n  useThrottledDailyEvent(\n    ['participant-updated', 'participant-left'],\n    useCallback(\n      (evts) => {\n        const filteredEvts = evts.filter(\n          (ev) => ev.participant.session_id === sessionId\n        );\n        if (!filteredEvts.length) return;\n        filteredEvts.forEach((ev) => {\n          switch (ev.action) {\n            case 'participant-updated':\n              onParticipantUpdated?.(ev);\n              break;\n            case 'participant-left':\n              onParticipantLeft?.(ev);\n              break;\n          }\n        });\n      },\n      [onParticipantLeft, onParticipantUpdated, sessionId]\n    )\n  );\n\n  useDebugValue(participant);\n\n  return participant;\n};\n","import { DailyEventObject } from '@daily-co/daily-js';\nimport { useCallback, useDebugValue, useEffect, useState } from 'react';\nimport { useRecoilValue } from 'recoil';\n\nimport { activeIdState } from '../DailyParticipants';\nimport { useDaily } from './useDaily';\nimport { useDailyEvent } from './useDailyEvent';\nimport { useParticipant } from './useParticipant';\n\ninterface UseActiveParticipantArgs {\n  /**\n   * If set to true, useActiveParticipant will never return the local participant.\n   */\n  ignoreLocal?: boolean;\n  /**\n   * Optional event callback for [active-speaker-change](https://docs.daily.co/reference/daily-js/events/meeting-events#active-speaker-change) event listener.\n   */\n  onActiveSpeakerChange?(ev: DailyEventObject<'active-speaker-change'>): void;\n}\n\n/**\n * Returns the most recent participant mentioned in an [active-speaker-change](https://docs.daily.co/reference/daily-js/events/meeting-events#active-speaker-change) event.\n * @deprecated Use [useActiveSpeakerId](https://docs.daily.co/reference/daily-react/use-active-speaker-id) instead.\n */\nexport const useActiveParticipant = ({\n  ignoreLocal = false,\n  onActiveSpeakerChange,\n}: UseActiveParticipantArgs = {}) => {\n  const daily = useDaily();\n  const recentActiveId = useRecoilValue(activeIdState);\n  const [activeId, setActiveId] = useState('');\n  const activeParticipant = useParticipant(activeId);\n\n  useEffect(() => {\n    if (!daily) return;\n    const local = daily?.participants()?.local;\n    if (ignoreLocal && recentActiveId === local?.session_id) return;\n\n    // setting activeId as string to avoid passing null to useParticipant hook\n    setActiveId(recentActiveId ?? '');\n  }, [daily, ignoreLocal, recentActiveId]);\n\n  useDailyEvent(\n    'active-speaker-change',\n    useCallback(\n      (ev) => {\n        onActiveSpeakerChange?.(ev);\n      },\n      [onActiveSpeakerChange]\n    )\n  );\n\n  useDebugValue(activeParticipant);\n\n  return activeParticipant;\n};\n","import { DailyEventObjectAppMessage } from '@daily-co/daily-js';\nimport { useCallback } from 'react';\n\nimport { useDaily } from './useDaily';\nimport { useDailyEvent } from './useDailyEvent';\n\ntype SendAppMessage<Data = any> = (data: Data, to?: string) => void;\n\ninterface UseAppMessageArgs<Data> {\n  /**\n   * Optional event callback for [app-message](https://docs.daily.co/reference/daily-js/events/participant-events#app-message) event listener.\n   * Receives this hook's sendAppMessage as an additional argument to avoid circular dependencies.\n   */\n  onAppMessage?(\n    ev: DailyEventObjectAppMessage<Data>,\n    sendAppMessage?: SendAppMessage<Data>\n  ): void;\n}\n\n/**\n * React hook to setup [app-message](https://docs.daily.co/reference/daily-js/events/participant-events#app-message) listeners and\n * to send messages via [sendAppMessage](https://docs.daily.co/reference/daily-js/instance-methods/send-app-message).\n */\nexport const useAppMessage = <Data = any>({\n  onAppMessage,\n}: UseAppMessageArgs<Data> = {}) => {\n  const daily = useDaily();\n\n  const sendAppMessage: SendAppMessage<Data> = useCallback(\n    (data, to = '*') => {\n      if (!daily) return;\n      daily.sendAppMessage(data, to);\n    },\n    [daily]\n  );\n\n  const handleAppMessage = useCallback(\n    (ev: DailyEventObjectAppMessage<Data>) => {\n      onAppMessage?.(ev, sendAppMessage);\n    },\n    [onAppMessage, sendAppMessage]\n  );\n\n  useDailyEvent('app-message', handleAppMessage);\n\n  return sendAppMessage;\n};\n","const audioLevelProcessor = `\n    class AudioLevelProcessor extends AudioWorkletProcessor {\n    volume;\n    interval;\n    nextFrame;\n    \n    constructor() {\n      super();\n      this.volume = 0;\n      this.interval = 25;\n      this.nextFrame = this.interval;\n    }\n    \n    get intervalInFrames() {\n      // sampleRate is globally defined in AudioWorklets.\n      // See https://developer.mozilla.org/en-US/docs/Web/API/AudioWorkletGlobalScope\n      // eslint-disable-next-line no-undef\n      return (this.interval / 1000) * sampleRate;\n    }\n    \n    process(inputList) {\n      const firstInput = inputList[0];\n    \n      if (firstInput.length > 0) {\n        const inputData = firstInput[0];\n        let total = 0;\n    \n        for (let i = 0; i < inputData.length; ++i) {\n          total += Math.abs(inputData[i]);\n        }\n    \n        const rms = Math.sqrt(total / inputData.length);\n        this.volume = Math.max(0, Math.min(1, rms));\n    \n        this.nextFrame -= inputData.length;\n        if (this.nextFrame < 0) {\n          this.nextFrame += this.intervalInFrames;\n          this.port.postMessage({ volume: this.volume });\n        }\n      }\n    \n      return true;\n    }\n    }\n    \n    registerProcessor('audiolevel', AudioLevelProcessor);              \n`;\n\nexport const inlineAudioWorklet = `data:application/javascript;charset=utf8,${encodeURIComponent(\n  audioLevelProcessor\n)}`;\n","import { useEffect, useRef } from 'react';\n\nimport { inlineAudioWorklet } from '../lib/inlineAudioWorklet';\n/**\n * Returns the volume level of a given MediaStreamTrack.\n * @param mediaTrack The MediaStreamTrack to be analysed.\n * @param onVolumeChange The function to execute when the volume changes. Can be used to visualise audio output.\n * @deprecated Use useAudioLevelObserver() instead.\n */\nexport const useAudioLevel = (\n  mediaTrack: MediaStreamTrack | undefined,\n  onVolumeChange: (volume: number) => void\n) => {\n  const audioCtx = useRef<AudioContext>();\n\n  useEffect(\n    function setupStreamAndStartProcessing() {\n      // No mediaTrack. Stop immediately.\n      if (!mediaTrack) return;\n      const AudioCtx =\n        typeof AudioContext !== 'undefined'\n          ? AudioContext\n          : typeof window.webkitAudioContext !== 'undefined'\n          ? window.webkitAudioContext\n          : null;\n      // No AudioContext available in browser. Can't measure audio volume.\n      if (!AudioCtx) return;\n      if (!audioCtx.current) {\n        // No audio context initialized. Initializing now.\n        audioCtx.current = new AudioCtx();\n      }\n      const audioContext = audioCtx.current;\n      // Audio context could not be initialized. Stopping.\n      if (!audioContext) return;\n\n      const mediaStreamSource = audioContext.createMediaStreamSource(\n        new MediaStream([mediaTrack])\n      );\n      let node: AudioWorkletNode | null;\n      let gainNode: GainNode;\n\n      const startProcessing = async () => {\n        /**\n         * Try to add the module only once.\n         * In case it's not added to the audio context, yet, trying to initialize it will fail.\n         * There's only one real reason for `new AudioWorkletNode` to fail and that is\n         * when the corresponding module isn't added to the audio context, yet.\n         * This makes sure we only add the module once.\n         *\n         * We're inlining the worklet instead of loading it via a URL as not to complicate bundling\n         * this package.\n         */\n        try {\n          node = new AudioWorkletNode(audioContext, 'audiolevel');\n          gainNode = audioContext.createGain();\n        } catch {\n          try {\n            await audioContext.audioWorklet.addModule(inlineAudioWorklet);\n            node = new AudioWorkletNode(audioContext, 'audiolevel');\n            gainNode = audioContext.createGain();\n          } catch (e) {\n            console.error(e);\n          }\n        }\n\n        if (!(node && gainNode)) return;\n\n        node.port.onmessage = (event) => {\n          let volume = 0;\n          if (event.data.volume) volume = event.data.volume;\n          if (!node) return;\n          onVolumeChange(volume);\n        };\n\n        gainNode.gain.value = 0;\n\n        try {\n          mediaStreamSource\n            .connect(node)\n            .connect(gainNode)\n            .connect(audioContext.destination);\n        } catch (e) {\n          console.warn(e);\n        }\n      };\n\n      startProcessing();\n\n      return () => {\n        node?.disconnect();\n        node = null;\n        mediaStreamSource?.disconnect();\n      };\n    },\n    [onVolumeChange, mediaTrack]\n  );\n};\n","import { useCallback, useEffect } from 'react';\n\nimport { useDaily } from './useDaily';\nimport { useDailyEvent } from './useDailyEvent';\nimport { useLocalSessionId } from './useLocalSessionId';\n\ntype AudioLevelCallback = (volume: number) => void;\n\n/**\n * Observes the volume level for a given participant.\n * @param id The session_id of the participant to observe.\n * @param cb The function to execute when the volume changes. Can be used to visualise audio output.\n */\nexport const useAudioLevelObserver = (id: string, cb: AudioLevelCallback) => {\n  const daily = useDaily();\n  const localSessionId = useLocalSessionId();\n  const isLocal = id === localSessionId;\n\n  useDailyEvent(\n    'local-audio-level',\n    useCallback(\n      (ev) => {\n        if (!isLocal) return;\n        cb(ev.audioLevel);\n      },\n      [cb, isLocal]\n    )\n  );\n\n  useDailyEvent(\n    'remote-participants-audio-level',\n    useCallback(\n      (ev) => {\n        if (isLocal) return;\n        cb(ev.participantsAudioLevel[id]);\n      },\n      [cb, id, isLocal]\n    )\n  );\n\n  useEffect(\n    function maybeStartLocalAudioObserver() {\n      if (!daily || daily.isDestroyed() || !isLocal) return;\n      if (daily.isLocalAudioLevelObserverRunning()) return;\n      daily.startLocalAudioLevelObserver();\n    },\n    [daily, isLocal]\n  );\n\n  useEffect(\n    function maybeStartRemoteAudioObserver() {\n      if (!daily || daily.isDestroyed() || isLocal) return;\n      if (daily.isRemoteParticipantsAudioLevelObserverRunning()) return;\n      daily.startRemoteParticipantsAudioLevelObserver();\n    },\n    [daily, isLocal]\n  );\n};\n","import { MediaTrackState, useMediaTrack } from './useMediaTrack';\n\n/**\n * Returns a participant's audio track and state.\n * @param participantId The participant's session_id.\n */\nexport const useAudioTrack = (participantId: string): MediaTrackState =>\n  useMediaTrack(participantId, 'audio');\n","import { useCallInstance } from './useCallInstance';\n\ntype Props = Parameters<typeof useCallInstance>[1];\n\n/**\n * Helper hook to maintain custom callFrame instances in React codebases.\n */\nexport const useCallFrame = (props: Props) =>\n  useCallInstance('callFrame', props);\n","import { DailyCpuLoadStats, DailyEventObject } from '@daily-co/daily-js';\nimport deepEqual from 'fast-deep-equal';\nimport { useCallback, useDebugValue, useEffect } from 'react';\nimport { atom, useRecoilCallback, useRecoilValue } from 'recoil';\n\nimport { useDaily } from './useDaily';\nimport { useDailyEvent } from './useDailyEvent';\nimport { useMeetingState } from './useMeetingState';\n\ninterface CPULoad {\n  state: DailyCpuLoadStats['cpuLoadState'];\n  reason: DailyCpuLoadStats['cpuLoadStateReason'];\n}\n\nconst CPULoadState = atom<CPULoad>({\n  key: 'cpu-load-state',\n  default: {\n    state: 'low',\n    reason: 'none',\n  },\n});\n\ninterface Props {\n  onCPULoadChange?(ev: DailyEventObject<'cpu-load-change'>): void;\n}\n\n/**\n * Returns the current CPU load as reported by daily-js [cpu-load-change](https://docs.daily.co/reference/daily-js/events/quality-events#cpu-load-change) events\n * and [getCpuLoadStats](https://docs.daily.co/reference/daily-js/instance-methods/get-cpu-load-stats).\n */\nexport const useCPULoad = ({ onCPULoadChange }: Props = {}) => {\n  const cpu = useRecoilValue(CPULoadState);\n  const daily = useDaily();\n  const meetingState = useMeetingState();\n\n  const updateCPULoadState = useRecoilCallback(\n    ({ set, snapshot }) =>\n      async (cpu: CPULoad) => {\n        const prev = await snapshot.getPromise(CPULoadState);\n        if (deepEqual(prev, cpu)) return;\n        set(CPULoadState, cpu);\n      },\n    []\n  );\n\n  useEffect(() => {\n    let mounted = true;\n    if (!daily || daily.isDestroyed() || meetingState !== 'joined-meeting')\n      return;\n    daily.getCpuLoadStats().then((stats) => {\n      if (!mounted) return;\n      updateCPULoadState({\n        state: stats.cpuLoadState,\n        reason: stats.cpuLoadStateReason,\n      });\n    });\n    return () => {\n      mounted = false;\n    };\n  }, [daily, meetingState, updateCPULoadState]);\n\n  useDailyEvent(\n    'cpu-load-change',\n    useCallback(\n      (ev) => {\n        updateCPULoadState({\n          state: ev.cpuLoadState,\n          reason: ev.cpuLoadStateReason,\n        });\n        onCPULoadChange?.(ev);\n      },\n      [onCPULoadChange, updateCPULoadState]\n    )\n  );\n\n  useDebugValue(cpu);\n\n  return cpu;\n};\n","import { useDebugValue } from 'react';\nimport { useRecoilValue } from 'recoil';\n\nimport { meetingErrorState, nonFatalErrorState } from '../DailyMeeting';\n\n/**\n * Returns a meeting's last known errors.\n */\nexport const useDailyError = () => {\n  const meetingError = useRecoilValue(meetingErrorState);\n  const nonFatalError = useRecoilValue(nonFatalErrorState);\n  const result = {\n    meetingError,\n    nonFatalError,\n  };\n  useDebugValue(result);\n  return result;\n};\n","import { useCallback, useContext, useDebugValue } from 'react';\nimport { useRecoilValue } from 'recoil';\n\nimport {\n  cameraDevicesState,\n  generalCameraState,\n  generalMicrophoneState,\n  lastCameraErrorState,\n  microphoneDevicesState,\n  speakerDevicesState,\n} from '../DailyDevices';\nimport { DailyDevicesContext } from '../DailyDevicesContext';\nimport { useDaily } from './useDaily';\n\n/**\n * This hook allows access to information about the user's devices and their state.\n */\nexport const useDevices = () => {\n  const daily = useDaily();\n\n  const camState = useRecoilValue(generalCameraState);\n  const micState = useRecoilValue(generalMicrophoneState);\n  const camDevices = useRecoilValue(cameraDevicesState);\n  const micDevices = useRecoilValue(microphoneDevicesState);\n  const speakerDevices = useRecoilValue(speakerDevicesState);\n  const cameraError = useRecoilValue(lastCameraErrorState);\n\n  const { refreshDevices } = useContext(DailyDevicesContext);\n\n  /**\n   * Sets video input device to given deviceId.\n   */\n  const setCamera = useCallback(\n    async (deviceId: string) => {\n      await daily?.setInputDevicesAsync({\n        audioDeviceId: null,\n        videoDeviceId: deviceId,\n      });\n    },\n    [daily]\n  );\n\n  /**\n   * Sets audio input device to given deviceId.\n   */\n  const setMicrophone = useCallback(\n    async (deviceId: string) => {\n      await daily?.setInputDevicesAsync({\n        audioDeviceId: deviceId,\n        videoDeviceId: null,\n      });\n    },\n    [daily]\n  );\n\n  /**\n   * Sets audio output device to given deviceId.\n   */\n  const setSpeaker = useCallback(\n    async (deviceId: string) => {\n      await daily?.setOutputDeviceAsync({\n        outputDeviceId: deviceId,\n      });\n    },\n    [daily]\n  );\n\n  const errorStates: typeof camState[] = [\n    'blocked',\n    'in-use',\n    'not-found',\n    'constraints-invalid',\n    'constraints-none-specified',\n    'undefined-mediadevices',\n    'unknown',\n  ];\n\n  const result = {\n    /**\n     * Most recent error object emitted via [camera-error event](https://docs.daily.co/reference/daily-js/events/meeting-events#camera-error).\n     */\n    cameraError,\n    /**\n     * A list of the user's camera (videoinput) devices. See [MediaDeviceInfo](https://developer.mozilla.org/en-US/docs/Web/API/MediaDeviceInfo) for more info.\n     */\n    cameras: camDevices,\n    /**\n     * The general state for camera access.\n     */\n    camState,\n    /**\n     * Holds the currently selected camera.\n     */\n    currentCam: camDevices.find((cam) => cam.selected),\n    /**\n     * Holds the currently selected microphone.\n     */\n    currentMic: micDevices.find((mic) => mic.selected),\n    /**\n     * Holds the currently selected speaker.\n     */\n    currentSpeaker: speakerDevices.find((speaker) => speaker.selected),\n    /**\n     * Indicates that there's an issue with camera devices.\n     */\n    hasCamError: errorStates.includes(camState),\n    /**\n     * Indicates that there's an issue with microphone devices.\n     */\n    hasMicError: errorStates.includes(micState),\n    /**\n     * A list of the user's microphone (audioinput) devices. See [MediaDeviceInfo](https://developer.mozilla.org/en-US/docs/Web/API/MediaDeviceInfo) for more info.\n     */\n    microphones: micDevices,\n    /**\n     * The general state for microphone access.\n     */\n    micState,\n    /**\n     * Refreshes the list of devices using [enumerateDevices](https://docs.daily.co/reference/daily-js/instance-methods/enumerate-devices).\n     */\n    refreshDevices,\n    /**\n     * Allows to switch to the camera with the specified deviceId. Calls [setInputDevicesAsync](https://docs.daily.co/reference/daily-js/instance-methods/set-input-devices-async) internally.\n     */\n    setCamera,\n    /**\n     * Allows to switch to the microphone with the specified deviceId. Calls [setInputDevicesAsync](https://docs.daily.co/reference/daily-js/instance-methods/set-input-devices-async) internally.\n     */\n    setMicrophone,\n    /**\n     * Allows to switch to the speaker with the specified deviceId. Calls [setOutputDevice](https://docs.daily.co/reference/daily-js/instance-methods/set-output-device) internally.\n     */\n    setSpeaker,\n    /**\n     * A list of the user's speaker (audiooutput) devices. See [MediaDeviceInfo](https://developer.mozilla.org/en-US/docs/Web/API/MediaDeviceInfo) for more info.\n     */\n    speakers: speakerDevices,\n  };\n\n  useDebugValue(result);\n\n  return result;\n};\n","import {\n  DailyCall,\n  DailyEventObject,\n  DailyEventObjectNonFatalError,\n  DailyInputSettings,\n} from '@daily-co/daily-js';\nimport { useCallback, useDebugValue, useEffect } from 'react';\nimport { atom, useRecoilCallback, useRecoilValue } from 'recoil';\n\nimport { RECOIL_PREFIX } from '../lib/constants';\nimport { Reconstruct } from '../types/Reconstruct';\nimport { useDaily } from './useDaily';\nimport { useDailyError } from './useDailyError';\nimport { useDailyEvent } from './useDailyEvent';\n\ntype DailyEventObjectInputSettingsError = Reconstruct<\n  DailyEventObjectNonFatalError,\n  'type',\n  'input-settings-error'\n>;\n\ninterface UseInputSettingsArgs {\n  onError?(ev: DailyEventObjectInputSettingsError): void;\n  onInputSettingsUpdated?(ev: DailyEventObject<'input-settings-updated'>): void;\n}\n\nconst inputSettingsState = atom<DailyInputSettings | null>({\n  key: RECOIL_PREFIX + 'input-settings',\n  default: null,\n});\n\nexport const useInputSettings = ({\n  onError,\n  onInputSettingsUpdated,\n}: UseInputSettingsArgs = {}) => {\n  const inputSettings = useRecoilValue(inputSettingsState);\n  const { nonFatalError } = useDailyError();\n  const daily = useDaily();\n\n  const updateInputSettingsState = useRecoilCallback(\n    ({ set }) =>\n      (inputSettings: DailyInputSettings) => {\n        set(inputSettingsState, inputSettings);\n      },\n    []\n  );\n\n  useEffect(() => {\n    if (!daily) return;\n    daily.getInputSettings().then(updateInputSettingsState);\n  }, [daily, updateInputSettingsState]);\n\n  /**\n   * Handle 'input-settings-updated' events.\n   */\n  useDailyEvent(\n    'input-settings-updated',\n    useCallback(\n      (ev) => {\n        updateInputSettingsState(ev.inputSettings);\n        onInputSettingsUpdated?.(ev);\n      },\n      [onInputSettingsUpdated, updateInputSettingsState]\n    )\n  );\n\n  /**\n   * Handle nonfatal errors of type 'input-settings-error'.\n   */\n  useDailyEvent(\n    'nonfatal-error',\n    useCallback(\n      (ev) => {\n        if (ev.type !== 'input-settings-error') return;\n        onError?.(ev as DailyEventObjectInputSettingsError);\n      },\n      [onError]\n    )\n  );\n\n  /**\n   * Calls daily.updateInputSettings internally.\n   */\n  const updateInputSettings = useCallback(\n    (...args: Parameters<DailyCall['updateInputSettings']>) => {\n      return daily?.updateInputSettings(...args);\n    },\n    [daily]\n  );\n\n  const result = {\n    errorMsg:\n      nonFatalError?.type === 'input-settings-error'\n        ? nonFatalError.errorMsg\n        : null,\n    inputSettings,\n    updateInputSettings,\n  };\n\n  useDebugValue(result);\n\n  return result;\n};\n","import {\n  DailyCall,\n  DailyEventObject,\n  DailyEventObjectNonFatalError,\n} from '@daily-co/daily-js';\nimport { useCallback, useDebugValue } from 'react';\nimport { useRecoilValue } from 'recoil';\n\nimport { liveStreamingState } from '../DailyLiveStreaming';\nimport { Reconstruct } from '../types/Reconstruct';\nimport { useDaily } from './useDaily';\nimport { useDailyEvent } from './useDailyEvent';\n\ntype DailyEventObjectLiveStreamingWarning = Reconstruct<\n  DailyEventObjectNonFatalError,\n  'type',\n  'live-streaming-warning'\n>;\n\ninterface UseLiveStreamingArgs {\n  onLiveStreamingStarted?(ev: DailyEventObject<'live-streaming-started'>): void;\n  onLiveStreamingStopped?(ev: DailyEventObject<'live-streaming-stopped'>): void;\n  onLiveStreamingUpdated?(ev: DailyEventObject<'live-streaming-updated'>): void;\n  onLiveStreamingError?(ev: DailyEventObject<'live-streaming-error'>): void;\n  onLiveStreamingWarning?(ev: DailyEventObjectLiveStreamingWarning): void;\n}\n\n/**\n * This hook allows to setup [live streaming events](https://docs.daily.co/reference/daily-js/events/live-streaming-events),\n * as well as starting, stopping and updating live streams.\n *\n * Returns the current live streaming state, incl. the current layout and potential errorMsg.\n */\nexport const useLiveStreaming = ({\n  onLiveStreamingError,\n  onLiveStreamingStarted,\n  onLiveStreamingStopped,\n  onLiveStreamingUpdated,\n  onLiveStreamingWarning,\n}: UseLiveStreamingArgs = {}) => {\n  const daily = useDaily();\n  const state = useRecoilValue(liveStreamingState);\n\n  useDailyEvent(\n    'live-streaming-started',\n    useCallback(\n      (ev) => {\n        onLiveStreamingStarted?.(ev);\n      },\n      [onLiveStreamingStarted]\n    )\n  );\n  useDailyEvent(\n    'live-streaming-stopped',\n    useCallback(\n      (ev) => {\n        onLiveStreamingStopped?.(ev);\n      },\n      [onLiveStreamingStopped]\n    )\n  );\n  useDailyEvent(\n    'live-streaming-updated',\n    useCallback(\n      (ev) => {\n        onLiveStreamingUpdated?.(ev);\n      },\n      [onLiveStreamingUpdated]\n    )\n  );\n  useDailyEvent(\n    'live-streaming-error',\n    useCallback(\n      (ev) => {\n        onLiveStreamingError?.(ev);\n      },\n      [onLiveStreamingError]\n    )\n  );\n  useDailyEvent(\n    'nonfatal-error',\n    useCallback(\n      (ev) => {\n        if (ev.type !== 'live-streaming-warning') return;\n        onLiveStreamingWarning?.(ev as DailyEventObjectLiveStreamingWarning);\n      },\n      [onLiveStreamingWarning]\n    )\n  );\n\n  const startLiveStreaming = useCallback(\n    (...args: Parameters<DailyCall['startLiveStreaming']>) => {\n      if (!daily) return;\n      daily.startLiveStreaming(...args);\n    },\n    [daily]\n  );\n\n  const stopLiveStreaming = useCallback(\n    (...args: Parameters<DailyCall['stopLiveStreaming']>) => {\n      if (!daily) return;\n      daily.stopLiveStreaming(...args);\n    },\n    [daily]\n  );\n\n  const updateLiveStreaming = useCallback(\n    (...args: Parameters<DailyCall['updateLiveStreaming']>) => {\n      if (!daily) return;\n      daily.updateLiveStreaming(...args);\n    },\n    [daily]\n  );\n\n  const result = {\n    ...state,\n    startLiveStreaming,\n    stopLiveStreaming,\n    updateLiveStreaming,\n  };\n\n  useDebugValue(result);\n\n  return result;\n};\n","import { useDebugValue } from 'react';\nimport { useRecoilValue } from 'recoil';\n\nimport { localIdState } from '../DailyParticipants';\nimport { useParticipant } from './useParticipant';\n\n/**\n * Returns the [participants() object](https://docs.daily.co/reference/daily-js/instance-methods/participants) for the local user.\n * @deprecated Use [useLocalSessionId](https://docs.daily.co/reference/daily-react/use-local-session-id) instead.\n */\nexport const useLocalParticipant = (): ReturnType<typeof useParticipant> => {\n  const localId = useRecoilValue(localIdState);\n  const localParticipant = useParticipant(localId);\n  useDebugValue(localParticipant);\n  return localParticipant;\n};\n","import { DailyEventObjectNonFatalError } from '@daily-co/daily-js';\nimport { useCallback, useDebugValue } from 'react';\nimport { useRecoilValue } from 'recoil';\n\nimport { meetingSessionDataState } from '../DailyMeeting';\nimport { Reconstruct } from '../types/Reconstruct';\nimport { useDailyEvent } from './useDailyEvent';\n\ntype DailyEventObjectMeetingSessionDataError = Reconstruct<\n  DailyEventObjectNonFatalError,\n  'type',\n  'meeting-session-data-error'\n>;\n\ninterface Props {\n  onError?(ev: DailyEventObjectMeetingSessionDataError): void;\n}\n\n/**\n * Returns a meeting's current session data and topology.\n */\nexport const useMeetingSessionState = <T = any>({ onError }: Props = {}) => {\n  const meetingSessionState = useRecoilValue(meetingSessionDataState);\n\n  useDailyEvent(\n    'nonfatal-error',\n    useCallback(\n      (ev) => {\n        if (ev.type !== 'meeting-session-data-error') return;\n        onError?.(ev as DailyEventObjectMeetingSessionDataError);\n      },\n      [onError]\n    )\n  );\n\n  const result = {\n    data: meetingSessionState?.data as T,\n    topology: meetingSessionState?.topology,\n  };\n\n  useDebugValue(result);\n\n  return result;\n};\n","import { DailyEventObject } from '@daily-co/daily-js';\nimport { useCallback, useDebugValue } from 'react';\nimport { useRecoilValue } from 'recoil';\n\nimport {\n  networkQualityState,\n  networkThresholdState,\n  topologyState,\n} from '../DailyNetwork';\nimport { useDaily } from './useDaily';\nimport { useDailyEvent } from './useDailyEvent';\n\ninterface UseNetworkArgs {\n  onNetworkConnection?(ev: DailyEventObject<'network-connection'>): void;\n  onNetworkQualityChange?(ev: DailyEventObject<'network-quality-change'>): void;\n}\n\n/**\n * Returns current information about network quality and topology.\n * Allows to setup event listeners for daily's [network events](https://docs.daily.co/reference/daily-js/events/network-events).\n */\nexport const useNetwork = ({\n  onNetworkConnection,\n  onNetworkQualityChange,\n}: UseNetworkArgs = {}) => {\n  const daily = useDaily();\n\n  const topology = useRecoilValue(topologyState);\n  const quality = useRecoilValue(networkQualityState);\n  const threshold = useRecoilValue(networkThresholdState);\n\n  useDailyEvent(\n    'network-connection',\n    useCallback(\n      (ev) => {\n        onNetworkConnection?.(ev);\n      },\n      [onNetworkConnection]\n    )\n  );\n  useDailyEvent(\n    'network-quality-change',\n    useCallback(\n      (ev) => {\n        onNetworkQualityChange?.(ev);\n      },\n      [onNetworkQualityChange]\n    )\n  );\n\n  const getStats = useCallback(async () => {\n    const newStats = await daily?.getNetworkStats();\n    return newStats?.stats;\n  }, [daily]);\n\n  const result = {\n    getStats,\n    quality,\n    threshold,\n    topology,\n  };\n\n  useDebugValue(result);\n\n  return result;\n};\n","import { DailyEventObject, DailyParticipantCounts } from '@daily-co/daily-js';\nimport { useCallback, useDebugValue, useEffect } from 'react';\nimport { atom, useRecoilCallback, useRecoilValue } from 'recoil';\n\nimport { RECOIL_PREFIX } from '../lib/constants';\nimport { useDaily } from './useDaily';\nimport { useDailyEvent } from './useDailyEvent';\n\nconst participantCountsState = atom<DailyParticipantCounts>({\n  key: RECOIL_PREFIX + 'participant-counts',\n  default: {\n    hidden: 0,\n    present: 0,\n  },\n});\n\ninterface Props {\n  onParticipantCountsUpdated?(\n    ev: DailyEventObject<'participant-counts-updated'>\n  ): void;\n}\n\n/**\n * Returns participant counts for hidden and present participants.\n */\nexport const useParticipantCounts = ({\n  onParticipantCountsUpdated,\n}: Props = {}) => {\n  const daily = useDaily();\n  const participantCounts = useRecoilValue(participantCountsState);\n\n  const updateCounts = useRecoilCallback(\n    ({ set }) =>\n      (counts: DailyParticipantCounts) => {\n        set(participantCountsState, counts);\n      },\n    []\n  );\n\n  useDailyEvent(\n    'participant-counts-updated',\n    useCallback(\n      (ev) => {\n        updateCounts(ev.participantCounts);\n        onParticipantCountsUpdated?.(ev);\n      },\n      [onParticipantCountsUpdated, updateCounts]\n    )\n  );\n\n  useEffect(() => {\n    if (!daily || daily.isDestroyed()) return;\n    updateCounts(daily.participantCounts());\n  }, [daily, updateCounts]);\n\n  useDebugValue(participantCounts);\n\n  return participantCounts;\n};\n","import { useDebugValue } from 'react';\n\nimport { useLocalSessionId } from './useLocalSessionId';\nimport { useParticipantProperty } from './useParticipantProperty';\n\n/**\n * Returns parsed permissions for a given participant.\n * In case no `sessionId` is passed, the hook returns permissions for the local participant.\n * @param sessionId The participant's session_id (optional)\n */\nexport const usePermissions = (sessionId?: string) => {\n  const localSessionId = useLocalSessionId();\n  const permissions = useParticipantProperty(\n    sessionId ?? localSessionId,\n    'permissions'\n  );\n\n  const canSendAudio =\n    typeof permissions?.canSend === 'boolean'\n      ? permissions?.canSend\n      : Boolean(permissions?.canSend?.has('audio'));\n  const canSendVideo =\n    typeof permissions?.canSend === 'boolean'\n      ? permissions?.canSend\n      : Boolean(permissions?.canSend?.has('video'));\n  const canSendCustomAudio =\n    typeof permissions?.canSend === 'boolean'\n      ? permissions?.canSend\n      : Boolean(permissions?.canSend?.has('customAudio'));\n  const canSendCustomVideo =\n    typeof permissions?.canSend === 'boolean'\n      ? permissions?.canSend\n      : Boolean(permissions?.canSend?.has('customVideo'));\n  const canSendScreenAudio =\n    typeof permissions?.canSend === 'boolean'\n      ? permissions?.canSend\n      : Boolean(permissions?.canSend?.has('screenAudio'));\n  const canSendScreenVideo =\n    typeof permissions?.canSend === 'boolean'\n      ? permissions?.canSend\n      : Boolean(permissions?.canSend?.has('screenVideo'));\n  const canAdminParticipants =\n    typeof permissions?.canAdmin === 'boolean'\n      ? permissions?.canAdmin\n      : Boolean(permissions?.canAdmin?.has('participants'));\n  const canAdminStreaming =\n    typeof permissions?.canAdmin === 'boolean'\n      ? permissions?.canAdmin\n      : Boolean(permissions?.canAdmin?.has('streaming'));\n  const canAdminTranscription =\n    typeof permissions?.canAdmin === 'boolean'\n      ? permissions?.canAdmin\n      : Boolean(permissions?.canAdmin?.has('transcription'));\n\n  const result = {\n    canAdminParticipants,\n    canAdminStreaming,\n    canAdminTranscription,\n    canSendAudio,\n    canSendCustomAudio,\n    canSendCustomVideo,\n    canSendScreenAudio,\n    canSendScreenVideo,\n    canSendVideo,\n    hasPresence: permissions?.hasPresence,\n    permissions,\n  };\n\n  useDebugValue(result);\n\n  return result;\n};\n","import {\n  DailyCall,\n  DailyEventObject,\n  DailyReceiveSettings,\n  DailySingleParticipantReceiveSettings,\n} from '@daily-co/daily-js';\nimport { useCallback, useDebugValue, useEffect } from 'react';\nimport { atomFamily, useRecoilCallback, useRecoilValue } from 'recoil';\n\nimport { RECOIL_PREFIX } from '../lib/constants';\nimport { useDaily } from './useDaily';\nimport { useDailyEvent } from './useDailyEvent';\nimport { useMeetingState } from './useMeetingState';\n\nconst participantReceiveSettingsState = atomFamily<\n  DailySingleParticipantReceiveSettings,\n  string\n>({\n  key: RECOIL_PREFIX + 'participant-receive-settings',\n  default: {},\n});\n\ninterface UseReceiveSettingsArgs {\n  id?: string;\n  onReceiveSettingsUpdated?(\n    ev: DailyEventObject<'receive-settings-updated'>\n  ): void;\n}\n\n/**\n * Allows to read and set receiveSettings.\n * In case receiveSettings for participant specified by id are empty, not set or 'inherit',\n * base receiveSettings will be returned.\n * In case meeting is not in joined state, calls to updateReceiveSettings will be silently ignored.\n */\nexport const useReceiveSettings = ({\n  id = 'base',\n  onReceiveSettingsUpdated,\n}: UseReceiveSettingsArgs = {}) => {\n  const baseSettings = useRecoilValue(participantReceiveSettingsState('base'));\n  const receiveSettings = useRecoilValue(participantReceiveSettingsState(id));\n  const daily = useDaily();\n  const meetingState = useMeetingState();\n\n  const updateReceiveSettingsState = useRecoilCallback(\n    ({ transact_UNSTABLE }) =>\n      (receiveSettings: DailyReceiveSettings) => {\n        transact_UNSTABLE(({ reset, set }) => {\n          const { ...ids } = receiveSettings;\n          for (let [id, settings] of Object.entries(ids)) {\n            set(participantReceiveSettingsState(id), settings);\n          }\n          if (!(id in ids)) {\n            reset(participantReceiveSettingsState(id));\n          }\n        });\n      },\n    [id]\n  );\n  useDailyEvent(\n    'receive-settings-updated',\n    useCallback(\n      (ev) => {\n        updateReceiveSettingsState(ev.receiveSettings);\n        onReceiveSettingsUpdated?.(ev);\n      },\n      [onReceiveSettingsUpdated, updateReceiveSettingsState]\n    )\n  );\n\n  useEffect(() => {\n    if (!daily || daily.isDestroyed()) return;\n    daily.getReceiveSettings().then(updateReceiveSettingsState);\n  }, [daily, updateReceiveSettingsState]);\n\n  const updateReceiveSettings = useCallback(\n    (...args: Parameters<DailyCall['updateReceiveSettings']>) => {\n      if (!daily || meetingState !== 'joined-meeting') return;\n      daily?.updateReceiveSettings?.(...args);\n    },\n    [daily, meetingState]\n  );\n\n  const result = {\n    receiveSettings:\n      id === 'base' || Object.keys(receiveSettings).length === 0\n        ? baseSettings\n        : receiveSettings,\n    updateReceiveSettings,\n  };\n\n  useDebugValue(result);\n\n  return result;\n};\n","import { DailyCall, DailyEventObject } from '@daily-co/daily-js';\nimport { useCallback, useDebugValue } from 'react';\nimport { useRecoilValue } from 'recoil';\n\nimport { recordingState } from '../DailyRecordings';\nimport { useDaily } from './useDaily';\nimport { useDailyEvent } from './useDailyEvent';\n\ninterface UseRecordingArgs {\n  onRecordingData?(ev: DailyEventObject<'recording-data'>): void;\n  onRecordingError?(ev: DailyEventObject<'recording-error'>): void;\n  onRecordingStarted?(ev: DailyEventObject<'recording-started'>): void;\n  onRecordingStopped?(ev: DailyEventObject<'recording-stopped'>): void;\n}\n\nexport const useRecording = ({\n  onRecordingData,\n  onRecordingError,\n  onRecordingStarted,\n  onRecordingStopped,\n}: UseRecordingArgs = {}) => {\n  const daily = useDaily();\n  const state = useRecoilValue(recordingState);\n\n  useDailyEvent(\n    'recording-started',\n    useCallback(\n      (ev) => {\n        onRecordingStarted?.(ev);\n      },\n      [onRecordingStarted]\n    )\n  );\n  useDailyEvent(\n    'recording-stopped',\n    useCallback(\n      (ev) => {\n        onRecordingStopped?.(ev);\n      },\n      [onRecordingStopped]\n    )\n  );\n  useDailyEvent(\n    'recording-error',\n    useCallback(\n      (ev) => {\n        onRecordingError?.(ev);\n      },\n      [onRecordingError]\n    )\n  );\n  useDailyEvent(\n    'recording-data',\n    useCallback(\n      (ev) => {\n        onRecordingData?.(ev);\n      },\n      [onRecordingData]\n    )\n  );\n\n  /**\n   * Starts the recording with the given optional options.\n   */\n  const startRecording = useCallback(\n    (...args: Parameters<DailyCall['startRecording']>) => {\n      if (!daily) return;\n      daily.startRecording(...args);\n    },\n    [daily]\n  );\n\n  /**\n   * Stops a recording.\n   */\n  const stopRecording = useCallback(\n    (...args: Parameters<DailyCall['stopRecording']>) => {\n      if (!daily) return;\n      daily.stopRecording(...args);\n    },\n    [daily]\n  );\n\n  /**\n   * Updates a running recording's layout configuration.\n   */\n  const updateRecording = useCallback(\n    (...args: Parameters<DailyCall['updateRecording']>) => {\n      if (!daily) return;\n      daily.updateRecording(...args);\n    },\n    [daily]\n  );\n\n  const result = {\n    ...state,\n    startRecording,\n    stopRecording,\n    updateRecording,\n  };\n\n  useDebugValue(result);\n\n  return result;\n};\n","import { DailyRoomInfo } from '@daily-co/daily-js';\nimport { useDebugValue } from 'react';\nimport { useRecoilValue } from 'recoil';\n\nimport { roomState } from '../DailyRoom';\n\n/**\n * Stateful hook to work with room, domain and token configuration for a daily room.\n * Includes room default values.\n */\nexport const useRoom = (): DailyRoomInfo | null => {\n  const room = useRecoilValue(roomState);\n  useDebugValue(room);\n  return room;\n};\n","import { useDebugValue, useEffect, useState } from 'react';\nimport { useRecoilValue } from 'recoil';\n\nimport { localJoinDateState } from '../DailyParticipants';\nimport { useRoom } from './useRoom';\n\ninterface Countdown {\n  hours: number;\n  minutes: number;\n  seconds: number;\n}\n\ninterface Props {\n  onCountdown?(countdown: Countdown): void;\n}\n\nexport const useRoomExp = ({ onCountdown }: Props = {}) => {\n  const localJoinDate = useRecoilValue(localJoinDateState);\n  const room = useRoom();\n\n  const [ejectDate, setEjectDate] = useState<Date | null>(null);\n\n  useEffect(() => {\n    const ejectAfterElapsed =\n      room?.tokenConfig?.eject_after_elapsed ??\n      room?.config?.eject_after_elapsed ??\n      0;\n    const expUTCTimeStamp = room?.tokenConfig?.exp ?? room?.config?.exp ?? 0;\n    const ejectAtExp =\n      room?.tokenConfig?.eject_at_token_exp ??\n      room?.config?.eject_at_room_exp ??\n      false;\n\n    let newEjectDate: Date = new Date(0);\n\n    if (ejectAfterElapsed && localJoinDate) {\n      newEjectDate = new Date(\n        localJoinDate.getTime() + 1000 * ejectAfterElapsed\n      );\n    }\n\n    if (ejectAtExp && expUTCTimeStamp) {\n      const expDate = new Date(expUTCTimeStamp * 1000);\n      if (\n        !newEjectDate.getTime() ||\n        (newEjectDate.getTime() > 0 && expDate < newEjectDate)\n      )\n        newEjectDate = expDate;\n    }\n\n    if (newEjectDate.getTime() === 0) return;\n\n    setEjectDate((oldEjectDate) =>\n      oldEjectDate?.getTime() !== newEjectDate.getTime()\n        ? newEjectDate\n        : oldEjectDate\n    );\n  }, [\n    localJoinDate,\n    room?.config?.eject_after_elapsed,\n    room?.config?.eject_at_room_exp,\n    room?.config?.exp,\n    room?.tokenConfig?.eject_after_elapsed,\n    room?.tokenConfig?.eject_at_token_exp,\n    room?.tokenConfig?.exp,\n  ]);\n\n  useEffect(() => {\n    if (!ejectDate || ejectDate.getTime() === 0) return;\n\n    const interval = setInterval(() => {\n      const eject = (ejectDate?.getTime() ?? 0) / 1000;\n      const now = Date.now() / 1000;\n      const diff = eject - now;\n      if (diff < 0) return;\n      const hours = Math.max(0, Math.floor(diff / 3600));\n      const minutes = Math.max(0, Math.floor((diff % 3600) / 60));\n      const seconds = Math.max(0, Math.floor(diff % 60));\n      onCountdown?.({\n        hours,\n        minutes,\n        seconds,\n      });\n    }, 1000);\n    return () => {\n      clearInterval(interval);\n    };\n  }, [ejectDate, onCountdown]);\n\n  const result = {\n    ejectDate,\n  };\n\n  useDebugValue(result);\n\n  return result;\n};\n","import { MediaTrackState, useMediaTrack } from './useMediaTrack';\n\n/**\n * Returns a participant's screenAudio track and state.\n * @param participantId The participant's session_id.\n */\nexport const useScreenAudioTrack = (participantId: string): MediaTrackState =>\n  useMediaTrack(participantId, 'screenAudio');\n","import { MediaTrackState, useMediaTrack } from './useMediaTrack';\n\n/**\n * Returns a participant's screenVideo track and state.\n * @param participantId The participant's session_id.\n */\nexport const useScreenVideoTrack = (participantId: string): MediaTrackState =>\n  useMediaTrack(participantId, 'screenVideo');\n","import {\n  DailyCall,\n  DailyEventObject,\n  DailySendSettings,\n} from '@daily-co/daily-js';\nimport { useCallback, useDebugValue, useEffect } from 'react';\nimport { atom, useRecoilCallback, useRecoilValue } from 'recoil';\n\nimport { RECOIL_PREFIX } from '../lib/constants';\nimport { useDaily } from './useDaily';\nimport { useDailyEvent } from './useDailyEvent';\n\nconst sendSettingsState = atom<DailySendSettings | null>({\n  key: RECOIL_PREFIX + 'send-settings',\n  default: null,\n});\n\ninterface Props {\n  onSendSettingsUpdated?(ev: DailyEventObject<'send-settings-updated'>): void;\n}\n\n/**\n * Returns the current media send settings and an updater function to change the settings.\n */\nexport const useSendSettings = ({ onSendSettingsUpdated }: Props = {}) => {\n  const daily = useDaily();\n  const sendSettings = useRecoilValue(sendSettingsState);\n\n  useDailyEvent(\n    'send-settings-updated',\n    useRecoilCallback(\n      ({ set }) =>\n        (ev) => {\n          set(sendSettingsState, ev.sendSettings);\n          onSendSettingsUpdated?.(ev);\n        },\n      [onSendSettingsUpdated]\n    )\n  );\n\n  const storeSendSettings = useRecoilCallback(\n    ({ set }) =>\n      (sendSettings: DailySendSettings | null) => {\n        set(sendSettingsState, sendSettings);\n      },\n    []\n  );\n\n  useEffect(() => {\n    if (!daily || daily.isDestroyed()) return;\n    storeSendSettings(daily.getSendSettings());\n  }, [daily, storeSendSettings]);\n\n  /**\n   * Updates the local clients send settings.\n   * See https://docs.daily.co/reference/daily-js/instance-methods/update-send-settings for details.\n   */\n  const updateSendSettings = useCallback(\n    async (...args: Parameters<DailyCall['updateSendSettings']>) => {\n      const newSendSettings = await daily?.updateSendSettings(...args);\n      if (!newSendSettings) return;\n      storeSendSettings(newSendSettings);\n      return newSendSettings;\n    },\n    [daily, storeSendSettings]\n  );\n\n  const result = {\n    sendSettings,\n    updateSendSettings,\n  };\n\n  useDebugValue(result);\n\n  return result;\n};\n","import {\n  DailyCall,\n  DailyEventObject,\n  DailyEventObjectAppMessage,\n} from '@daily-co/daily-js';\nimport { useCallback, useDebugValue } from 'react';\nimport { useRecoilValue } from 'recoil';\n\nimport { Transcription, transcriptionState } from '../DailyTranscriptions';\nimport { useDaily } from './useDaily';\nimport { useDailyEvent } from './useDailyEvent';\n\ninterface UseTranscriptionArgs {\n  onTranscriptionStarted?(ev: DailyEventObject<'transcription-started'>): void;\n  onTranscriptionStopped?(ev: DailyEventObject<'transcription-stopped'>): void;\n  onTranscriptionError?(ev: DailyEventObject<'transcription-error'>): void;\n  /**\n   * @deprecated Please use onTranscriptionMessage instead.\n   */\n  onTranscriptionAppData?(ev: DailyEventObjectAppMessage<Transcription>): void;\n  onTranscriptionMessage?(ev: DailyEventObject<'transcription-message'>): void;\n}\n\nexport const useTranscription = ({\n  onTranscriptionAppData,\n  onTranscriptionError,\n  onTranscriptionMessage,\n  onTranscriptionStarted,\n  onTranscriptionStopped,\n}: UseTranscriptionArgs = {}) => {\n  const daily = useDaily();\n\n  const state = useRecoilValue(transcriptionState);\n\n  useDailyEvent(\n    'transcription-started',\n    useCallback(\n      (ev) => {\n        onTranscriptionStarted?.(ev);\n      },\n      [onTranscriptionStarted]\n    )\n  );\n  useDailyEvent(\n    'transcription-stopped',\n    useCallback(\n      (ev) => {\n        onTranscriptionStopped?.(ev);\n      },\n      [onTranscriptionStopped]\n    )\n  );\n  useDailyEvent(\n    'transcription-error',\n    useCallback(\n      (ev) => {\n        onTranscriptionError?.(ev);\n      },\n      [onTranscriptionError]\n    )\n  );\n  useDailyEvent(\n    'transcription-message',\n    useCallback(\n      (ev) => {\n        onTranscriptionMessage?.(ev);\n      },\n      [onTranscriptionMessage]\n    )\n  );\n  useDailyEvent(\n    'app-message',\n    useCallback(\n      (ev: DailyEventObjectAppMessage<Transcription>) => {\n        if (ev?.fromId === 'transcription') {\n          onTranscriptionAppData?.(ev);\n        }\n      },\n      [onTranscriptionAppData]\n    )\n  );\n\n  /**\n   * Starts the transcription with the given optional options.\n   */\n  const startTranscription = useCallback(\n    (...args: Parameters<DailyCall['startTranscription']>) => {\n      if (!daily) return;\n      daily.startTranscription(...args);\n    },\n    [daily]\n  );\n\n  /**\n   * Stops a transcription.\n   */\n  const stopTranscription = useCallback(\n    (...args: Parameters<DailyCall['stopTranscription']>) => {\n      if (!daily) return;\n      daily.stopTranscription(...args);\n    },\n    [daily]\n  );\n\n  const result = {\n    ...state,\n    startTranscription,\n    stopTranscription,\n  };\n\n  useDebugValue(result);\n\n  return result;\n};\n","import { MediaTrackState, useMediaTrack } from './useMediaTrack';\n\n/**\n * Returns a participant's video track and state.\n * @param participantId The participant's session_id.\n */\nexport const useVideoTrack = (participantId: string): MediaTrackState =>\n  useMediaTrack(participantId, 'video');\n","import { DailyEventObject } from '@daily-co/daily-js';\nimport { useCallback, useDebugValue } from 'react';\nimport { useRecoilValue } from 'recoil';\n\nimport { allWaitingParticipantsSelector } from '../DailyParticipants';\nimport { useDaily } from './useDaily';\nimport { useDailyEvent } from './useDailyEvent';\n\ninterface UseWaitingParticipantsArgs {\n  onWaitingParticipantAdded?(\n    ev: DailyEventObject<'waiting-participant-added'>\n  ): void;\n  onWaitingParticipantUpdated?(\n    ev: DailyEventObject<'waiting-participant-updated'>\n  ): void;\n  onWaitingParticipantRemoved?(\n    ev: DailyEventObject<'waiting-participant-removed'>\n  ): void;\n}\n\n/**\n * Hook to access and manage waiting participants.\n */\nexport const useWaitingParticipants = ({\n  onWaitingParticipantAdded,\n  onWaitingParticipantRemoved,\n  onWaitingParticipantUpdated,\n}: UseWaitingParticipantsArgs = {}) => {\n  const daily = useDaily();\n\n  const waitingParticipants = useRecoilValue(allWaitingParticipantsSelector);\n\n  useDailyEvent(\n    'waiting-participant-added',\n    useCallback(\n      (ev) => {\n        onWaitingParticipantAdded?.(ev);\n      },\n      [onWaitingParticipantAdded]\n    )\n  );\n  useDailyEvent(\n    'waiting-participant-removed',\n    useCallback(\n      (ev) => {\n        onWaitingParticipantRemoved?.(ev);\n      },\n      [onWaitingParticipantRemoved]\n    )\n  );\n  useDailyEvent(\n    'waiting-participant-updated',\n    useCallback(\n      (ev) => {\n        onWaitingParticipantUpdated?.(ev);\n      },\n      [onWaitingParticipantUpdated]\n    )\n  );\n\n  const updateWaitingParticipantAccess = useCallback(\n    (id: '*' | string, grantRequestedAccess: boolean) => {\n      if (id === '*') {\n        daily?.updateWaitingParticipants({\n          '*': {\n            grantRequestedAccess,\n          },\n        });\n        return;\n      }\n      daily?.updateWaitingParticipant(id, {\n        grantRequestedAccess,\n      });\n    },\n    [daily]\n  );\n\n  const grantAccess = useCallback(\n    (id: '*' | string) => {\n      updateWaitingParticipantAccess(id, true);\n    },\n    [updateWaitingParticipantAccess]\n  );\n\n  const denyAccess = useCallback(\n    (id: '*' | string) => {\n      updateWaitingParticipantAccess(id, false);\n    },\n    [updateWaitingParticipantAccess]\n  );\n\n  const result = {\n    waitingParticipants,\n    grantAccess,\n    denyAccess,\n  };\n\n  useDebugValue(result);\n\n  return result;\n};\n"],"names":["DailyContext","createContext","useDaily","daily","useContext","useDebugValue","DailyEventContext","on","off","priorityCounter","getPriorityUnique","uniqueCounter","getUnique","useDailyEvent","ev","callback","INTERNAL_priority","_useContext","_useState","useState","isBlocked","setIsBlocked","reassignCount","useRef","eventId","useMemo","useEffect","current","console","error","timeout","setTimeout","clearTimeout","event","RECOIL_PREFIX","participantPropertyPathsState","atomFamily","key","participantPropertyState","dangerouslyAllowMutability","participantPropertiesState","selectorFamily","get","_ref","id","properties","_ref2","map","path","property","useParticipantProperty","participantId","propertyPaths","useRecoilValue","Array","isArray","reduce","o","i","_ref3","useThrottledDailyEvent","throttleTimeout","r","e","throttledEvents","useCallback","length","emitEvents","throttle","trailing","addEvent","push","forEach","customDeepEqual","a","b","MediaStream","active","getTracks","every","track","idx","MediaStreamTrack","kind","readyState","Date","getTime","RegExp","source","flags","Set","size","_iterator","_createForOfIteratorHelperLoose","values","_step","done","value","has","Map","_iterator2","entries","_step2","_step2$value","keysA","Object","keys","keysB","_i","_keysA","equalSelector","options","inner","selector","prior","latest","equals","equalSelectorFamily","priorValues","_extends","param","set","getPaths","currentPath","visited","add","paths","prototype","hasOwnProperty","call","newPath","apply","concat","getParticipantPaths","p","resolvePath","participant","String","split","filter","resolveParticipantPaths","activeIdState","atom","localIdState","localJoinDateState","participantIdsState","participantState","waitingParticipantsState","waitingParticipantState","awaitingAccess","level","name","allWaitingParticipantsSelector","ids","DailyParticipants","children","initialized","setInitialized","initParticipants","useRecoilCallback","_ref4","transact_UNSTABLE","participants","_ref5","local","session_id","participantsArray","_resolveParticipantPa","interval","setInterval","clearInterval","handleInitEvent","_ref6","handleCleanup","_ref7","reset","snapshot","_asyncToGenerator","getPromise","_ref9","evts","_ref10","action","activeSpeaker","peerId","prev","last_active","prevIds","includes","_resolveParticipantPa2","prevId","oldPaths","_resolveParticipantPa3","_ref11","_ref12","wps","wp","React","useLocalSessionId","localId","noopFilter","useActiveSpeakerId","_temp","_ref$filter","_ref$ignoreLocal","ignoreLocal","localSessionId","recentActiveId","isIgnoredLocalId","isFilteredOut","isRecentIdRelevant","activeId","setActiveId","isTrackOff","trackState","participantIdsFilteredAndSortedState","sort","_get","screenAudioState","screenVideoState","idA","idB","_get2","aSort","_get3","bSort","undefined","useParticipantIds","onActiveSpeakerChange","onParticipantJoined","onParticipantLeft","onParticipantUpdated","preFilteredSortedIds","shouldUseCustomIds","getCustomFilteredIds","getLoadable","contents","Boolean","customIds","setCustomIds","maybeUpdateCustomIds","newIds","result","screenSharesState","screenIds","screenAudio","screenVideo","screenId","useScreenShare","onError","onLocalScreenShareStarted","onLocalScreenShareStopped","startScreenShare","args","_len","_key","arguments","stopScreenShare","_len2","_key2","type","screens","isSharingScreen","some","s","useMediaTrack","isOff","state","persistentTrack","subscribed","useMergedRef","refs","element","ref","DailyAudioTrack","memo","forwardRef","onPlayFailed","sessionId","_ref$type","props","_objectWithoutPropertiesLoose","_excluded","audioEl","audio","audioRef","subscribedState","audioTag","playTimeout","handleCanPlay","play","target","message","handlePlay","addEventListener","srcObject","removeEventListener","autoPlay","displayName","DailyAudio","autoSubscribeActiveSpeaker","_ref$autoSubscribeAct","_ref$maxSpeakers","maxSpeakers","_ref$playLocalScreenA","playLocalScreenAudio","fill","speakers","setSpeakers","_useScreenShare","activeSpeakerId","containerRef","useImperativeHandle","getActiveSpeakerAudio","_containerRef$current","_containerRef$current2","querySelector","getAllAudio","from","_containerRef$current3","_containerRef$current4","querySelectorAll","getAudioBySessionId","_containerRef$current5","_containerRef$current6","getRmpAudio","_containerRef$current7","_containerRef$current8","getScreenAudio","_containerRef$current9","_containerRef$current10","getRmpAudioBySessionId","_containerRef$current11","_containerRef$current12","getScreenAudioBySessionId","_containerRef$current13","_containerRef$current14","assignSpeaker","subscribedParticipants","_daily$participants","tracks","isSubscribed","isDestroyed","subscribeToTracksAutomatically","updateParticipant","setSubscribedTracks","prevSpeakers","freeSlotCheck","findIndex","mutedIdx","speakerObjects","lastActiveA","_snapshot$getLoadable","lastActiveB","_snapshot$getLoadable2","replaceIdx","indexOf","_speakerObjects$","_x","removeSpeaker","newSpeakers","rmpAudioIds","_p$tracks","rmpAudio","screen","DailyVideo","automirror","_ref$fit","fit","mirror","onResize","_ref$playableStyle","playableStyle","_ref$style","style","isLocal","isScreen","isLocalCam","videoEl","videoRef","videoState","videoTrack","isPlayable","isMirrored","videoTrackSettings","getSettings","isUsersFrontCamera","facingMode","setupVideoEvents","video","playVideo","promise","then","controls","warn","paused","handleEnterPIP","transform","handleLeavePIP","handleVisibilityChange","document","visibilityState","updateSrcObject","load","reportVideoDimensions","frame","handleResize","cancelAnimationFrame","requestAnimationFrame","hidden","videoWidth","videoHeight","aspectRatio","height","width","muted","playsInline","objectFit","DailyDevicesContext","refreshDevices","Promise","resolve","generalCameraState","generalMicrophoneState","cameraDevicesState","microphoneDevicesState","speakerDevicesState","lastCameraErrorState","DailyDevices","_navigator","navigator","_navigator$mediaDevic","mediaDevices","getUserMedia","_navigator2","_navigator2$mediaDevi","enumerateDevices","_yield$daily$enumerat","devices","cams","d","deviceId","mics","_yield$daily$getInput","getInputDevices","camera","mic","speaker","mapDevice","device","prevDevices","_prevDevices$find$sta","_prevDevices$find","selected","find","sortDeviceByLabel","label","prevCams","prevMics","updateDeviceStates","currentCamState","currentMicState","camPermissionState","micPermissionState","permissions","camPermission","query","micPermission","_unused","awaitingCamAccess","initialCamOff","_tracks$video$off","byUser","awaitingMicAccess","initialMicOff","_tracks$audio$off","_tracks$audio","_tracks$audio$blocked","blocked","byDeviceInUse","m","_tracks$audio2","_tracks$audio2$blocke","byDeviceMissing","_tracks$audio3","_tracks$audio3$blocke","byPermissions","_tracks$video","_tracks$video$blocked","_tracks$video2","_tracks$video2$blocke","_tracks$video3","_tracks$video3$blocke","_ref13","_ref14","_ev$error","_ev$error2","missingMedia","_ev$error3","_ev$error4","blockedMedia","_ev$error5","_ev$error6","reason","_ev$error7","_ref15","_ref16","Provider","liveStreamingState","errorMsg","isLiveStreaming","layout","DailyLiveStreaming","prevState","meetingStateState","meetingErrorState","nonFatalErrorState","meetingSessionDataState","data","topology","DailyMeeting","updateMeetingState","meetingState","initMeetingSessionState","meetingSessionState","_ref8","topologyState","networkQualityState","networkThresholdState","DailyNetwork","initTopology","getNetworkTopology","prevQuality","quality","prevThreshold","threshold","recordingState","isLocalParticipantRecorded","isRecording","DailyRecordings","setState","useSetRecoilState","recordingParticipantIds","hasRecordingParticipants","isLocalParticipantRecording","_ev$layout","preset","recordingId","recordingStartedDate","startedBy","useMeetingState","roomState","DailyRoom","updateRoom","room","transcriptionState","isTranscribing","model","language","transcriptions","DailyTranscriptions","transcriptionStartDate","updatedBy","fromId","defaultOptions","defaultShouldCreateInstance","defaultProps","shouldCreateInstance","useCallInstance","parentElRef","_ref$options","_ref$shouldCreateInst","callInstance","setCallInstance","lastUsedOptions","destroyCallInstance","_destroyCallInstance","co","destroy","handleDestroyedInstance","Daily","getCallInstance","once","createFrame","createCallObject","useCallObject","DailyProvider","_ref$recoilRootProps","recoilRootProps","eventsMap","handleEvent","allHandlers","_eventsMap$current$ev","_eventsMap$current","priorityHandlers","normalHandlers","sortedHandlers","_step$value","cb","initEventHandlers","externalCallObject","callObject","memoizedOptions","internalCallObject","_eventsMap$current$ev2","_eventsMap$current$ev3","_eventsMap$current$ev4","_eventsMap$current$ev5","RecoilRoot","useParticipant","filteredEvts","useActiveParticipant","activeParticipant","useAppMessage","onAppMessage","sendAppMessage","to","handleAppMessage","audioLevelProcessor","inlineAudioWorklet","encodeURIComponent","useAudioLevel","mediaTrack","onVolumeChange","audioCtx","setupStreamAndStartProcessing","AudioCtx","AudioContext","window","webkitAudioContext","audioContext","mediaStreamSource","createMediaStreamSource","node","gainNode","startProcessing","AudioWorkletNode","createGain","audioWorklet","addModule","port","onmessage","volume","gain","connect","destination","_node","disconnect","useAudioLevelObserver","audioLevel","participantsAudioLevel","maybeStartLocalAudioObserver","isLocalAudioLevelObserverRunning","startLocalAudioLevelObserver","maybeStartRemoteAudioObserver","isRemoteParticipantsAudioLevelObserverRunning","startRemoteParticipantsAudioLevelObserver","useAudioTrack","useCallFrame","CPULoadState","useCPULoad","onCPULoadChange","cpu","updateCPULoadState","deepEqual","mounted","getCpuLoadStats","stats","cpuLoadState","cpuLoadStateReason","useDailyError","meetingError","nonFatalError","useDevices","camState","micState","camDevices","micDevices","speakerDevices","cameraError","setCamera","setInputDevicesAsync","audioDeviceId","videoDeviceId","setMicrophone","_x2","setSpeaker","setOutputDeviceAsync","outputDeviceId","_x3","errorStates","cameras","currentCam","cam","currentMic","currentSpeaker","hasCamError","hasMicError","microphones","inputSettingsState","useInputSettings","onInputSettingsUpdated","inputSettings","_useDailyError","updateInputSettingsState","getInputSettings","updateInputSettings","useLiveStreaming","onLiveStreamingError","onLiveStreamingStarted","onLiveStreamingStopped","onLiveStreamingUpdated","onLiveStreamingWarning","startLiveStreaming","stopLiveStreaming","updateLiveStreaming","useLocalParticipant","localParticipant","useMeetingSessionState","useNetwork","onNetworkConnection","onNetworkQualityChange","getStats","newStats","getNetworkStats","participantCountsState","present","useParticipantCounts","onParticipantCountsUpdated","participantCounts","updateCounts","counts","usePermissions","canSendAudio","canSend","_permissions$canSend","canSendVideo","_permissions$canSend2","canSendCustomAudio","_permissions$canSend3","canSendCustomVideo","_permissions$canSend4","canSendScreenAudio","_permissions$canSend5","canSendScreenVideo","_permissions$canSend6","canAdminParticipants","canAdmin","_permissions$canAdmin","canAdminStreaming","_permissions$canAdmin2","canAdminTranscription","_permissions$canAdmin3","hasPresence","participantReceiveSettingsState","useReceiveSettings","_ref$id","onReceiveSettingsUpdated","baseSettings","receiveSettings","updateReceiveSettingsState","_Object$entries","_Object$entries$_i","settings","getReceiveSettings","updateReceiveSettings","useRecording","onRecordingData","onRecordingError","onRecordingStarted","onRecordingStopped","startRecording","stopRecording","updateRecording","useRoom","useRoomExp","onCountdown","localJoinDate","ejectDate","setEjectDate","ejectAfterElapsed","_room$tokenConfig$eje","_room$tokenConfig","tokenConfig","eject_after_elapsed","_room$config","config","expUTCTimeStamp","_room$tokenConfig$exp","_room$tokenConfig2","exp","_room$config2","ejectAtExp","_room$tokenConfig$eje2","_room$tokenConfig3","eject_at_token_exp","_room$config3","eject_at_room_exp","newEjectDate","expDate","oldEjectDate","_room$config4","_room$config5","_room$config6","_room$tokenConfig4","_room$tokenConfig5","_room$tokenConfig6","eject","_ejectDate$getTime","now","diff","hours","Math","max","floor","minutes","seconds","useScreenAudioTrack","useScreenVideoTrack","sendSettingsState","useSendSettings","onSendSettingsUpdated","sendSettings","storeSendSettings","getSendSettings","updateSendSettings","newSendSettings","useTranscription","onTranscriptionAppData","onTranscriptionError","onTranscriptionMessage","onTranscriptionStarted","onTranscriptionStopped","startTranscription","stopTranscription","useVideoTrack","useWaitingParticipants","onWaitingParticipantAdded","onWaitingParticipantRemoved","onWaitingParticipantUpdated","waitingParticipants","updateWaitingParticipantAccess","grantRequestedAccess","updateWaitingParticipants","updateWaitingParticipant","grantAccess","denyAccess"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGO,IAAMA,YAAY,gBAAGC,aAAa,CAAmB,IAAI,CAAC;;ACCjE;;;AAGA,IAAaC,QAAQ,GAAG,SAAXA,QAAQA;EACnB,IAAMC,KAAK,GAAGC,UAAU,CAACJ,YAAY,CAAC;EACtCK,aAAa,CAACF,KAAK,CAAC;EACpB,OAAOA,KAAK;AACd,CAAC;;ACHM,IAAMG,iBAAiB,gBAAGL,aAAa,CAAoB;EAChEM,EAAE,EAAE,SAAAA,OAAQ;EACZC,GAAG,EAAE,SAAAA;CACN,CAAC;;ACGF,IAAIC,eAAe,GAAG,CAAC,CAAC;AACxB,AAAO,IAAMC,iBAAiB,GAAG,SAApBA,iBAAiBA;EAAA,OAASD,eAAe,EAAE;AAAA;AACxD,IAAIE,aAAa,GAAG,CAAC;AACrB,AAAO,IAAMC,SAAS,GAAG,SAAZA,SAASA;EAAA,OAASD,aAAa,EAAE;AAAA;AAE9C;;;;;;;;;;AAUA,IAAaE,aAAa,GAAG,SAAhBA,aAAaA,CACxBC,EAAK,EACLC,QAA0B,EAC1BC,iBAAiB;MAAjBA,iBAAiB;IAAjBA,iBAAiB,GAAG,KAAK;;EAEzB,IAAAC,WAAA,GAAoBb,UAAU,CAACE,iBAAiB,CAAC;IAAzCE,GAAG,GAAAS,WAAA,CAAHT,GAAG;IAAED,EAAE,GAAAU,WAAA,CAAFV,EAAE;EACf,IAAAW,SAAA,GAAkCC,QAAQ,CAAC,KAAK,CAAC;IAA1CC,SAAS,GAAAF,SAAA;IAAEG,YAAY,GAAAH,SAAA;EAC9B,IAAMI,aAAa,GAAGC,MAAM,CAAS,CAAC,CAAC;EAEvC,IAAMC,OAAO,GAAGC,OAAO,CACrB;IAAA,OAAOT,iBAAiB,GAAGN,iBAAiB,EAAE,GAAGE,SAAS,EAAE;GAAC,EAC7D,CAACI,iBAAiB,CAAC,CACpB;EAEDU,SAAS,CAAC;IACR,IAAI,CAACZ,EAAE,IAAIM,SAAS,EAAE;;;;IAItB,IAAIE,aAAa,CAACK,OAAO,GAAG,MAAM,EAAE;MAClCC,OAAO,CAACC,KAAK,mQAGYf,EAAE,iCACzBC,QAAQ,CACT;MACDM,YAAY,CAAC,IAAI,CAAC;MAClB;;IAEFC,aAAa,CAACK,OAAO,EAAE;IACvB,IAAMG,OAAO,GAAGC,UAAU,CAAC;MACzBT,aAAa,CAACK,OAAO,GAAG,CAAC;KAC1B,EAAE,EAAE,CAAC;IACNpB,EAAE,CAACO,EAAE,EAAEC,QAAQ,EAAES,OAAO,CAAC;IACzB,OAAO;MACLQ,YAAY,CAACF,OAAO,CAAC;MACrBtB,GAAG,CAACM,EAAE,EAAEU,OAAO,CAAC;KACjB;GACF,EAAE,CAACT,QAAQ,EAAED,EAAE,EAAEU,OAAO,EAAEJ,SAAS,EAAEZ,GAAG,EAAED,EAAE,CAAC,CAAC;EAE/CF,aAAa,CAAC;IACZ4B,KAAK,EAAEnB,EAAE;IACTU,OAAO,EAAPA,OAAO;IACPJ,SAAS,EAATA,SAAS;IACTL,QAAQ,EAARA;GACD,CAAC;AACJ,CAAC;;AC3EM,IAAMmB,aAAa,GAAG,cAAc;;ACmB3C;;;AAGA,AAAO,IAAMC,6BAA6B,gBAAGC,UAAU,CAGrD;EACAC,GAAG,EAAEH,aAAa,GAAG,4BAA4B;EACjD,WAAS;CACV,CAAC;AAEF;;;AAGA,AAAO,IAAMI,wBAAwB,gBAAGF,UAAU,CAAoB;EACpEC,GAAG,EAAEH,aAAa,GAAG,sBAAsB;EAC3C,WAAS,IAAI;EACbK,0BAA0B,EAAE;CAC7B,CAAC;AAEF;;;AAGA,AAAO,IAAMC,0BAA0B,gBAAGC,cAAc,CAAsB;EAC5EJ,GAAG,EAAEH,aAAa,GAAG,wBAAwB;EAC7CQ,GAAG,EACD,SAAAA,IAAAC,IAAA;IAAA,IAAGC,EAAE,GAAAD,IAAA,CAAFC,EAAE;MAAEC,UAAU,GAAAF,IAAA,CAAVE,UAAU;IAAA,OACjB,UAAAC,KAAA;UAAGJ,GAAG,GAAAI,KAAA,CAAHJ,GAAG;MACJ,OAAOG,UAAU,CAACE,GAAG,CAAC,UAACC,IAAI;QAAA,OACzBN,GAAG,CAACJ,wBAAwB,CAAC;UAAEM,EAAE,EAAFA,EAAE;UAAEK,QAAQ,EAAED;SAAM,CAAC,CAAC;QACtD;KACF;;EACHT,0BAA0B,EAAE;CAC7B,CAAC;AAWF;;;;;AAKA,IAAaW,sBAAsB,GAAG,SAAzBA,sBAAsBA,CAMjCC,aAAqB,EACrBC,aAAgB;;EAEhB,IAAMP,UAAU,GAAGQ,cAAc,CAC/BC,KAAK,CAACC,OAAO,CAACH,aAAa,CAAC,GACxBZ,0BAA0B,CAAC;IACzBI,EAAE,EAAEO,aAAa;IACjBN,UAAU,EAAEO;GACb,CAAC,GACFd,wBAAwB,CAAC;IACvBM,EAAE,EAAEO,aAAa;IACjBF,QAAQ,EAAEG;GACX,CAAC,CACP;EAED/C,aAAa,CACXiD,KAAK,CAACC,OAAO,CAACH,aAAa,CAAC,GACxBA,aAAa,CAACI,MAAM,CAClB,UAACC,CAAmB,EAAET,IAAc,EAAEU,CAAS;IAC7CD,CAAC,CAACT,IAAI,CAAC,GAAGH,UAAU,CAACa,CAAC,CAAC;IACvB,OAAOD,CAAC;GACT,EACD,EAAE,CACH,IAAAE,KAAA,OAAAA,KAAA,CAEEP,aAAoB,IAAGP,UAAU,EAAAc,KAAA,CACnC,CACN;EAED,OAAOd,UAAU;AACnB,CAAC;;AC9ED;;;;;;;;;;;;;AAaA,IAAae,sBAAsB,GAAG,SAAzBA,sBAAsBA,CACjC9C,EAAW,EACXC,QAAuC,EACvC8C,eAAe,EACf7C,iBAAiB;MADjB6C,eAAe;IAAfA,eAAe,GAAG,GAAG;;EAAA,IACrB7C,iBAAiB;IAAjBA,iBAAiB,GAAG,KAAK;;EAEzB,IAAAC,WAAA,GAAoBb,UAAU,CAACE,iBAAiB,CAAC;IAAzCE,GAAG,GAAAS,WAAA,CAAHT,GAAG;IAAED,EAAE,GAAAU,WAAA,CAAFV,EAAE;EACf,IAAMiB,OAAO,GAAGC,OAAO,CAAC;;IACtB,IAAI6B,KAAK,CAACC,OAAO,CAACzC,EAAE,CAAC,EACnB,OAAOA,EAAE,CAAC0C,MAAM,CAAyB,UAACM,CAAC,EAAEC,CAAC;MAC5CD,CAAC,CAACC,CAAC,CAAC,GAAG/C,iBAAiB,GAAGN,iBAAiB,EAAE,GAAGE,SAAS,EAAE;MAC5D,OAAOkD,CAAC;KACT,EAAE,EAAE,CAAC;IACR,OAAAnB,IAAA,OAAAA,IAAA,CAAU7B,EAAE,IAAGE,iBAAiB,GAAGN,iBAAiB,EAAE,GAAGE,SAAS,EAAE,EAAA+B,IAAA;GACrE,EAAE,CAAC7B,EAAE,EAAEE,iBAAiB,CAAC,CAAC;EAE3B,IAAMgD,eAAe,GAAGzC,MAAM,CAAuB,EAAE,CAAC;EAExDV,aAAa,CACX,yBAAyB,EACzBoD,WAAW,CAAC;IACVD,eAAe,CAACrC,OAAO,CAACuC,MAAM,GAAG,CAAC;GACnC,EAAE,EAAE,CAAC,CACP;EAED,IAAMC,UAAU,GAAG1C,OAAO,CACxB;IAAA,OACE2C,QAAQ,CACN;MACE,IAAIJ,eAAe,CAACrC,OAAO,CAACuC,MAAM,KAAK,CAAC,EAAE;MAC1CnD,QAAQ,CAACiD,eAAe,CAACrC,OAAO,CAAC;MACjCqC,eAAe,CAACrC,OAAO,CAACuC,MAAM,GAAG,CAAC;KACnC,EACDL,eAAe,EACf;MACEQ,QAAQ,EAAE;KACX,CACF;KACH,CAACtD,QAAQ,EAAE8C,eAAe,CAAC,CAC5B;EAEDnC,SAAS,CAAC;IACR,IAAI,CAACZ,EAAE,EAAE;IACT,IAAMwD,QAAQ,GAAG,SAAXA,QAAQA,CAAIxD,EAAoB;MACpCkD,eAAe,CAACrC,OAAO,CAAC4C,IAAI,CAACzD,EAAE,CAAC;MAChCqD,UAAU,EAAE;KACb;IACD,IAAIb,KAAK,CAACC,OAAO,CAACzC,EAAE,CAAC,EAAE;MACrBA,EAAE,CAAC0D,OAAO,CAAC,UAACT,CAAC;QAAA,OAAKxD,EAAE,CAACwD,CAAC,EAAEO,QAAQ,EAAE9C,OAAO,CAACuC,CAAC,CAAC,CAAC;QAAC;KAC/C,MAAM;MACLxD,EAAE,CAACO,EAAE,EAAEwD,QAAQ,EAAE9C,OAAO,CAACV,EAAE,CAAC,CAAC;;IAE/B,OAAO;MACL,IAAIwC,KAAK,CAACC,OAAO,CAACzC,EAAE,CAAC,EAAE;QACrBA,EAAE,CAAC0D,OAAO,CAAC,UAACT,CAAC;UAAA,OAAKvD,GAAG,CAACuD,CAAC,EAAEvC,OAAO,CAACuC,CAAC,CAAC,CAAC;UAAC;OACtC,MAAM;QACLvD,GAAG,CAACM,EAAE,EAAEU,OAAO,CAACV,EAAE,CAAC,CAAC;;KAEvB;GACF,EAAE,CAACqD,UAAU,EAAErD,EAAE,EAAEU,OAAO,EAAEhB,GAAG,EAAED,EAAE,CAAC,CAAC;EAEtCF,aAAa,CAAC;IACZ4B,KAAK,EAAEnB,EAAE;IACTU,OAAO,EAAPA;GACD,CAAC;AACJ,CAAC;;ACxGD;;;;AAIA,SAAgBiD,eAAeA,CAACC,CAAM,EAAEC,CAAM;EAC5C,IAAID,CAAC,KAAKC,CAAC,EAAE,OAAO,IAAI;;EAGxB,IAAID,CAAC,YAAYE,WAAW,IAAID,CAAC,YAAYC,WAAW,EAAE;IACxD,OACEF,CAAC,CAAC9B,EAAE,KAAK+B,CAAC,CAAC/B,EAAE,IACb8B,CAAC,CAACG,MAAM,KAAKF,CAAC,CAACE,MAAM,IACrBH,CAAC,CAACI,SAAS,EAAE,CAACZ,MAAM,KAAKS,CAAC,CAACG,SAAS,EAAE,CAACZ,MAAM,IAC7CQ,CAAC,CACEI,SAAS,EAAE,CACXC,KAAK,CAAC,UAACC,KAAK,EAAEC,GAAG;MAAA,OAAKR,eAAe,CAACO,KAAK,EAAEL,CAAC,CAACG,SAAS,EAAE,CAACG,GAAG,CAAC,CAAC;MAAC;;;EAKxE,IAAIP,CAAC,YAAYQ,gBAAgB,IAAIP,CAAC,YAAYO,gBAAgB,EAAE;IAClE,OAAOR,CAAC,CAAC9B,EAAE,KAAK+B,CAAC,CAAC/B,EAAE,IAAI8B,CAAC,CAACS,IAAI,KAAKR,CAAC,CAACQ,IAAI,IAAIT,CAAC,CAACU,UAAU,KAAKT,CAAC,CAACS,UAAU;;;EAI5E,IAAIV,CAAC,YAAYW,IAAI,IAAIV,CAAC,YAAYU,IAAI,EAAE;IAC1C,OAAOX,CAAC,CAACY,OAAO,EAAE,KAAKX,CAAC,CAACW,OAAO,EAAE;;;EAIpC,IAAIZ,CAAC,YAAYa,MAAM,IAAIZ,CAAC,YAAYY,MAAM,EAAE;IAC9C,OAAOb,CAAC,CAACc,MAAM,KAAKb,CAAC,CAACa,MAAM,IAAId,CAAC,CAACe,KAAK,KAAKd,CAAC,CAACc,KAAK;;;EAIrD,IAAIf,CAAC,YAAYgB,GAAG,IAAIf,CAAC,YAAYe,GAAG,EAAE;IACxC,IAAIhB,CAAC,CAACiB,IAAI,KAAKhB,CAAC,CAACgB,IAAI,EAAE;MACrB,OAAO,KAAK;;IAGd,SAAAC,SAAA,GAAAC,+BAAA,CAAoBnB,CAAC,CAACoB,MAAM,EAAE,GAAAC,KAAA,IAAAA,KAAA,GAAAH,SAAA,IAAAI,IAAA,GAAE;MAAA,IAArBC,KAAK,GAAAF,KAAA,CAAAE,KAAA;MACd,IAAI,CAACtB,CAAC,CAACuB,GAAG,CAACD,KAAK,CAAC,EAAE;QACjB,OAAO,KAAK;;;IAIhB,OAAO,IAAI;;;EAIb,IAAIvB,CAAC,YAAYyB,GAAG,IAAIxB,CAAC,YAAYwB,GAAG,EAAE;IACxC,IAAIzB,CAAC,CAACiB,IAAI,KAAKhB,CAAC,CAACgB,IAAI,EAAE;MACrB,OAAO,KAAK;;IAEd,SAAAS,UAAA,GAAAP,+BAAA,CAA2BnB,CAAC,CAAC2B,OAAO,EAAE,GAAAC,MAAA,IAAAA,MAAA,GAAAF,UAAA,IAAAJ,IAAA,GAAE;MAAA,IAAAO,YAAA,GAAAD,MAAA,CAAAL,KAAA;QAA5B5D,GAAG,GAAAkE,YAAA;QAAEN,MAAK,GAAAM,YAAA;MACpB,IAAI,CAAC5B,CAAC,CAACuB,GAAG,CAAC7D,GAAG,CAAC,EAAE;QACf,OAAO,KAAK;;MAEd,IAAI,CAACoC,eAAe,CAACwB,MAAK,EAAEtB,CAAC,CAACjC,GAAG,CAACL,GAAG,CAAC,CAAC,EAAE;QACvC,OAAO,KAAK;;;IAIhB,OAAO,IAAI;;;EAIb,IACE,OAAOqC,CAAC,KAAK,QAAQ,IACrBA,CAAC,KAAK,IAAI,IACV,OAAOC,CAAC,KAAK,QAAQ,IACrBA,CAAC,KAAK,IAAI,EACV;IACA,OAAO,KAAK;;;EAId,IAAI6B,KAAK,GAAGC,MAAM,CAACC,IAAI,CAAChC,CAAC,CAAC;EAC1B,IAAIiC,KAAK,GAAGF,MAAM,CAACC,IAAI,CAAC/B,CAAC,CAAC;;EAG1B,IAAI6B,KAAK,CAACtC,MAAM,KAAKyC,KAAK,CAACzC,MAAM,EAAE,OAAO,KAAK;EAE/C,SAAA0C,EAAA,MAAAC,MAAA,GAAgBL,KAAK,EAAAI,EAAA,GAAAC,MAAA,CAAA3C,MAAA,EAAA0C,EAAA,IAAE;IAAlB,IAAIvE,IAAG,GAAAwE,MAAA,CAAAD,EAAA;IACV;;IAEE,EAAEvE,IAAG,IAAIsC,CAAC,CAAC;;IAEX,CAACF,eAAe,CAACC,CAAC,CAACrC,IAAG,CAAC,EAAEsC,CAAC,CAACtC,IAAG,CAAC,CAAC,EAEhC,OAAO,KAAK;;;EAIhB,OAAO,IAAI;AACb;;ACjFA;;;;;;AAMA,SAAgByE,aAAaA,CAC3BC,OAAgC;EAEhC,IAAMC,KAAK,GAAGC,QAAQ,CAAC;IACrB5E,GAAG,EAAK0E,OAAO,CAAC1E,GAAG,WAAQ;IAC3BK,GAAG,EAAEqE,OAAO,CAACrE;GACd,CAAC;EAEF,IAAIwE,KAAoB;EAExB,OAAOD,QAAQ,CAAC;IACd5E,GAAG,EAAE0E,OAAO,CAAC1E,GAAG;IAChBK,GAAG,EAAE,SAAAA,IAAAC,IAAA;UAAGD,IAAG,GAAAC,IAAA,CAAHD,GAAG;MACT,IAAMyE,MAAM,GAAGzE,IAAG,CAACsE,KAAK,CAAC;MACzB,IAAIE,KAAK,IAAI,IAAI,IAAIH,OAAO,CAACK,MAAM,CAACD,MAAM,EAAED,KAAK,CAAC,EAAE;QAClD,OAAOA,KAAK;;MAEdA,KAAK,GAAGC,MAAM;MACd,OAAOA,MAAW;;GAErB,CAAC;AACJ;AAOA;;;;;;AAMA,SAAgBE,mBAAmBA,CACjCN,OAAyC;EAEzC,IAAMC,KAAK,GAAGvE,cAAc,CAAO;IACjCJ,GAAG,EAAK0E,OAAO,CAAC1E,GAAG,WAAQ;IAC3BK,GAAG,EAAEqE,OAAO,CAACrE;GACd,CAAC;EAEF,IAAM4E,WAAW,GAA0B,IAAInB,GAAG,EAAE;EAEpD,OAAO1D,cAAc,CAAA8E,QAAA,KAChBR,OAAO;IACV1E,GAAG,EAAE0E,OAAO,CAAC1E,GAAG;IAChBK,GAAG,EACD,SAAAA,IAAC8E,KAAQ;MAAA,OACT,UAAA1E,KAAA;YAAGJ,GAAG,GAAAI,KAAA,CAAHJ,GAAG;QACJ,IAAMyE,MAAM,GAAGzE,GAAG,CAACsE,KAAK,CAACQ,KAAK,CAAC,CAAC;QAChC,IAAMN,KAAK,GAAGI,WAAW,CAAC5E,GAAG,CAAC8E,KAAK,CAAC;QACpC,IAAIN,KAAK,IAAI,IAAI,IAAIH,OAAO,CAACK,MAAM,CAACD,MAAM,EAAED,KAAK,CAAC,EAAE;UAClD,OAAOA,KAAK;;QAEdI,WAAW,CAACG,GAAG,CAACD,KAAK,EAAEL,MAAM,CAAC;QAC9B,OAAOA,MAAM;OACd;;IACJ,CAAC;AACJ;;AC5EA;;;AAGA,IAAMO,QAAQ,GAAG,SAAXA,QAAQA,CACZjE,CAAmB,EACnBkE,WAAW,EACXC,OAAO;MADPD,WAAW;IAAXA,WAAW,GAAG,EAAE;;EAAA,IAChBC,OAAO;IAAPA,OAAO,GAAG,IAAIlC,GAAG,EAAE;;EAEnB,IAAI,OAAOjC,CAAC,KAAK,QAAQ,IAAIA,CAAC,KAAK,IAAI,IAAImE,OAAO,CAAC1B,GAAG,CAACzC,CAAC,CAAC,EAAE;IACzD,OAAO,CAACkE,WAAW,CAAC;;EAGtBC,OAAO,CAACC,GAAG,CAACpE,CAAC,CAAC;EAEd,IAAMqE,KAAK,GAAG,EAAE;EAChB,KAAK,IAAMzF,GAAG,IAAIoB,CAAC,EAAE;IACnB,IAAIgD,MAAM,CAACsB,SAAS,CAACC,cAAc,CAACC,IAAI,CAACxE,CAAC,EAAEpB,GAAG,CAAC,EAAE;MAChD,IAAM6F,OAAO,GAAGP,WAAW,GAAMA,WAAW,SAAItF,GAAG,GAAKA,GAAG;MAC3DyF,KAAK,CAACvD,IAAI,CAAA4D,KAAA,CAAVL,KAAK,GAAMI,OAAO,EAAAE,MAAA,CAAKV,QAAQ,CAACjE,CAAC,CAACpB,GAAG,CAAC,EAAE6F,OAAO,EAAEN,OAAO,CAAC,EAAC;;;EAI9DA,OAAO,UAAO,CAACnE,CAAC,CAAC;EAEjB,OAAOqE,KAAK;AACd,CAAC;AAED;;;AAGA,AAAO,IAAMO,mBAAmB,GAAG,SAAtBA,mBAAmBA,CAAIC,CAA2B;EAC7D,OAAOZ,QAAQ,CAACY,CAAC,CAAsC;AACzD,CAAC;;AC9BD,IAAMC,WAAW,GAAG,SAAdA,WAAWA,CACfC,WAAqB,EACrBxF,IAAO;EAEP,OAAOyF,MAAM,CAACzF,IAAI,CAAC,CAChB0F,KAAK,CAAC,GAAG,CAAC,CACVC,MAAM,CAAC,UAACtG,GAAG;IAAA,OAAKA,GAAG,CAAC6B,MAAM;IAAC,CAC3BV,MAAM,CAAC,UAAC8E,CAAM,EAAEjG,GAAG;IAAA,OAAKiG,CAAC,IAAIA,CAAC,CAACjG,GAAG,CAAC;KAAEmG,WAAW,CAAC;AACtD,CAAC;AAOD,AAAO,IAAMI,uBAAuB,GAAG,SAA1BA,uBAAuBA,CAIlCJ,WAAqB,EACrBV,KAAQ;EAER,OAAOA,KAAK,CAAC/E,GAAG,CAAC,UAACC,IAAI;IAAA,OACpBuF,WAAW,CAACC,WAAW,EAAExF,IAAI,CAAC;IACY;AAC9C,CAAC;;ACGD;;;AAGA,AAAO,IAAM6F,aAAa,gBAAGC,IAAI,CAAgB;EAC/CzG,GAAG,EAAEH,aAAa,GAAG,WAAW;EAChC,WAAS;CACV,CAAC;AAEF,AAAO,IAAM6G,YAAY,gBAAGD,IAAI,CAAS;EACvCzG,GAAG,EAAEH,aAAa,GAAG,UAAU;EAC/B,WAAS;CACV,CAAC;AAEF,AAAO,IAAM8G,kBAAkB,gBAAGF,IAAI,CAAc;EAClDzG,GAAG,EAAEH,aAAa,GAAG,mBAAmB;EACxC,WAAS;CACV,CAAC;AAEF,AAAO,IAAM+G,mBAAmB,gBAAGH,IAAI,CAAW;EAChDzG,GAAG,EAAEH,aAAa,GAAG,iBAAiB;EACtC,WAAS;CACV,CAAC;AAEF,AAAO,IAAMgH,gBAAgB,gBAAG9G,UAAU,CAGxC;EACAC,GAAG,EAAEH,aAAa,GAAG,mBAAmB;EACxC,WAAS,IAAI;EACbK,0BAA0B,EAAE;CAC7B,CAAC;AAEF,AAYA;;;AAGA,AAAO,IAAM4G,wBAAwB,gBAAGL,IAAI,CAAW;EACrDzG,GAAG,EAAEH,aAAa,GAAG,sBAAsB;EAC3C,WAAS;CACV,CAAC;AAEF;;;AAGA,AAAO,IAAMkH,uBAAuB,gBAAGhH,UAAU,CAG/C;EACAC,GAAG,EAAEH,aAAa,GAAG,qBAAqB;EAC1C,WAAS;IACPmH,cAAc,EAAE;MACdC,KAAK,EAAE;KACR;IACD1G,EAAE,EAAE,EAAE;IACN2G,IAAI,EAAE;;CAET,CAAC;AAEF;;;AAGA,AAAO,IAAMC,8BAA8B,gBAAG1C,aAAa,CAAC;EAC1DzE,GAAG,EAAEH,aAAa,GAAG,6BAA6B;EAClDkF,MAAM,EAAE3C,eAAe;EACvB/B,GAAG,EAAE,SAAAA,IAAAI,KAAA;QAAGJ,KAAG,GAAAI,KAAA,CAAHJ,GAAG;IACT,IAAM+G,GAAG,GAAG/G,KAAG,CAACyG,wBAAwB,CAAC;IACzC,OAAOM,GAAG,CAAC1G,GAAG,CAAC,UAACH,EAAE;MAAA,OAAKF,KAAG,CAAC0G,uBAAuB,CAACxG,EAAE,CAAC,CAAC;MAAC;;CAE3D,CAAC;AAEF,AAAO,IAAM8G,iBAAiB,GAA+C,SAAhEA,iBAAiBA,CAAA/F,KAAA;MAC5BgG,QAAQ,GAAAhG,KAAA,CAARgG,QAAQ;EAER,IAAMxJ,KAAK,GAAGD,QAAQ,EAAE;EACxB,IAAAgB,SAAA,GAAsCC,QAAQ,CAAC,KAAK,CAAC;IAA9CyI,WAAW,GAAA1I,SAAA;IAAE2I,cAAc,GAAA3I,SAAA;EAElC,IAAM4I,gBAAgB,GAAGC,iBAAiB,CACxC,UAAAC,KAAA;IAAA,IAAGC,iBAAiB,GAAAD,KAAA,CAAjBC,iBAAiB;IAAA,OAClB,UAACC,YAAqC;MACpCD,iBAAiB,CAAC,UAAAE,KAAA;YAAG1C,GAAG,GAAA0C,KAAA,CAAH1C,GAAG;QACtBA,GAAG,CAACsB,YAAY,EAAEmB,YAAY,CAACE,KAAK,CAACC,UAAU,CAAC;QAChD,IAAMC,iBAAiB,GAAG7D,MAAM,CAACX,MAAM,CAACoE,YAAY,CAAC;QACrD,IAAMT,GAAG,GAAGa,iBAAiB,CAACvH,GAAG,CAAC,UAACuF,CAAC;UAAA,OAAKA,CAAC,CAAC+B,UAAU;UAAC;QACtD5C,GAAG,CAACwB,mBAAmB,EAAEQ,GAAG,CAAC;QAC7Ba,iBAAiB,CAAC9F,OAAO,CAAC,UAAC8D,CAAC;UAC1Bb,GAAG,CAACyB,gBAAgB,CAACZ,CAAC,CAAC+B,UAAU,CAAC,EAAE/B,CAAC,CAAC;UACtC,IAAMR,KAAK,GAAGO,mBAAmB,CAACC,CAAC,CAAC;;UAEpCb,GAAG,CAACtF,6BAA6B,CAACmG,CAAC,CAAC+B,UAAU,CAAC,EAAEvC,KAAK,CAAC;;UAEvDA,KAAK,CAACtD,OAAO,CAAC,UAACvB,QAAQ;YACrB,IAAAsH,qBAAA,GAAgB3B,uBAAuB,CACrCN,CAA6B,EAC7B,CAACrF,QAAQ,CAAC,CACX;cAHMgD,KAAK,GAAAsE,qBAAA;YAIZ9C,GAAG,CACDnF,wBAAwB,CAAC;cACvBM,EAAE,EAAE0F,CAAC,CAAC+B,UAAU;cAChBpH,QAAQ,EAARA;aACD,CAAC,EACFgD,KAAK,CACN;WACF,CAAC;SACH,CAAC;QACF4D,cAAc,CAAC,IAAI,CAAC;OACrB,CAAC;KACH;KACH,EAAE,CACH;;;;;EAKDnI,SAAS,CAAC;IACR,IAAI,CAACvB,KAAK,IAAIyJ,WAAW,EAAE;IAC3B,IAAMY,QAAQ,GAAGC,WAAW,CAAC;MAC3B,IAAMP,YAAY,GAAG/J,KAAK,CAAC+J,YAAY,EAAE;MACzC,IAAI,EAAE,OAAO,IAAIA,YAAY,CAAC,EAAE;MAChCJ,gBAAgB,CAACI,YAAY,CAAC;MAC9BQ,aAAa,CAACF,QAAQ,CAAC;KACxB,EAAE,GAAG,CAAC;IACP,OAAO;MACLE,aAAa,CAACF,QAAQ,CAAC;KACxB;GACF,EAAE,CAACrK,KAAK,EAAEyJ,WAAW,EAAEE,gBAAgB,CAAC,CAAC;EAC1C,IAAMa,eAAe,GAAG1G,WAAW,CAAC;IAClC,IAAI,CAAC9D,KAAK,EAAE;IACZ,IAAM+J,YAAY,GAAG/J,KAAK,oBAALA,KAAK,CAAE+J,YAAY,EAAE;IAC1C,IAAI,CAACA,YAAY,CAACE,KAAK,EAAE;IACzBN,gBAAgB,CAACI,YAAY,CAAC;GAC/B,EAAE,CAAC/J,KAAK,EAAE2J,gBAAgB,CAAC,CAAC;EAC7BjJ,aAAa,CAAC,gBAAgB,EAAE8J,eAAe,EAAE,IAAI,CAAC;EACtD9J,aAAa,CAAC,sBAAsB,EAAE8J,eAAe,EAAE,IAAI,CAAC;EAC5D9J,aAAa,CACX,iBAAiB,EACjBkJ,iBAAiB,CACf,UAAAa,KAAA;IAAA,IAAGnD,GAAG,GAAAmD,KAAA,CAAHnD,GAAG;IAAA,OACJ;MACEA,GAAG,CAACuB,kBAAkB,EAAE,IAAI3D,IAAI,EAAE,CAAC;MACnCsF,eAAe,EAAE;KAClB;KACH,CAACA,eAAe,CAAC,CAClB,EACD,IAAI,CACL;EACD9J,aAAa,CACX,gBAAgB,EAChBoD,WAAW,CACT,UAACnD,EAAE;IACDgJ,gBAAgB,CAAChJ,EAAE,CAACoJ,YAAY,CAAC;GAClC,EACD,CAACJ,gBAAgB,CAAC,CACnB,EACD,IAAI,CACL;;;;EAKD,IAAMe,aAAa,GAAGd,iBAAiB,CACrC,UAAAe,KAAA;IAAA,IAAGC,KAAK,GAAAD,KAAA,CAALC,KAAK;MAAEC,QAAQ,GAAAF,KAAA,CAARE,QAAQ;IAAA,oBAAAC,iBAAA,CAChB;MACEF,KAAK,CAAChC,YAAY,CAAC;MACnBgC,KAAK,CAAClC,aAAa,CAAC;MACpB,IAAMY,GAAG,SAASuB,QAAQ,CAACE,UAAU,CAACjC,mBAAmB,CAAC;MAC1D,IAAI3F,KAAK,CAACC,OAAO,CAACkG,GAAG,CAAC,EACpBA,GAAG,CAACjF,OAAO,CAAC,UAAC5B,EAAE;QAAA,OAAKmI,KAAK,CAAC7B,gBAAgB,CAACtG,EAAE,CAAC,CAAC;QAAC;MAClDmI,KAAK,CAAC9B,mBAAmB,CAAC;KAC3B;KACH,EAAE,CACH;EACDpI,aAAa,CAAC,yBAAyB,EAAEgK,aAAa,EAAE,IAAI,CAAC;EAC7DhK,aAAa,CAAC,cAAc,EAAEgK,aAAa,EAAE,IAAI,CAAC;EAElDjH,sBAAsB,CACpB,CACE,uBAAuB,EACvB,oBAAoB,EACpB,qBAAqB,EACrB,kBAAkB,CACnB,EACDmG,iBAAiB,CACf,UAAAoB,KAAA;IAAA,IAAGlB,iBAAiB,GAAAkB,KAAA,CAAjBlB,iBAAiB;IAAA,OAClB,UAACmB,IAAI;MACH,IAAI,CAACA,IAAI,CAAClH,MAAM,EAAE;MAClB+F,iBAAiB,CAAC,UAAAoB,MAAA;YAAG3I,GAAG,GAAA2I,MAAA,CAAH3I,GAAG;UAAEqI,KAAK,GAAAM,MAAA,CAALN,KAAK;UAAEtD,GAAG,GAAA4D,MAAA,CAAH5D,GAAG;QAClC2D,IAAI,CAAC5G,OAAO,CAAC,UAAC1D,EAAE;UACd,QAAQA,EAAE,CAACwK,MAAM;YACf,KAAK,uBAAuB;cAAE;gBAC5B7D,GAAG,CAACoB,aAAa,EAAE/H,EAAE,CAACyK,aAAa,CAACC,MAAM,CAAC;gBAC3C/D,GAAG,CAACyB,gBAAgB,CAACpI,EAAE,CAACyK,aAAa,CAACC,MAAM,CAAC,EAAE,UAACC,IAAI;kBAClD,IAAI,CAACA,IAAI,EAAE,OAAO,IAAI;kBACtB,OAAAlE,QAAA,KACKkE,IAAI;oBACPC,WAAW,EAAE,IAAIrG,IAAI;;iBAExB,CAAC;gBACF;;YAEF,KAAK,oBAAoB;cAAE;;gBAEzBoC,GAAG,CAACwB,mBAAmB,EAAE,UAAC0C,OAAO;kBAAA,OAC/BA,OAAO,CAACC,QAAQ,CAAC9K,EAAE,CAAC0H,WAAW,CAAC6B,UAAU,CAAC,GACvCsB,OAAO,MAAAvD,MAAA,CACHuD,OAAO,GAAE7K,EAAE,CAAC0H,WAAW,CAAC6B,UAAU,EAAC;kBAC5C;;gBAED5C,GAAG,CACDyB,gBAAgB,CAACpI,EAAE,CAAC0H,WAAW,CAAC6B,UAAU,CAAC,EAC3CvJ,EAAE,CAAC0H,WAAW,CACf;gBAED,IAAMV,KAAK,GAAGO,mBAAmB,CAACvH,EAAE,CAAC0H,WAAW,CAAC;;gBAEjDf,GAAG,CACDtF,6BAA6B,CAACrB,EAAE,CAAC0H,WAAW,CAAC6B,UAAU,CAAC,EACxDvC,KAAK,CACN;;gBAEDA,KAAK,CAACtD,OAAO,CAAC,UAACvB,QAAQ;kBACrB,IAAA4I,sBAAA,GAAgBjD,uBAAuB,CACrC9H,EAAE,CAAC0H,WAAuC,EAC1C,CAACvF,QAAQ,CAAC,CACX;oBAHMgD,KAAK,GAAA4F,sBAAA;kBAIZpE,GAAG,CACDnF,wBAAwB,CAAC;oBACvBM,EAAE,EAAE9B,EAAE,CAAC0H,WAAW,CAAC6B,UAAU;oBAC7BpH,QAAQ,EAARA;mBACD,CAAC,EACFgD,KAAK,CACN;iBACF,CAAC;gBACF;;YAEF,KAAK,qBAAqB;cAAE;;gBAE1BwB,GAAG,CAACyB,gBAAgB,CAACpI,EAAE,CAAC0H,WAAW,CAAC6B,UAAU,CAAC,EAAE,UAACoB,IAAI;kBAAA,OAAAlE,QAAA,KACjDkE,IAAI,EACJ3K,EAAE,CAAC0H,WAAW;iBACjB,CAAC;;gBAEH,IAAI1H,EAAE,CAAC0H,WAAW,CAAC4B,KAAK,EAAE;kBACxB3C,GAAG,CAACsB,YAAY,EAAE,UAAC+C,MAAM;oBAAA,OACvBA,MAAM,KAAKhL,EAAE,CAAC0H,WAAW,CAAC6B,UAAU,GAChCvJ,EAAE,CAAC0H,WAAW,CAAC6B,UAAU,GACzByB,MAAM;oBACX;;gBAGH,IAAMhE,MAAK,GAAGO,mBAAmB,CAACvH,EAAE,CAAC0H,WAAW,CAAC;gBACjD,IAAMuD,QAAQ,GAAGrJ,GAAG,CAClBP,6BAA6B,CAACrB,EAAE,CAAC0H,WAAW,CAAC6B,UAAU,CAAC,CACzD;;gBAED5C,GAAG,CACDtF,6BAA6B,CAACrB,EAAE,CAAC0H,WAAW,CAAC6B,UAAU,CAAC,EACxD,UAACoB,IAAI;kBAAA,OAAMhH,eAAe,CAACgH,IAAI,EAAE3D,MAAK,CAAC,GAAG2D,IAAI,GAAG3D,MAAK;iBAAC,CACxD;;gBAEDiE,QAAQ,CACLpD,MAAM,CAAC,UAACL,CAAC;kBAAA,OAAK,CAACR,MAAK,CAAC8D,QAAQ,CAACtD,CAAC,CAAC;kBAAC,CACjC9D,OAAO,CAAC,UAACvB,QAAQ;kBAChB8H,KAAK,CACHzI,wBAAwB,CAAC;oBACvBM,EAAE,EAAE9B,EAAE,CAAC0H,WAAW,CAAC6B,UAAU;oBAC7BpH,QAAQ,EAARA;mBACD,CAAC,CACH;iBACF,CAAC;;gBAEJ6E,MAAK,CAACtD,OAAO,CAAC,UAACvB,QAAQ;kBACrB,IAAA+I,sBAAA,GAAgBpD,uBAAuB,CACrC9H,EAAE,CAAC0H,WAAuC,EAC1C,CAACvF,QAAQ,CAAC,CACX;oBAHMgD,KAAK,GAAA+F,sBAAA;kBAIZvE,GAAG,CACDnF,wBAAwB,CAAC;oBACvBM,EAAE,EAAE9B,EAAE,CAAC0H,WAAW,CAAC6B,UAAU;oBAC7BpH,QAAQ,EAARA;mBACD,CAAC,EACF,UAACwI,IAAI;oBAAA,OAAMhH,eAAe,CAACgH,IAAI,EAAExF,KAAK,CAAC,GAAGwF,IAAI,GAAGxF,KAAK;mBAAC,CACxD;iBACF,CAAC;gBACF;;YAEF,KAAK,kBAAkB;cAAE;;gBAEvBwB,GAAG,CAACwB,mBAAmB,EAAE,UAAC0C,OAAO;kBAAA,OAC/BA,OAAO,CAACC,QAAQ,CAAC9K,EAAE,CAAC0H,WAAW,CAAC6B,UAAU,CAAC,MAAAjC,MAAA,CAElCuD,OAAO,CAAChD,MAAM,CACf,UAAC/F,EAAE;oBAAA,OAAKA,EAAE,KAAK9B,EAAE,CAAC0H,WAAW,CAAC6B,UAAU;oBACzC,IAEHsB,OAAO;kBACZ;;gBAEDZ,KAAK,CAAC7B,gBAAgB,CAACpI,EAAE,CAAC0H,WAAW,CAAC6B,UAAU,CAAC,CAAC;gBAElD,IAAM0B,SAAQ,GAAGrJ,GAAG,CAClBP,6BAA6B,CAACrB,EAAE,CAAC0H,WAAW,CAAC6B,UAAU,CAAC,CACzD;;gBAED0B,SAAQ,CAACvH,OAAO,CAAC,UAACvB,QAAQ;kBACxB8H,KAAK,CACHzI,wBAAwB,CAAC;oBACvBM,EAAE,EAAE9B,EAAE,CAAC0H,WAAW,CAAC6B,UAAU;oBAC7BpH,QAAQ,EAARA;mBACD,CAAC,CACH;iBACF,CAAC;;gBAEF8H,KAAK,CACH5I,6BAA6B,CAACrB,EAAE,CAAC0H,WAAW,CAAC6B,UAAU,CAAC,CACzD;gBACD;;;SAGL,CAAC;OACH,CAAC;KACH;KACH,EAAE,CACH,EACD,GAAG,EACH,IAAI,CACL;EAEDzG,sBAAsB,CACpB,CACE,2BAA2B,EAC3B,6BAA6B,EAC7B,6BAA6B,CAC9B,EACDmG,iBAAiB,CACf,UAAAkC,MAAA;IAAA,IAAGhC,iBAAiB,GAAAgC,MAAA,CAAjBhC,iBAAiB;IAAA,OAClB,UAACmB,IAAI;MACHnB,iBAAiB,CAAC,UAAAiC,MAAA;YAAGnB,KAAK,GAAAmB,MAAA,CAALnB,KAAK;UAAEtD,GAAG,GAAAyE,MAAA,CAAHzE,GAAG;QAC7B2D,IAAI,CAAC5G,OAAO,CAAC,UAAC1D,EAAE;UACd,QAAQA,EAAE,CAACwK,MAAM;YACf,KAAK,2BAA2B;cAC9B7D,GAAG,CAAC0B,wBAAwB,EAAE,UAACgD,GAAG;gBAChC,IAAI,CAACA,GAAG,CAACP,QAAQ,CAAC9K,EAAE,CAAC0H,WAAW,CAAC5F,EAAE,CAAC,EAAE;kBACpC,UAAAwF,MAAA,CAAW+D,GAAG,GAAErL,EAAE,CAAC0H,WAAW,CAAC5F,EAAE;;gBAEnC,OAAOuJ,GAAG;eACX,CAAC;cACF1E,GAAG,CACD2B,uBAAuB,CAACtI,EAAE,CAAC0H,WAAW,CAAC5F,EAAE,CAAC,EAC1C9B,EAAE,CAAC0H,WAAW,CACf;cACD;YACF,KAAK,6BAA6B;cAChCf,GAAG,CACD2B,uBAAuB,CAACtI,EAAE,CAAC0H,WAAW,CAAC5F,EAAE,CAAC,EAC1C9B,EAAE,CAAC0H,WAAW,CACf;cACD;YACF,KAAK,6BAA6B;cAChCf,GAAG,CAAC0B,wBAAwB,EAAE,UAACgD,GAAG;gBAAA,OAChCA,GAAG,CAACxD,MAAM,CAAC,UAACyD,EAAE;kBAAA,OAAKA,EAAE,KAAKtL,EAAE,CAAC0H,WAAW,CAAC5F,EAAE;kBAAC;gBAC7C;cACDmI,KAAK,CAAC3B,uBAAuB,CAACtI,EAAE,CAAC0H,WAAW,CAAC5F,EAAE,CAAC,CAAC;cACjD;;SAEL,CAAC;OACH,CAAC;KACH;KACH,EAAE,CACH,EACD,GAAG,EACH,IAAI,CACL;EAED,OAAOyJ,0CAAG1C,QAAQ,CAAI;AACxB,CAAC;;AC7ZD;;;;AAIA,IAAa2C,iBAAiB,GAAG,SAApBA,iBAAiBA;EAC5B,IAAMC,OAAO,GAAGlJ,cAAc,CAAC0F,YAAY,CAAC;EAC5C1I,aAAa,CAACkM,OAAO,CAAC;EACtB,OAAOA,OAAO;AAChB,CAAC;;ACMD,IAAMC,UAAU,GAAG,SAAbA,UAAUA;EAAA,OAAS,IAAI;AAAA;AAE7B;;;AAGA,IAAaC,kBAAkB,GAAG,SAArBA,kBAAkBA,CAAAC,KAAA;gCAGH,EAAE,GAAAA,KAAA;IAAAC,WAAA,GAAAhK,IAAA,CAF5BgG,MAAM;IAANA,MAAM,GAAAgE,WAAA,cAAGH,UAAU,GAAAG,WAAA;IAAAC,gBAAA,GAAAjK,IAAA,CACnBkK,WAAW;IAAXA,WAAW,GAAAD,gBAAA,cAAG,KAAK,GAAAA,gBAAA;EAEnB,IAAME,cAAc,GAAGR,iBAAiB,EAAE;EAC1C,IAAMS,cAAc,GAAG1J,cAAc,CAACwF,aAAa,CAAC;EACpD,IAAMmE,gBAAgB,GAAGH,WAAW,IAAIE,cAAc,KAAKD,cAAc;EACzE,IAAMG,aAAa,GAAG,EAACtE,MAAM,YAANA,MAAM,CAAGoE,cAAc,CAAC;EAC/C,IAAMG,kBAAkB,GAAG,CAACF,gBAAgB,IAAI,CAACC,aAAa;EAC9D,IAAA/L,SAAA,GAAgCC,QAAQ,CACtC+L,kBAAkB,GAAGH,cAAc,GAAG,IAAI,CAC3C;IAFMI,QAAQ,GAAAjM,SAAA;IAAEkM,WAAW,GAAAlM,SAAA;EAI5BQ,SAAS,CAAC;IACR,IAAIsL,gBAAgB,IAAIC,aAAa,EAAE;IACvCG,WAAW,CAACL,cAAc,CAAC;GAC5B,EAAE,CAACE,aAAa,EAAED,gBAAgB,EAAED,cAAc,CAAC,CAAC;EAErD1M,aAAa,CAAC8M,QAAQ,CAAC;EAEvB,OAAOA,QAAQ;AACjB,CAAC;;AC3CM,IAAME,UAAU,GAAG,SAAbA,UAAUA,CAAIC,UAAoC;EAAA,OAC7D,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC1B,QAAQ,CAAC0B,UAAU,CAAC;AAAA;;AC0CzC;;;AAGA,AAAO,IAAMC,oCAAoC,gBAAGlG,mBAAmB,CAMrE;EACAhF,GAAG,EAAEH,aAAa,GAAG,iCAAiC;EACtDkF,MAAM,EAAE3C,eAAe;EACvB/B,GAAG,EACD,SAAAA,IAAAC,IAAA;IAAA,IAAGgG,MAAM,GAAAhG,IAAA,CAANgG,MAAM;MAAE6E,IAAI,GAAA7K,IAAA,CAAJ6K,IAAI;IAAA,OACf,UAAA1K,KAAA;UAAGJ,GAAG,GAAAI,KAAA,CAAHJ,GAAG;MACJ,IAAM+G,GAAG,GAAG/G,GAAG,CAACuG,mBAAmB,CAAC;MACpC,OAAOQ,GAAG,CACPd,MAAM,CAAC,UAAC/F,EAAE;QACT,QAAQ+F,MAAM;;;;UAIZ,KAAK,OAAO;UACZ,KAAK,OAAO;UACZ,KAAK,QAAQ;YAAE;cACb,OAAOjG,GAAG,CAACJ,wBAAwB,CAAC;gBAAEM,EAAE,EAAFA,EAAE;gBAAEK,QAAQ,EAAE0F;eAAQ,CAAC,CAAC;;UAEhE,KAAK,QAAQ;YAAE;cACb,OAAO,CAACjG,GAAG,CAACJ,wBAAwB,CAAC;gBAAEM,EAAE,EAAFA,EAAE;gBAAEK,QAAQ,EAAE;eAAS,CAAC,CAAC;;UAElE,KAAK,QAAQ;YAAE;cACb,IAAAwK,IAAA,GAA6C/K,GAAG,CAC9CF,0BAA0B,CAAC;kBACzBI,EAAE,EAAFA,EAAE;kBACFC,UAAU,EAAE,CACV,0BAA0B,EAC1B,0BAA0B;iBAE7B,CAAC,CACH;gBARM6K,gBAAgB,GAAAD,IAAA;gBAAEE,gBAAgB,GAAAF,IAAA;cASzC,OACE,CAACJ,UAAU,CAACK,gBAAgB,CAAC,IAAI,CAACL,UAAU,CAACM,gBAAgB,CAAC;;UAGlE;YACE,OAAO,IAAI;;OAEhB,CAAC,CACDH,IAAI,CAAC,UAACI,GAAG,EAAEC,GAAG;QACb,QAAQL,IAAI;UACV,KAAK,WAAW;UAChB,KAAK,YAAY;UACjB,KAAK,SAAS;UACd,KAAK,WAAW;YAAE;cAChB,IAAAM,KAAA,GAAgBpL,GAAG,CACjBF,0BAA0B,CAAC;kBAAEI,EAAE,EAAEgL,GAAG;kBAAE/K,UAAU,EAAE,CAAC2K,IAAI;iBAAG,CAAC,CAC5D;gBAFMO,KAAK,GAAAD,KAAA;cAGZ,IAAAE,KAAA,GAAgBtL,GAAG,CACjBF,0BAA0B,CAAC;kBAAEI,EAAE,EAAEiL,GAAG;kBAAEhL,UAAU,EAAE,CAAC2K,IAAI;iBAAG,CAAC,CAC5D;gBAFMS,KAAK,GAAAD,KAAA;cAGZ,IAAID,KAAK,KAAKG,SAAS,IAAID,KAAK,KAAKC,SAAS,EAAE;gBAC9C,IAAIH,KAAK,KAAKG,SAAS,EAAE,OAAO,CAAC,CAAC;gBAClC,IAAID,KAAK,KAAKC,SAAS,EAAE,OAAO,CAAC;gBACjC,IAAIH,KAAK,GAAGE,KAAK,EAAE,OAAO,CAAC;gBAC3B,IAAIF,KAAK,GAAGE,KAAK,EAAE,OAAO,CAAC,CAAC;;cAE9B,OAAO,CAAC;;UAEV;YACE,OAAO,CAAC;;OAEb,CAAC;KACL;;CACJ,CAAC;AAWF;;;;AAIA,IAAaE,iBAAiB,GAAG,SAApBA,iBAAiBA,CAAAzB,KAAA;iCAOH,EAAE,GAAAA,KAAA;IAN3B/D,MAAM,GAAAhF,KAAA,CAANgF,MAAM;IACNyF,qBAAqB,GAAAzK,KAAA,CAArByK,qBAAqB;IACrBC,mBAAmB,GAAA1K,KAAA,CAAnB0K,mBAAmB;IACnBC,iBAAiB,GAAA3K,KAAA,CAAjB2K,iBAAiB;IACjBC,oBAAoB,GAAA5K,KAAA,CAApB4K,oBAAoB;IACpBf,IAAI,GAAA7J,KAAA,CAAJ6J,IAAI;;;;;EAMJ,IAAMgB,oBAAoB,GAAGnL,cAAc,CACzCkK,oCAAoC,CAAC;IACnC5E,MAAM,EAAE,OAAOA,MAAM,KAAK,QAAQ,GAAGA,MAAM,GAAG,IAAI;IAClD6E,IAAI,EAAE,OAAOA,IAAI,KAAK,QAAQ,GAAGA,IAAI,GAAG;GACzC,CAAC,CACH;EAED,IAAMiB,kBAAkB,GACtB,OAAO9F,MAAM,KAAK,UAAU,IAAI,OAAO6E,IAAI,KAAK,UAAU;EAE5D,IAAMkB,oBAAoB,GAAGzK,WAAW,CACtC,UAAC+G,QAAkB;IACjB;;IAEE,OAAOrC,MAAM,KAAK,UAAU,IAC5B,OAAO6E,IAAI,KAAK,UAAU,EAE1B,OAAO,EAAE;IAEX,IAAMtD,YAAY,GAA+BsE,oBAAoB,CAACzL,GAAG,CACvE,UAACH,EAAE;MAAA,OACDoI,QAAQ,CAAC2D,WAAW,CAACzF,gBAAgB,CAACtG,EAAE,CAAC,CAAC,CACvCgM,QAAoC;MAC1C;IAED,OACE1E;;;;KAIGvB,MAAM,CAACkG,OAAO;;KAEdlG,MAAM,CAAC,OAAOA,MAAM,KAAK,UAAU,GAAGA,MAAM,GAAG;MAAA,OAAM,IAAI;;;KAEzD6E,IAAI,CAAC,OAAOA,IAAI,KAAK,UAAU,GAAGA,IAAI,GAAG;MAAA,OAAM,CAAC;;;KAEhDzK,GAAG,CAAC,UAACuF,CAAC;MAAA,OAAKA,CAAC,CAAC+B,UAAU;;;;KAGvB1B,MAAM,CAACkG,OAAO,CAAC;GAErB,EACD,CAAClG,MAAM,EAAE6F,oBAAoB,EAAEhB,IAAI,CAAC,CACrC;EAED,IAAAtM,SAAA,GAAkCC,QAAQ,CAAW,EAAE,CAAC;IAAjD2N,SAAS,GAAA5N,SAAA;IAAE6N,YAAY,GAAA7N,SAAA;EAE9B,IAAM8N,oBAAoB,GAAGjF,iBAAiB,CAC5C,UAAAC,KAAA;IAAA,IAAGgB,QAAQ,GAAAhB,KAAA,CAARgB,QAAQ;IAAA,OACT;MACE,IAAI,CAACyD,kBAAkB,EAAE;MACzB,IAAMQ,MAAM,GAAGP,oBAAoB,CAAC1D,QAAQ,CAAC;MAC7C,IAAIvG,eAAe,CAACwK,MAAM,EAAEH,SAAS,CAAC,EAAE;MACxCC,YAAY,CAACE,MAAM,CAAC;KACrB;KACH,CAACH,SAAS,EAAEJ,oBAAoB,EAAED,kBAAkB,CAAC,CACtD;EAED/M,SAAS,CAAC;IACRsN,oBAAoB,EAAE;GACvB,EAAE,CAACA,oBAAoB,CAAC,CAAC;EAE1BpL,sBAAsB,CACpB,CACE,oBAAoB,EACpB,qBAAqB,EACrB,uBAAuB,EACvB,kBAAkB,CACnB,EACDK,WAAW,CACT,UAACmH,IAAI;IACH,IAAI,CAACA,IAAI,CAAClH,MAAM,EAAE;IAClBkH,IAAI,CAAC5G,OAAO,CAAC,UAAC1D,EAAE;MACd,QAAQA,EAAE,CAACwK,MAAM;QACf,KAAK,oBAAoB;UACvB+C,mBAAmB,oBAAnBA,mBAAmB,CAAGvN,EAAE,CAAC;UACzB;QACF,KAAK,qBAAqB;UACxByN,oBAAoB,oBAApBA,oBAAoB,CAAGzN,EAAE,CAAC;UAC1B;QACF,KAAK,uBAAuB;UAC1BsN,qBAAqB,oBAArBA,qBAAqB,CAAGtN,EAAE,CAAC;UAC3B;QACF,KAAK,kBAAkB;UACrBwN,iBAAiB,oBAAjBA,iBAAiB,CAAGxN,EAAE,CAAC;UACvB;;KAEL,CAAC;IACFkO,oBAAoB,EAAE;GACvB,EACD,CACEA,oBAAoB,EACpBZ,qBAAqB,EACrBC,mBAAmB,EACnBC,iBAAiB,EACjBC,oBAAoB,CACrB,CACF,CACF;EAED,IAAMW,MAAM,GACV,OAAOvG,MAAM,KAAK,UAAU,IAAI,OAAO6E,IAAI,KAAK,UAAU,GACtDsB,SAAS,GACTN,oBAAoB;EAE1BnO,aAAa,CAAC6O,MAAM,CAAC;EAErB,OAAOA,MAAM;AACf,CAAC;;ACpOD,IAAMC,iBAAiB,gBAAGrI,aAAa,CAAC;EACtCzE,GAAG,EAAEH,aAAa,GAAG,eAAe;EACpCkF,MAAM,EAAE3C,eAAe;EACvB/B,GAAG,EAAE,SAAAA,IAAAC,IAAA;QAAGD,IAAG,GAAAC,IAAA,CAAHD,GAAG;IACT,IAAM0M,SAAS,GAAG1M,IAAG,CACnB6K,oCAAoC,CAAC;MAAE5E,MAAM,EAAE,QAAQ;MAAE6E,IAAI,EAAE;KAAM,CAAC,CACvE;IACD,OAAO4B,SAAS,CAACrM,GAAG,CAAc,UAACH,EAAE;MACnC,OAAO;QACLwH,KAAK,EAAE1H,IAAG,CAACJ,wBAAwB,CAAC;UAAEM,EAAE,EAAFA,EAAE;UAAEK,QAAQ,EAAE;SAAS,CAAC,CAAC;QAC/DoM,WAAW,EAAE3M,IAAG,CACdJ,wBAAwB,CAAC;UAAEM,EAAE,EAAFA,EAAE;UAAEK,QAAQ,EAAE;SAAsB,CAAC,CACjE;QACDqM,WAAW,EAAE5M,IAAG,CACdJ,wBAAwB,CAAC;UAAEM,EAAE,EAAFA,EAAE;UAAEK,QAAQ,EAAE;SAAsB,CAAC,CACjE;QACDsM,QAAQ,EAAK3M,EAAE,YAAS;QACxByH,UAAU,EAAEzH;OACb;KACF,CAAC;;CAEL,CAAC;AAcF;;;AAGA,IAAa4M,cAAc,GAAG,SAAjBA,cAAcA,CAAA9C,KAAA;iCAIH,EAAE,GAAAA,KAAA;IAHxB+C,OAAO,GAAA3M,KAAA,CAAP2M,OAAO;IACPC,yBAAyB,GAAA5M,KAAA,CAAzB4M,yBAAyB;IACzBC,yBAAyB,GAAA7M,KAAA,CAAzB6M,yBAAyB;EAEzB,IAAMxP,KAAK,GAAGD,QAAQ,EAAE;EAExB,IAAM0P,gBAAgB,GAAG3L,WAAW,CAClC;sCAAI4L,IAA+C,OAAAvM,KAAA,CAAAwM,IAAA,GAAAC,IAAA,MAAAA,IAAA,GAAAD,IAAA,EAAAC,IAAA;MAA/CF,IAA+C,CAAAE,IAAA,IAAAC,SAAA,CAAAD,IAAA;;IACjD5P,KAAK,oBAALA,KAAK,CAAEyP,gBAAgB,CAAAzH,KAAA,CAAvBhI,KAAK,EAAsB0P,IAAI,CAAC;GACjC,EACD,CAAC1P,KAAK,CAAC,CACR;EAED,IAAM8P,eAAe,GAAGhM,WAAW,CACjC;uCAAI4L,IAA8C,OAAAvM,KAAA,CAAA4M,KAAA,GAAAC,KAAA,MAAAA,KAAA,GAAAD,KAAA,EAAAC,KAAA;MAA9CN,IAA8C,CAAAM,KAAA,IAAAH,SAAA,CAAAG,KAAA;;IAChDhQ,KAAK,oBAALA,KAAK,CAAE8P,eAAe,CAAA9H,KAAA,CAAtBhI,KAAK,EAAqB0P,IAAI,CAAC;GAChC,EACD,CAAC1P,KAAK,CAAC,CACR;EAEDU,aAAa,CACX,4BAA4B,EAC5BoD,WAAW,CACT;IAAA,OAAMyL,yBAAyB,oBAAzBA,yBAAyB,EAAI;KACnC,CAACA,yBAAyB,CAAC,CAC5B,CACF;EACD7O,aAAa,CACX,4BAA4B,EAC5BoD,WAAW,CACT;IAAA,OAAM0L,yBAAyB,oBAAzBA,yBAAyB,EAAI;KACnC,CAACA,yBAAyB,CAAC,CAC5B,CACF;EACD9O,aAAa,CACX,gBAAgB,EAChBoD,WAAW,CACT,UAACnD,EAAE;IACD,IAAIA,EAAE,CAACsP,IAAI,KAAK,oBAAoB,EAAE;IACtCX,OAAO,oBAAPA,OAAO,CAAG3O,EAAsC,CAAC;GAClD,EACD,CAAC2O,OAAO,CAAC,CACV,CACF;EAED,IAAMY,OAAO,GAAGhN,cAAc,CAAC8L,iBAAiB,CAAC;EAEjD,IAAMD,MAAM,GAAG;IACboB,eAAe,EAAED,OAAO,CAACE,IAAI,CAAC,UAACC,CAAC;MAAA,OAAKA,CAAC,CAACpG,KAAK;MAAC;IAC7CiG,OAAO,EAAPA,OAAO;IACPT,gBAAgB,EAAhBA,gBAAgB;IAChBK,eAAe,EAAfA;GACD;EAED5P,aAAa,CAAC6O,MAAM,CAAC;EAErB,OAAOA,MAAM;AACf,CAAC;;AC7GD;;;;;;;;AAQA,IAAauB,aAAa,GAAG,SAAhBA,aAAaA,CACxBtN,aAAqB,EACrBiN;MAAAA;IAAAA,OAAkB,OAAO;;EAEzB,IAAM9C,UAAU,GAAGpK,sBAAsB,CAACC,aAAa,cAAYiN,IAAM,CAAC;EAE1E,IAAMlB,MAAM,GAAoB5B,UAAU,GAAA/F,QAAA,KAEjC+F,UAAU;IACboD,KAAK,EAAErD,UAAU,CAACC,UAAU,CAACqD,KAAK;OAEpC;IACED,KAAK,EAAE,IAAI;IACXE,eAAe,EAAE1C,SAAS;IAC1ByC,KAAK,EAAE,KAAK;IACZE,UAAU,EAAE;GACb;EAELxQ,aAAa,CAAC6O,MAAM,CAAC;EAErB,OAAOA,MAAM;AACf,CAAC;;ACzCD;;;;;AAMA,AAEA,SAAS4B,YAAYA;oCAAOC,IAAoB,OAAAzN,KAAA,CAAAwM,IAAA,GAAAC,IAAA,MAAAA,IAAA,GAAAD,IAAA,EAAAC,IAAA;IAApBgB,IAAoB,CAAAhB,IAAA,IAAAC,SAAA,CAAAD,IAAA;;EAC9C,OAAO9L,WAAW,CAChB,UAAC+M,OAAU;IACT,KAAK,IAAItN,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGqN,IAAI,CAAC7M,MAAM,EAAER,CAAC,EAAE,EAAE;MACpC,IAAMuN,GAAG,GAAGF,IAAI,CAACrN,CAAC,CAAC;MACnB,IAAI,OAAOuN,GAAG,KAAK,UAAU,EAAEA,GAAG,CAACD,OAAO,CAAC,CAAC,KACvC,IAAIC,GAAG,IAAI,OAAOA,GAAG,KAAK,QAAQ,EACpCA,GAAiC,CAACtP,OAAO,GAAGqP,OAAO;;GAEzD;;EAEDD,IAAI,CACL;AACH;;;ACrBA,IAsBaG,eAAe,gBAAGC,IAAI,eACjCC,UAAU,CACR,UAAAzO,IAAA,EAAwDsO,GAAG;MAAxDI,YAAY,GAAA1O,IAAA,CAAZ0O,YAAY;IAAEC,SAAS,GAAA3O,IAAA,CAAT2O,SAAS;IAAAC,SAAA,GAAA5O,IAAA,CAAEyN,IAAI;IAAJA,IAAI,GAAAmB,SAAA,cAAG,OAAO,GAAAA,SAAA;IAAKC,KAAK,GAAAC,6BAAA,CAAA9O,IAAA,EAAA+O,SAAA;EAClD,IAAMC,OAAO,GAAGpQ,MAAM,CAAmB,IAAI,CAAC;EAC9C,IAAMqQ,KAAK,GAAGnB,aAAa,CAACa,SAAS,EAAElB,IAAI,CAAC;EAC5C,IAAMyB,QAAQ,GAAGf,YAAY,CAAmBa,OAAO,EAAEV,GAAG,CAAC;EAC7D,IAAMa,eAAe,GAAGF,KAAK,oBAALA,KAAK,CAAEf,UAAU;;;;EAKzCnP,SAAS,CAAC;IACR,IAAMqQ,QAAQ,GAAGJ,OAAO,CAAChQ,OAAO;IAChC,IAAI,CAACoQ,QAAQ,IAAI,EAACH,KAAK,YAALA,KAAK,CAAEhB,eAAe,GAAE;IAC1C,IAAIoB,WAA0C;IAC9C,IAAMC,aAAa,GAAG,SAAhBA,aAAaA;MACjBF,QAAQ,CAACG,IAAI,EAAE,SAAM,CAAC,UAACnO,CAAC;QACtBsN,YAAY,oBAAZA,YAAY,CAAG;UACbC,SAAS,EAATA,SAAS;UACTa,MAAM,EAAEJ,QAAQ;UAChB3B,IAAI,EAAJA,IAAI;UACJgC,OAAO,EAAErO,CAAC,CAACqO,OAAO;UAClB7I,IAAI,EAAExF,CAAC,CAACwF;SACT,CAAC;OACH,CAAC;KACH;IACD,IAAM8I,UAAU,GAAG,SAAbA,UAAUA;MACdrQ,YAAY,CAACgQ,WAAW,CAAC;KAC1B;IACDD,QAAQ,CAACO,gBAAgB,CAAC,SAAS,EAAEL,aAAa,CAAC;IACnDF,QAAQ,CAACO,gBAAgB,CAAC,MAAM,EAAED,UAAU,CAAC;IAC7CN,QAAQ,CAACQ,SAAS,GAAG,IAAI3N,WAAW,CAAC,CAACgN,KAAK,oBAALA,KAAK,CAAEhB,eAAe,CAAC,CAAC;IAE9D,OAAO;MACLmB,QAAQ,oBAARA,QAAQ,CAAES,mBAAmB,CAAC,SAAS,EAAEP,aAAa,CAAC;MACvDF,QAAQ,oBAARA,QAAQ,CAAES,mBAAmB,CAAC,MAAM,EAAEH,UAAU,CAAC;KAClD;GACF,EAAE,CAACT,KAAK,oBAALA,KAAK,CAAEhB,eAAe,EAAES,YAAY,EAAEC,SAAS,EAAElB,IAAI,CAAC,CAAC;EAE3D,OACE/D;IACEoG,QAAQ;IACRxB,GAAG,EAAEY;KACDL,KAAK;uBACQF,SAAS;uBACTlB,IAAI;uBACJ0B;KACjB;AAEN,CAAC,CACF,CACF;AACDZ,eAAe,CAACwB,WAAW,GAAG,iBAAiB;;ICFlCC,UAAU,gBAAGxB,IAAI,eAC5BC,UAAU,CACR,UAAAzO,IAAA,EAOEsO,GAAG;mCALD2B,0BAA0B;IAA1BA,0BAA0B,GAAAC,qBAAA,cAAG,KAAK,GAAAA,qBAAA;IAAAC,gBAAA,GAAAnQ,IAAA,CAClCoQ,WAAW;IAAXA,WAAW,GAAAD,gBAAA,cAAG,CAAC,GAAAA,gBAAA;IACfzB,YAAY,GAAA1O,IAAA,CAAZ0O,YAAY;IAAA2B,qBAAA,GAAArQ,IAAA,CACZsQ,oBAAoB;IAApBA,oBAAoB,GAAAD,qBAAA,cAAG,KAAK,GAAAA,qBAAA;EAI9B,IAAM7S,KAAK,GAAGD,QAAQ,EAAE;EACxB,IAAAgB,SAAA,GAAgCC,QAAQ,CACtC,IAAImC,KAAK,CAACyP,WAAW,CAAC,CAACG,IAAI,CAAC,EAAE,CAAC,CAChC;IAFMC,QAAQ,GAAAjS,SAAA;IAAEkS,WAAW,GAAAlS,SAAA;EAG5B,IAAAmS,eAAA,GAAoB7D,cAAc,EAAE;IAA5Ba,OAAO,GAAAgD,eAAA,CAAPhD,OAAO;EACf,IAAMvD,cAAc,GAAGR,iBAAiB,EAAE;EAC1C,IAAMgH,eAAe,GAAG7G,kBAAkB,CAAC;IACzCI,WAAW,EAAE;GACd,CAAC;EAEF,IAAM0G,YAAY,GAAGhS,MAAM,CAAiB,IAAI,CAAC;EACjDiS,mBAAmB,CACjBvC,GAAG,EACH;IAAA,OAAO;MACLwC,qBAAqB,EAAE,SAAAA;;QACrB,QAAAC,qBAAA,IAAAC,sBAAA,GACEJ,YAAY,CAAC5R,OAAO,qBAApBgS,sBAAA,CAAsBC,aAAa,8BACPN,eAAe,mCAA6B,CACvE,YAAAI,qBAAA,GAAI,IAAI;OAEZ;MACDG,WAAW,EAAE,SAAAA;;QACX,OAAOvQ,KAAK,CAACwQ,IAAI,EAAAC,sBAAA,IAAAC,sBAAA,GACfT,YAAY,CAAC5R,OAAO,qBAApBqS,sBAAA,CAAsBC,gBAAgB,CAAC,OAAO,CAAC,YAAAF,sBAAA,GAAI,EAAE,CACtD;OACF;MACDG,mBAAmB,EAAE,SAAAA,oBAACtR,EAAE;;QACtB,QAAAuR,sBAAA,IAAAC,sBAAA,GACEb,YAAY,CAAC5R,OAAO,qBAApByS,sBAAA,CAAsBR,aAAa,8BACPhR,EAAE,mCAA6B,CAC1D,YAAAuR,sBAAA,GAAI,IAAI;OAEZ;MACDE,WAAW,EAAE,SAAAA;;QACX,OAAO/Q,KAAK,CAACwQ,IAAI,EAAAQ,sBAAA,IAAAC,sBAAA,GACfhB,YAAY,CAAC5R,OAAO,qBAApB4S,sBAAA,CAAsBN,gBAAgB,CACpC,mCAAmC,CACpC,YAAAK,sBAAA,GAAI,EAAE,CACR;OACF;MACDE,cAAc,EAAE,SAAAA;;QACd,OAAOlR,KAAK,CAACwQ,IAAI,EAAAW,sBAAA,IAAAC,uBAAA,GACfnB,YAAY,CAAC5R,OAAO,qBAApB+S,uBAAA,CAAsBT,gBAAgB,CACpC,sCAAsC,CACvC,YAAAQ,sBAAA,GAAI,EAAE,CACR;OACF;MACDE,sBAAsB,EAAE,SAAAA,uBAAC/R,EAAE;;QACzB,QAAAgS,uBAAA,IAAAC,uBAAA,GACEtB,YAAY,CAAC5R,OAAO,qBAApBkT,uBAAA,CAAsBjB,aAAa,8BACPhR,EAAE,sCAAgC,CAC7D,YAAAgS,uBAAA,GAAI,IAAI;OAEZ;MACDE,yBAAyB,EAAE,SAAAA,0BAAClS,EAAE;;QAC5B,QAAAmS,uBAAA,IAAAC,uBAAA,GACEzB,YAAY,CAAC5R,OAAO,qBAApBqT,uBAAA,CAAsBpB,aAAa,8BACPhR,EAAE,yCAAmC,CAChE,YAAAmS,uBAAA,GAAI,IAAI;;KAGd;GAAC,EACF,CAACzB,eAAe,CAAC,CAClB;EAED,IAAM2B,aAAa,GAAGlL,iBAAiB,CACrC,UAAAjH,KAAA;IAAA,IAAGkI,QAAQ,GAAAlI,KAAA,CAARkI,QAAQ;IAAA;MAAA,IAAArH,KAAA,GAAAsH,iBAAA,CACT,WAAOqG,SAAiB;;;;;QAItB,IAAM4D,sBAAsB,GAAGzO,MAAM,CAACX,MAAM,EAAAqP,mBAAA,GAC1ChV,KAAK,oBAALA,KAAK,CAAE+J,YAAY,EAAE,YAAAiL,mBAAA,GAAI,EAAE,CAC5B,CAACxM,MAAM,CAAC,UAACL,CAAC;UAAA,OAAK,CAACA,CAAC,CAAC8B,KAAK,IAAIyE,OAAO,CAACvG,CAAC,CAAC8M,MAAM,CAACxD,KAAK,CAACf,UAAU,CAAC;UAAC;QAE/D,IAAMwE,YAAY,GAAG,SAAfA,YAAYA,CAAIzS,EAAU;UAAA,OAC9BsS,sBAAsB,CAAC3E,IAAI,CAAC,UAACjI,CAAC;YAAA,OAAKA,CAAC,CAAC+B,UAAU,KAAKzH,EAAE;YAAC;;QAEzD,IAAI,CAACyS,YAAY,CAAC/D,SAAS,CAAC,EAAE;UAC5B,IACEnR,KAAK,IACL,CAACA,KAAK,CAACmV,WAAW,EAAE,IACpB1C,0BAA0B,IAC1B,CAACzS,KAAK,CAACoV,8BAA8B,EAAE,EACvC;YACApV,KAAK,CAACqV,iBAAiB,CAAClE,SAAS,EAAE;cACjCmE,mBAAmB,EAAE;gBACnB7D,KAAK,EAAE;;aAEV,CAAC;WACH,MAAM;YACL;;;QAIJwB,WAAW,CAAC,UAACsC,YAAY;;;UAEvB,IAAIA,YAAY,CAAC9J,QAAQ,CAAC0F,SAAS,CAAC,EAAE,OAAOoE,YAAY;;UAGzD,IAAMC,aAAa,GAAG,SAAhBA,aAAaA,CAAI/S,EAAU;YAAA,OAAK,CAACA,EAAE,IAAI,CAACyS,YAAY,CAACzS,EAAE,CAAC;;UAC9D,IAAI8S,YAAY,CAACnF,IAAI,CAACoF,aAAa,CAAC,EAAE;YACpC,IAAM1Q,GAAG,GAAGyQ,YAAY,CAACE,SAAS,CAACD,aAAa,CAAC;YACjDD,YAAY,CAACzQ,GAAG,CAAC,GAAGqM,SAAS;YAC7B,UAAAlJ,MAAA,CAAWsN,YAAY;;;;UAMzB,IAAMG,QAAQ,GAAGH,YAAY,CAACE,SAAS,CAAC,UAAChT,EAAE;YAAA,OACzCsS,sBAAsB,CAAC3E,IAAI,CACzB,UAACjI,CAAC;cAAA,OAAKA,CAAC,CAAC+B,UAAU,KAAKzH,EAAE,IAAIyK,UAAU,CAAC/E,CAAC,CAAC8M,MAAM,CAACxD,KAAK,CAACjB,KAAK,CAAC;cAC/D;YACF;UACD,IAAIkF,QAAQ,IAAI,CAAC,EAAE;YACjBH,YAAY,CAACG,QAAQ,CAAC,GAAGvE,SAAS;YAClC,UAAAlJ,MAAA,CAAWsN,YAAY;;;UAIzB,IAAMI,cAAc,GAAGZ,sBAAsB,CAC1CvM,MAAM,CACL,UAACL,CAAC;YAAA;;cAEAoN,YAAY,CAAC9J,QAAQ,CAACtD,CAAC,CAAC+B,UAAU,CAAC;;cAEnC/B,CAAC,CAAC+B,UAAU,KAAKiJ;;YACpB,CACA9F,IAAI,CAAC,UAAC9I,CAAC,EAAEC,CAAC;;YACT,IAAMoR,WAAW,IAAAC,qBAAA,GACfhL,QAAQ,CAAC2D,WAAW,CAClBrM,wBAAwB,CAAC;cACvBM,EAAE,EAAE8B,CAAC,CAAC2F,UAAU;cAChBpH,QAAQ,EAAE;aACX,CAAC,CACH,CAAC2L,QAAQ,YAAAoH,qBAAA,GAAI,IAAI3Q,IAAI,CAAC,YAAY,CAAC;YACtC,IAAM4Q,WAAW,IAAAC,sBAAA,GACflL,QAAQ,CAAC2D,WAAW,CAClBrM,wBAAwB,CAAC;cACvBM,EAAE,EAAE+B,CAAC,CAAC0F,UAAU;cAChBpH,QAAQ,EAAE;aACX,CAAC,CACH,CAAC2L,QAAQ,YAAAsH,sBAAA,GAAI,IAAI7Q,IAAI,CAAC,YAAY,CAAC;YACtC,IAAI0Q,WAAW,GAAGE,WAAW,EAAE,OAAO,CAAC;YACvC,IAAIF,WAAW,GAAGE,WAAW,EAAE,OAAO,CAAC,CAAC;YACxC,OAAO,CAAC;WACT,CAAC;;UAGJ,IAAI,CAACH,cAAc,CAAC5R,MAAM,EAAE;;YAE1B,IAAMiS,WAAU,GAAGT,YAAY,CAACE,SAAS,CACvC,UAAChT,EAAE;cAAA,OAAKA,EAAE,KAAK0Q,eAAe;cAC/B;YACDoC,YAAY,CAACS,WAAU,CAAC,GAAG7E,SAAS;YACpC,UAAAlJ,MAAA,CAAWsN,YAAY;;;UAIzB,IAAMS,UAAU,GAAGT,YAAY,CAACU,OAAO,EAAAC,gBAAA,GACrCP,cAAc,CAAC,CAAC,CAAC,qBAAjBO,gBAAA,CAAmBhM,UAAU,CAC9B;UACDqL,YAAY,CAACS,UAAU,CAAC,GAAG7E,SAAS;UACpC,UAAAlJ,MAAA,CAAWsN,YAAY;SACxB,CAAC;OACH;MAAA,iBAAAY,EAAA;QAAA,OAAA3S,KAAA,CAAAwE,KAAA,OAAA6H,SAAA;;;KACH,CAACsD,eAAe,EAAEV,0BAA0B,EAAEzS,KAAK,CAAC,CACrD;;;;EAKD,IAAMoW,aAAa,GAAGtS,WAAW,CAAC,UAACqN,SAAiB;IAClD8B,WAAW,CAAC,UAACsC,YAAY;MACvB,IAAI,CAACA,YAAY,CAAC9J,QAAQ,CAAC0F,SAAS,CAAC,EAAE,OAAOoE,YAAY;MAC1D,IAAMc,WAAW,MAAApO,MAAA,CAAOsN,YAAY,CAAC;MACrC,IAAMzQ,GAAG,GAAGuR,WAAW,CAACJ,OAAO,CAAC9E,SAAS,CAAC;MAC1CkF,WAAW,CAACvR,GAAG,CAAC,GAAG,EAAE;MACrB,OAAOuR,WAAW;KACnB,CAAC;GACH,EAAE,EAAE,CAAC;EAEN5S,sBAAsB,CACpB,CAAC,uBAAuB,EAAE,eAAe,EAAE,kBAAkB,CAAC,EAC9DK,WAAW,CACT,UAACmH,IAAI;IACHA,IAAI,CAAC5G,OAAO,CAAC,UAAC1D,EAAE;MACd,QAAQA,EAAE,CAACwK,MAAM;QACf,KAAK,uBAAuB;UAC1B,IAAIxK,EAAE,CAACyK,aAAa,CAACC,MAAM,KAAKsB,cAAc,EAAE;UAChDmI,aAAa,CAACnU,EAAE,CAACyK,aAAa,CAACC,MAAM,CAAC;UACtC;QACF,KAAK,eAAe;UAClB,IACE1K,EAAE,CAACkE,KAAK,CAACG,IAAI,KAAK,OAAO,IACzBrE,EAAE,CAAC0H,WAAW,IACd,CAAC1H,EAAE,CAAC0H,WAAW,CAAC4B,KAAK,EACrB;YACA6K,aAAa,CAACnU,EAAE,CAAC0H,WAAW,CAAC6B,UAAU,CAAC;;UAE1C;QACF,KAAK,kBAAkB;UACrBkM,aAAa,CAACzV,EAAE,CAAC0H,WAAW,CAAC6B,UAAU,CAAC;UACxC;;KAEL,CAAC;GACH,EACD,CAAC4K,aAAa,EAAEnI,cAAc,EAAEyJ,aAAa,CAAC,CAC/C,EACD,GAAG,CACJ;EAED,IAAME,WAAW,GAAGtI,iBAAiB,CAAC;IACpCxF,MAAM,EAAE1E,WAAW,CACjB,UAACqE,CAA2B;MAAA,IAAAoO,SAAA;MAAA,OAAK7H,OAAO,CAACvG,CAAC,qBAAAoO,SAAA,GAADpO,CAAC,CAAE8M,MAAM,qBAATsB,SAAA,CAAWC,QAAQ,CAAC;OAC7D,EAAE;GAEL,CAAC;EAEF,OACEtK;IAAK4E,GAAG,EAAEsC;KACPJ,QAAQ,CAACpQ,GAAG,CAAC,UAACuO,SAAS,EAAErM,GAAG;IAAA,OAC3BoH,oBAAC6E,eAAe;MACd7O,GAAG,oBAAkB4C,GAAK;MAC1BoM,YAAY,EAAEA,YAAY;MAC1BC,SAAS,EAAEA,SAAS;MACpBlB,IAAI,EAAC;MACL;GACH,CAAC,EACDC,OAAO,CACL1H,MAAM,CAAC,UAACiO,MAAM;IAAA,OAAM3D,oBAAoB,GAAG,IAAI,GAAG,CAAC2D,MAAM,CAACxM,KAAK;GAAC,CAAC,CACjErH,GAAG,CAAC,UAAC6T,MAAM;IAAA,OACVvK,oBAAC6E,eAAe;MACd7O,GAAG,EAAEuU,MAAM,CAACrH,QAAQ;MACpB8B,YAAY,EAAEA,YAAY;MAC1BC,SAAS,EAAEsF,MAAM,CAACvM,UAAU;MAC5B+F,IAAI,EAAC;MACL;GACH,CAAC,EACHqG,WAAW,CAAC1T,GAAG,CAAC,UAACH,EAAE;IAAA,OAClByJ,oBAAC6E,eAAe;MACd7O,GAAG,EAAKO,EAAE,SAAM;MAChByO,YAAY,EAAEA,YAAY;MAC1BC,SAAS,EAAE1O,EAAE;MACbwN,IAAI,EAAC;MACL;GACH,CAAC,CACE;AAEV,CAAC,CACF,CACF;AACDuC,UAAU,CAACD,WAAW,GAAG,YAAY;;;AChVrC,IA8CamE,UAAU,gBAAGzF,UAAU,CAClC,SAASyF,UAAUA,CAAAlU,IAAA,EAYjBsO,GAAG;MAVD6F,UAAU,GAAAnU,IAAA,CAAVmU,UAAU;IAAAC,QAAA,GAAApU,IAAA,CACVqU,GAAG;IAAHA,GAAG,GAAAD,QAAA,cAAG,SAAS,GAAAA,QAAA;IACfE,MAAM,GAAAtU,IAAA,CAANsU,MAAM;IACNC,QAAQ,GAAAvU,IAAA,CAARuU,QAAQ;IAAAC,kBAAA,GAAAxU,IAAA,CACRyU,aAAa;IAAbA,aAAa,GAAAD,kBAAA,cAAG,EAAE,GAAAA,kBAAA;IAClB7F,SAAS,GAAA3O,IAAA,CAAT2O,SAAS;IAAA+F,UAAA,GAAA1U,IAAA,CACT2U,KAAK;IAALA,KAAK,GAAAD,UAAA,cAAG,EAAE,GAAAA,UAAA;IAAA9F,SAAA,GAAA5O,IAAA,CACVyN,IAAI;IAAJA,IAAI,GAAAmB,SAAA,cAAG,OAAO,GAAAA,SAAA;IACXC,KAAK,GAAAC,6BAAA,CAAA9O,IAAA,EAAA+O,WAAA;EAIV,IAAM5E,cAAc,GAAGR,iBAAiB,EAAE;EAC1C,IAAMiL,OAAO,GAAGzK,cAAc,KAAKwE,SAAS;EAC5C,IAAMkG,QAAQ,GAAGpH,IAAI,KAAK,aAAa;EACvC,IAAMqH,UAAU,GAAGF,OAAO,IAAI,CAACC,QAAQ;EAEvC,IAAME,OAAO,GAAGnW,MAAM,CAAmB,IAAI,CAAC;EAC9C,IAAMoW,QAAQ,GAAG7G,YAAY,CAAmB4G,OAAO,EAAEzG,GAAG,CAAC;EAE7D,IAAM2G,UAAU,GAAGnH,aAAa,CAACa,SAAS,EAAElB,IAAI,CAAC;EACjD,IAAMyH,UAAU,GAAGD,UAAU,CAAChH,eAAe;;;;;;;EAO7C,IAAMkH,UAAU,GAAGL,UAAU,IAAID,QAAQ,IAAI,CAACI,UAAU,CAAClH,KAAK;EAC9D,IAAMpD,UAAU,GAAGpK,sBAAsB,CAACoO,SAAS,cAAYlB,IAAM,CAAC;EACtE,IAAM0B,eAAe,GAAGxE,UAAU,oBAAVA,UAAU,CAAEuD,UAAU;;;;EAK9C,IAAMkH,UAAU,GAAGtW,OAAO,CAAC;IACzB,IAAI,OAAOwV,MAAM,KAAK,SAAS,EAAE,OAAOA,MAAM;IAC9C,IAAI,CAACH,UAAU,EAAE,OAAO,KAAK;IAC7B,IAAI,CAACe,UAAU,EAAE,OAAOJ,UAAU;IAElC,IAAMO,kBAAkB,GAAGH,UAAU,CAACI,WAAW,EAAE;IACnD,IAAMC,kBAAkB,GACtB,YAAY,IAAIF,kBAAkB,GAC9BP,UAAU,IAAIO,kBAAkB,CAACG,UAAU,KAAK,MAAM,GACtDV,UAAU;;IAEhB,OAAOS,kBAAkB;GAC1B,EAAE,CAACpB,UAAU,EAAEW,UAAU,EAAER,MAAM,EAAEY,UAAU,CAAC,CAAC;;;;EAKhDnW,SAAS,CAAC,SAAS0W,gBAAgBA;IACjC,IAAMC,KAAK,GAAGX,OAAO,CAAC/V,OAAO;IAC7B,IAAI,CAAC0W,KAAK,EAAE;IAEZ,IAAMC,SAAS,GAAG,SAAZA,SAASA;MACb,IAAMC,OAAO,GAAGF,KAAK,CAACnG,IAAI,EAAE;MAC5B,IAAIqG,OAAO,KAAKrK,SAAS,EAAE;QACzBqK,OAAO,CACJC,IAAI,CAAC;;UAEJH,KAAK,CAACI,QAAQ,GAAG,KAAK;SACvB,CAAC,SACI,CAAC,UAAC5W,KAAK;;UAEXwW,KAAK,CAACI,QAAQ,GAAG,IAAI;UACrB7W,OAAO,CAAC8W,IAAI,CAAC,sBAAsB,EAAE7W,KAAK,CAAC;SAC5C,CAAC;;KAEP;IAED,IAAMoQ,aAAa,GAAG,SAAhBA,aAAaA;MACjB,IAAI,CAACoG,KAAK,CAACM,MAAM,EAAE;MACnBL,SAAS,EAAE;KACZ;IACD,IAAMM,cAAc,GAAG,SAAjBA,cAAcA;MAClBP,KAAK,CAACf,KAAK,CAACuB,SAAS,GAAG,UAAU;KACnC;IACD,IAAMC,cAAc,GAAG,SAAjBA,cAAcA;MAClBT,KAAK,CAACf,KAAK,CAACuB,SAAS,GAAG,EAAE;MAC1B9W,UAAU,CAAC;QACT,IAAIsW,KAAK,CAACM,MAAM,EAAEL,SAAS,EAAE;OAC9B,EAAE,GAAG,CAAC;KACR;IACD,IAAMS,sBAAsB,GAAG,SAAzBA,sBAAsBA;MAC1B,IAAIC,QAAQ,CAACC,eAAe,KAAK,QAAQ,EAAE;MAC3C,IAAI,CAACZ,KAAK,CAACM,MAAM,EAAE;MACnBL,SAAS,EAAE;KACZ;IACDD,KAAK,CAAC/F,gBAAgB,CAAC,SAAS,EAAEL,aAAa,CAAC;IAChDoG,KAAK,CAAC/F,gBAAgB,CAAC,uBAAuB,EAAEsG,cAAc,CAAC;IAC/DP,KAAK,CAAC/F,gBAAgB,CAAC,uBAAuB,EAAEwG,cAAc,CAAC;;;IAI/DE,QAAQ,CAAC1G,gBAAgB,CAAC,kBAAkB,EAAEyG,sBAAsB,CAAC;IACrE,OAAO;MACLV,KAAK,CAAC7F,mBAAmB,CAAC,SAAS,EAAEP,aAAa,CAAC;MACnDoG,KAAK,CAAC7F,mBAAmB,CAAC,uBAAuB,EAAEoG,cAAc,CAAC;MAClEP,KAAK,CAAC7F,mBAAmB,CAAC,uBAAuB,EAAEsG,cAAc,CAAC;MAClEE,QAAQ,CAACxG,mBAAmB,CAC1B,kBAAkB,EAClBuG,sBAAsB,CACvB;KACF;GACF,EAAE,EAAE,CAAC;;;;EAKNrX,SAAS,CACP,SAASwX,eAAeA;IACtB,IAAMb,KAAK,GAAGX,OAAO,CAAC/V,OAAO;IAC7B,IAAI,CAAC0W,KAAK,IAAI,CAACR,UAAU,EAAE;IAC3BQ,KAAK,CAAC9F,SAAS,GAAG,IAAI3N,WAAW,CAAC,CAACiT,UAAU,CAAC,CAAC;IAC/CQ,KAAK,CAACc,IAAI,EAAE;IACZ,OAAO;;MAELd,KAAK,CAAC9F,SAAS,GAAG,IAAI;MACtB8F,KAAK,CAACc,IAAI,EAAE;KACb;GACF,EACD,CAACtB,UAAU,EAAEA,UAAU,oBAAVA,UAAU,CAAEjV,EAAE,CAAC,CAC7B;;;;;EAMDlB,SAAS,CACP,SAAS0X,qBAAqBA;IAC5B,IAAMf,KAAK,GAAGX,OAAO,CAAC/V,OAAO;IAC7B,IAAI,CAACuV,QAAQ,IAAI,CAACmB,KAAK,EAAE;IAEzB,IAAIgB,KAA+C;IACnD,SAASC,YAAYA;MACnB,IAAID,KAAK,EAAEE,oBAAoB,CAACF,KAAK,CAAC;MACtCA,KAAK,GAAGG,qBAAqB,CAAC;QAC5B,IAAMnB,KAAK,GAAGX,OAAO,CAAC/V,OAAO;QAC7B,IAAI,CAAC0W,KAAK,IAAIW,QAAQ,CAACS,MAAM,EAAE;QAC/B,IAAMC,UAAU,GAAGrB,KAAK,CAACqB,UAAU;QACnC,IAAMC,WAAW,GAAGtB,KAAK,CAACsB,WAAW;QACrC,IAAID,UAAU,IAAIC,WAAW,EAAE;UAC7BzC,QAAQ,oBAARA,QAAQ,CAAG;YACT0C,WAAW,EAAEF,UAAU,GAAGC,WAAW;YACrCE,MAAM,EAAEF,WAAW;YACnBG,KAAK,EAAEJ;WACR,CAAC;;OAEL,CAAC;;IAGJJ,YAAY,EAAE;IACdjB,KAAK,CAAC/F,gBAAgB,CAAC,gBAAgB,EAAEgH,YAAY,CAAC;IACtDjB,KAAK,CAAC/F,gBAAgB,CAAC,QAAQ,EAAEgH,YAAY,CAAC;IAE9C,OAAO;MACL,IAAID,KAAK,EAAEE,oBAAoB,CAACF,KAAK,CAAC;MACtChB,KAAK,CAAC7F,mBAAmB,CAAC,gBAAgB,EAAE8G,YAAY,CAAC;MACzDjB,KAAK,CAAC7F,mBAAmB,CAAC,QAAQ,EAAE8G,YAAY,CAAC;KAClD;GACF,EACD,CAACpC,QAAQ,CAAC,CACX;EAED,OACE7K;IACEoG,QAAQ;IACRsH,KAAK;IACLC,WAAW;IACX/I,GAAG,EAAE0G,QAAQ;kBACDJ,OAAO;qBAEJQ,UAAU,IAAI7J,SAAS;qBACvB4J,UAAU,IAAI5J,SAAS;uBACrBoD,SAAS;uBACTQ,eAAe;uBACf1B,IAAI;IACrBkH,KAAK,EAAA/P,QAAA;MACH0S,SAAS,EAAEjD,GAAG;MACd6B,SAAS,EAAEd,UAAU,GAAG,cAAc,GAAG;OACtCT,KAAK,EACJQ,UAAU,GAAGV,aAAa,GAAG,EAAE;KAEjC5F,KAAK,EACT;AAEN,CAAC,CACF;AACDqF,UAAU,CAACnE,WAAW,GAAG,YAAY;;ACzO9B,IAAMwH,mBAAmB,gBAAGja,aAAa,CAAsB;EACpEka,cAAc,EAAE,SAAAA;IAAA,OAAMC,OAAO,CAACC,OAAO,EAAE;;CACxC,CAAC;;ACwBK,IAAMC,kBAAkB,gBAAGxR,IAAI,CAAe;EACnDzG,GAAG,EAAEH,aAAa,GAAG,sBAAsB;EAC3C,WAAS;CACV,CAAC;AACF,AAAO,IAAMqY,sBAAsB,gBAAGzR,IAAI,CAAe;EACvDzG,GAAG,EAAEH,aAAa,GAAG,0BAA0B;EAC/C,WAAS;CACV,CAAC;AACF,AAAO,IAAMsY,kBAAkB,gBAAG1R,IAAI,CAAmB;EACvDzG,GAAG,EAAEH,aAAa,GAAG,gBAAgB;EACrC,WAAS;CACV,CAAC;AACF,AAAO,IAAMuY,sBAAsB,gBAAG3R,IAAI,CAAmB;EAC3DzG,GAAG,EAAEH,aAAa,GAAG,oBAAoB;EACzC,WAAS;CACV,CAAC;AACF,AAAO,IAAMwY,mBAAmB,gBAAG5R,IAAI,CAAmB;EACxDzG,GAAG,EAAEH,aAAa,GAAG,iBAAiB;EACtC,WAAS;CACV,CAAC;AACF,AAAO,IAAMyY,oBAAoB,gBAC/B7R,IAAI,CAAsD;EACxDzG,GAAG,EAAEH,aAAa,GAAG,mBAAmB;EACxC,WAAS;CACV,CAAC;AAEJ,AAAO,IAAM0Y,YAAY,GAA+C,SAA3DA,YAAYA,CAAAjY,IAAA;MACvBgH,QAAQ,GAAAhH,IAAA,CAARgH,QAAQ;EAER,IAAMxJ,KAAK,GAAGD,QAAQ,EAAE;;;;;EAMxB,IAAMia,cAAc,GAAGpQ,iBAAiB,CACtC,UAAAjH,KAAA;IAAA,IAAGmH,iBAAiB,GAAAnH,KAAA,CAAjBmH,iBAAiB;IAAA,oBAAAgB,iBAAA,CAClB;;;;;MAIE,IACE,SAAA4P,UAAA,GAAOC,SAAS,sBAAAC,qBAAA,GAATF,UAAA,CAAWG,YAAY,qBAAvBD,qBAAA,CAAyBE,YAAY,MAAK,WAAW,IAC5D,SAAAC,WAAA,GAAOJ,SAAS,sBAAAK,qBAAA,GAATD,WAAA,CAAWF,YAAY,qBAAvBG,qBAAA,CAAyBC,gBAAgB,MAAK,WAAW,EAChE;QACAnR,iBAAiB,CAAC,UAAAD,KAAA;cAAGvC,GAAG,GAAAuC,KAAA,CAAHvC,GAAG;UACtBA,GAAG,CAAC6S,kBAAkB,EAAE,eAAe,CAAC;UACxC7S,GAAG,CAAC8S,sBAAsB,EAAE,eAAe,CAAC;SAC7C,CAAC;QACF;;MAGF,IAAI,CAACpa,KAAK,EAAE;MAEZ,IAAI;QACF,IAAAkb,qBAAA,SAA0Blb,KAAK,CAACib,gBAAgB,EAAE;UAA1CE,OAAO,GAAAD,qBAAA,CAAPC,OAAO;;;;QAIf,IAAMC,IAAI,GAAGD,OAAO,CAAC3S,MAAM,CACzB,UAAC6S,CAAC;UAAA,OAAKA,CAAC,CAACrW,IAAI,KAAK,YAAY,IAAIqW,CAAC,CAACC,QAAQ,KAAK,EAAE;UACpD;QACD,IAAMC,IAAI,GAAGJ,OAAO,CAAC3S,MAAM,CACzB,UAAC6S,CAAC;UAAA,OAAKA,CAAC,CAACrW,IAAI,KAAK,YAAY,IAAIqW,CAAC,CAACC,QAAQ,KAAK,EAAE;UACpD;QACD,IAAMtI,QAAQ,GAAGmI,OAAO,CAAC3S,MAAM,CAC7B,UAAC6S,CAAC;UAAA,OAAKA,CAAC,CAACrW,IAAI,KAAK,aAAa,IAAIqW,CAAC,CAACC,QAAQ,KAAK,EAAE;UACrD;QACD,IAAAE,qBAAA,SAAuCxb,KAAK,CAACyb,eAAe,EAAE;UAAtDC,MAAM,GAAAF,qBAAA,CAANE,MAAM;UAAEC,GAAG,GAAAH,qBAAA,CAAHG,GAAG;UAAEC,OAAO,GAAAJ,qBAAA,CAAPI,OAAO;QAE5B,IAAMC,SAAS,GAAG,SAAZA,SAASA,CACbC,MAA4B,EAC5BT,CAAkB,EAClBU,WAA6B;UAAA,IAAAC,qBAAA,EAAAC,iBAAA;UAAA,OACzB;YACJH,MAAM,EAAET,CAAC;YACTa,QAAQ,EAAE,UAAU,IAAIJ,MAAM,IAAIT,CAAC,CAACC,QAAQ,KAAKQ,MAAM,CAACR,QAAQ;YAChE9K,KAAK,GAAAwL,qBAAA,IAAAC,iBAAA,GACHF,WAAW,CAACI,IAAI,CAAC,UAAChU,CAAC;cAAA,OAAKA,CAAC,CAAC2T,MAAM,CAACR,QAAQ,KAAKD,CAAC,CAACC,QAAQ;cAAC,qBAAzDW,iBAAA,CACIzL,KAAK,YAAAwL,qBAAA,GAAI;WAChB;SAAC;QACF,IAAMI,iBAAiB,GAAG,SAApBA,iBAAiBA,CAAI7X,CAAiB,EAAEC,CAAiB;UAC7D,IAAID,CAAC,CAACuX,MAAM,CAACR,QAAQ,KAAK,SAAS,EAAE,OAAO,CAAC,CAAC;UAC9C,IAAI9W,CAAC,CAACsX,MAAM,CAACR,QAAQ,KAAK,SAAS,EAAE,OAAO,CAAC;UAC7C,IAAI/W,CAAC,CAACuX,MAAM,CAACO,KAAK,GAAG7X,CAAC,CAACsX,MAAM,CAACO,KAAK,EAAE,OAAO,CAAC,CAAC;UAC9C,IAAI9X,CAAC,CAACuX,MAAM,CAACO,KAAK,GAAG7X,CAAC,CAACsX,MAAM,CAACO,KAAK,EAAE,OAAO,CAAC;UAC7C,OAAO,CAAC;SACT;QAEDvS,iBAAiB,CAAC,UAAAE,KAAA;cAAG1C,GAAG,GAAA0C,KAAA,CAAH1C,GAAG;UACtBA,GAAG,CAAC+S,kBAAkB,EAAE,UAACiC,QAAQ;YAAA,OAC/BlB,IAAI,CACD5S,MAAM,CAACkG,OAAO,CAAC,CACf9L,GAAG,CAAiB,UAACyY,CAAC;cAAA,OAAKQ,SAAS,CAACH,MAAM,EAAEL,CAAC,EAAEiB,QAAQ,CAAC;cAAC,CAC1DjP,IAAI,CAAC+O,iBAAiB,CAAC;YAC3B;UACD9U,GAAG,CAACgT,sBAAsB,EAAE,UAACiC,QAAQ;YAAA,OACnChB,IAAI,CACD/S,MAAM,CAACkG,OAAO,CAAC,CACf9L,GAAG,CAAiB,UAACyY,CAAC;cAAA,OAAKQ,SAAS,CAACF,GAAG,EAAEN,CAAC,EAAEkB,QAAQ,CAAC;cAAC,CACvDlP,IAAI,CAAC+O,iBAAiB,CAAC;YAC3B;UACD9U,GAAG,CAACiT,mBAAmB,EAAE,UAAChF,YAAY;YAAA,OACpCvC,QAAQ,CACLxK,MAAM,CAACkG,OAAO,CAAC,CACf9L,GAAG,CAAiB,UAACyY,CAAC;cAAA,OAAKQ,SAAS,CAACD,OAAO,EAAEP,CAAC,EAAE9F,YAAY,CAAC;cAAC,CAC/DlI,IAAI,CAAC+O,iBAAiB,CAAC;YAC3B;SACF,CAAC;OACH,CAAC,OAAOxY,CAAC,EAAE;QACVkG,iBAAiB,CAAC,UAAAW,KAAA;cAAGnD,GAAG,GAAAmD,KAAA,CAAHnD,GAAG;UACtBA,GAAG,CAAC6S,kBAAkB,EAAE,eAAe,CAAC;UACxC7S,GAAG,CAAC8S,sBAAsB,EAAE,eAAe,CAAC;SAC7C,CAAC;;KAEL;KACH,CAACpa,KAAK,CAAC,CACR;;;;EAKD,IAAMwc,kBAAkB,GAAG5S,iBAAiB,CAC1C,UAAAe,KAAA;IAAA,IAAGrD,GAAG,GAAAqD,KAAA,CAAHrD,GAAG;MAAEuD,QAAQ,GAAAF,KAAA,CAARE,QAAQ;MAAEf,iBAAiB,GAAAa,KAAA,CAAjBb,iBAAiB;IAAA,oBAAAgB,iBAAA,CACjC;;MACE,IAAI,CAAC9K,KAAK,EAAE;MAEZ,IAAMyc,eAAe,SAAS5R,QAAQ,CAACE,UAAU,CAACoP,kBAAkB,CAAC;MACrE,IAAMuC,eAAe,SAAS7R,QAAQ,CAACE,UAAU,CAC/CqP,sBAAsB,CACvB;MAED,IAAMrQ,YAAY,GAAG/J,KAAK,CAAC+J,YAAY,EAAE;;MAEzC,IAAI,CAACA,YAAY,CAACE,KAAK,EAAE;MAEzB,IAAQgL,MAAM,GAAKlL,YAAY,CAACE,KAAK,CAA7BgL,MAAM;MAEd,IAAI0H,kBAAkB,GAAoB,QAAQ;MAClD,IAAIC,kBAAkB,GAAoB,QAAQ;MAClD,IAAIjC,SAAS,CAACkC,WAAW,EAAE;QACzB,IAAI;UACF,IAAMC,aAAa,SAASnC,SAAS,CAACkC,WAAW,CAACE,KAAK,CAAC;;YAEtD3T,IAAI,EAAE;WACP,CAAC;UACFuT,kBAAkB,GAAGG,aAAa,CAACtM,KAAK;UACxC,IAAMwM,aAAa,SAASrC,SAAS,CAACkC,WAAW,CAACE,KAAK,CAAC;;YAEtD3T,IAAI,EAAE;WACP,CAAC;UACFwT,kBAAkB,GAAGI,aAAa,CAACxM,KAAK;SACzC,CAAC,OAAAyM,OAAA,EAAM;;;;MAKV,IAAMC,iBAAiB,GACrBP,kBAAkB,KAAK,QAAQ,IAC/B,CAAC,MAAM,EAAE,SAAS,CAAC,CAAClR,QAAQ,CAACgR,eAAe,CAAC,IAC7CxH,MAAM,CAACiD,KAAK,CAAC1H,KAAK,KAAK,aAAa,IACpC,CAACyE,MAAM,CAACiD,KAAK,CAACzH,eAAe;MAC/B,IAAM0M,aAAa,GACjB,CAAC,MAAM,EAAE,SAAS,CAAC,CAAC1R,QAAQ,CAACgR,eAAe,CAAC,IAC7C,CAACxH,MAAM,CAACiD,KAAK,CAACzH,eAAe,IAC7B/B,OAAO,EAAA0O,iBAAA,GAACnI,MAAM,CAACiD,KAAK,CAAC7X,GAAG,qBAAhB+c,iBAAA,CAAkBC,MAAM,CAAC;MACnC,IAAMC,iBAAiB,GACrBV,kBAAkB,KAAK,QAAQ,IAC/B,CAAC,MAAM,EAAE,SAAS,CAAC,CAACnR,QAAQ,CAACiR,eAAe,CAAC,IAC7CzH,MAAM,CAACxD,KAAK,CAACjB,KAAK,KAAK,aAAa,IACpC,CAACyE,MAAM,CAACxD,KAAK,CAAChB,eAAe;MAC/B,IAAM8M,aAAa,GACjB,CAAC,MAAM,EAAE,SAAS,CAAC,CAAC9R,QAAQ,CAACiR,eAAe,CAAC,IAC7C,CAACzH,MAAM,CAACxD,KAAK,CAAChB,eAAe,IAC7B/B,OAAO,EAAA8O,iBAAA,GAACvI,MAAM,CAACxD,KAAK,CAACpR,GAAG,qBAAhBmd,iBAAA,CAAkBH,MAAM,CAAC;MAEnC,KAAAI,aAAA,GAAIxI,MAAM,CAACxD,KAAK,cAAAiM,qBAAA,GAAZD,aAAA,CAAcE,OAAO,aAArBD,qBAAA,CAAuBE,aAAa,EAAE;QACxC9T,iBAAiB,CAAC,UAAAkB,KAAA;cAAG1D,GAAG,GAAA0D,KAAA,CAAH1D,GAAG;UACtBA,GAAG,CAAC8S,sBAAsB,EAAE,QAAQ,CAAC;UACrC9S,GAAG,CAACgT,sBAAsB,EAAE,UAACiB,IAAI;YAAA,OAC/BA,IAAI,CAAC3Y,GAAG,CAAiB,UAACib,CAAC;cAAA,OACzBA,CAAC,CAAC3B,QAAQ,GAAA9U,QAAA,KAAQyW,CAAC;gBAAErN,KAAK,EAAE;mBAAaqN,CAAC;cAC3C;YACF;SACF,CAAC;OACH,MAAM,KAAAC,cAAA,GAAI7I,MAAM,CAACxD,KAAK,cAAAsM,qBAAA,GAAZD,cAAA,CAAcH,OAAO,aAArBI,qBAAA,CAAuBC,eAAe,EAAE;QACjD1W,GAAG,CAAC8S,sBAAsB,EAAE,WAAW,CAAC;OACzC,MAAM,IACL,CAAA6D,cAAA,GAAAhJ,MAAM,CAACxD,KAAK,cAAAyM,qBAAA,GAAZD,cAAA,CAAcN,OAAO,aAArBO,qBAAA,CAAuBC,aAAa,IACpCvB,kBAAkB,KAAK,QAAQ,EAC/B;QACAtV,GAAG,CAAC8S,sBAAsB,EAAE,SAAS,CAAC;OACvC,MAAM,IAAIkD,iBAAiB,EAAE;QAC5BhW,GAAG,CAAC8S,sBAAsB,EAAE,SAAS,CAAC;OACvC,MAAM,IAAImD,aAAa,EAAE;QACxBjW,GAAG,CAAC8S,sBAAsB,EAAE,MAAM,CAAC;OACpC,MAAM;QACLtQ,iBAAiB,CAAC,UAAAoB,MAAA;cAAG5D,GAAG,GAAA4D,MAAA,CAAH5D,GAAG;UACtBA,GAAG,CAAC8S,sBAAsB,EAAE,SAAS,CAAC;UACtC9S,GAAG,CAACgT,sBAAsB,EAAE,UAACiB,IAAI;YAAA,OAC/BA,IAAI,CAAC3Y,GAAG,CAAiB,UAACib,CAAC;cAAA,OACzBA,CAAC,CAAC3B,QAAQ,GAAA9U,QAAA,KAAQyW,CAAC;gBAAErN,KAAK,EAAE;mBAAcqN,CAAC;cAC5C;YACF;SACF,CAAC;;MAGJ,KAAAO,aAAA,GAAInJ,MAAM,CAACiD,KAAK,cAAAmG,qBAAA,GAAZD,aAAA,CAAcT,OAAO,aAArBU,qBAAA,CAAuBT,aAAa,EAAE;QACxC9T,iBAAiB,CAAC,UAAAgC,MAAA;cAAGxE,GAAG,GAAAwE,MAAA,CAAHxE,GAAG;UACtBA,GAAG,CAAC6S,kBAAkB,EAAE,QAAQ,CAAC;UACjC7S,GAAG,CAAC+S,kBAAkB,EAAE,UAACe,IAAI;YAAA,OAC3BA,IAAI,CAACxY,GAAG,CAAiB,UAACib,CAAC;cAAA,OACzBA,CAAC,CAAC3B,QAAQ,GAAA9U,QAAA,KAAQyW,CAAC;gBAAErN,KAAK,EAAE;mBAAaqN,CAAC;cAC3C;YACF;SACF,CAAC;OACH,MAAM,KAAAS,cAAA,GAAIrJ,MAAM,CAACiD,KAAK,cAAAqG,qBAAA,GAAZD,cAAA,CAAcX,OAAO,aAArBY,qBAAA,CAAuBP,eAAe,EAAE;QACjD1W,GAAG,CAAC6S,kBAAkB,EAAE,WAAW,CAAC;OACrC,MAAM,IACL,CAAAqE,cAAA,GAAAvJ,MAAM,CAACiD,KAAK,cAAAuG,qBAAA,GAAZD,cAAA,CAAcb,OAAO,aAArBc,qBAAA,CAAuBN,aAAa,IACpCxB,kBAAkB,KAAK,QAAQ,EAC/B;QACArV,GAAG,CAAC6S,kBAAkB,EAAE,SAAS,CAAC;OACnC,MAAM,IAAI+C,iBAAiB,EAAE;QAC5B5V,GAAG,CAAC6S,kBAAkB,EAAE,SAAS,CAAC;OACnC,MAAM,IAAIgD,aAAa,EAAE;QACxB7V,GAAG,CAAC6S,kBAAkB,EAAE,MAAM,CAAC;OAChC,MAAM;QACLrQ,iBAAiB,CAAC,UAAAiC,MAAA;cAAGzE,GAAG,GAAAyE,MAAA,CAAHzE,GAAG;UACtBA,GAAG,CAAC6S,kBAAkB,EAAE,SAAS,CAAC;UAClC7S,GAAG,CAAC+S,kBAAkB,EAAE,UAACe,IAAI;YAAA,OAC3BA,IAAI,CAACxY,GAAG,CAAiB,UAACib,CAAC;cAAA,OACzBA,CAAC,CAAC3B,QAAQ,GAAA9U,QAAA,KAAQyW,CAAC;gBAAErN,KAAK,EAAE;mBAAcqN,CAAC;cAC5C;YACF;SACF,CAAC;;MAEJ7D,cAAc,EAAE;KACjB;KACH,CAACha,KAAK,EAAEga,cAAc,CAAC,CACxB;EAEDtZ,aAAa,CACX,qBAAqB,EACrBoD,WAAW,CACT,UAACnD,EAAE;IACD,IAAI,CAACA,EAAE,CAAC0H,WAAW,CAAC4B,KAAK,EAAE;IAC3BuS,kBAAkB,EAAE;GACrB,EACD,CAACA,kBAAkB,CAAC,CACrB,CACF;EAED9b,aAAa,CAAC,2BAA2B,EAAEsZ,cAAc,CAAC;EAC1DtZ,aAAa,CAAC,0BAA0B,EAAEsZ,cAAc,CAAC;EAEzDtZ,aAAa,CACX,cAAc,EACdkJ,iBAAiB,CACf,UAAA8U,MAAA;IAAA,IAAG5U,iBAAiB,GAAA4U,MAAA,CAAjB5U,iBAAiB;IAAA,OAClB,UAACnJ,EAAE;MACDmJ,iBAAiB,CAAC,UAAA6U,MAAA;;YAAGrX,GAAG,GAAAqX,MAAA,CAAHrX,GAAG;QACtBA,GAAG,CAACkT,oBAAoB,EAAE7Z,EAAE,CAACe,KAAK,CAAC;QACnC,SAAAkd,SAAA,GAAQje,EAAE,CAACe,KAAK,qBAARkd,SAAA,CAAU3O,IAAI;UACpB,KAAK,YAAY;YACf3I,GAAG,CAAC6S,kBAAkB,EAAE,QAAQ,CAAC;YACjC;UACF,KAAK,YAAY;YACf7S,GAAG,CAAC8S,sBAAsB,EAAE,QAAQ,CAAC;YACrC;UACF,KAAK,gBAAgB;YACnB9S,GAAG,CAAC6S,kBAAkB,EAAE,QAAQ,CAAC;YACjC7S,GAAG,CAAC8S,sBAAsB,EAAE,QAAQ,CAAC;YACrC;UACF,KAAK,WAAW;YACd,KAAAyE,UAAA,GAAIle,EAAE,CAACe,KAAK,aAARmd,UAAA,CAAUC,YAAY,CAACrT,QAAQ,CAAC,OAAO,CAAC,EAC1CnE,GAAG,CAAC6S,kBAAkB,EAAE,WAAW,CAAC;YACtC,KAAA4E,UAAA,GAAIpe,EAAE,CAACe,KAAK,aAARqd,UAAA,CAAUD,YAAY,CAACrT,QAAQ,CAAC,OAAO,CAAC,EAC1CnE,GAAG,CAAC8S,sBAAsB,EAAE,WAAW,CAAC;YAC1C;UACF,KAAK,aAAa;YAChB,KAAA4E,UAAA,GAAIre,EAAE,CAACe,KAAK,aAARsd,UAAA,CAAUC,YAAY,CAACxT,QAAQ,CAAC,OAAO,CAAC,EAC1CnE,GAAG,CAAC6S,kBAAkB,EAAE,SAAS,CAAC;YACpC,KAAA+E,UAAA,GAAIve,EAAE,CAACe,KAAK,aAARwd,UAAA,CAAUD,YAAY,CAACxT,QAAQ,CAAC,OAAO,CAAC,EAC1CnE,GAAG,CAAC8S,sBAAsB,EAAE,SAAS,CAAC;YACxC;UACF,KAAK,aAAa;YAChB,IAAI,EAAA+E,UAAA,GAAAxe,EAAE,CAACe,KAAK,qBAARyd,UAAA,CAAUC,MAAM,MAAK,SAAS,EAAE;cAClC9X,GAAG,CAAC6S,kBAAkB,EAAE,qBAAqB,CAAC;cAC9C7S,GAAG,CAAC8S,sBAAsB,EAAE,qBAAqB,CAAC;aACnD,MAAM,IAAI,EAAAiF,UAAA,GAAA1e,EAAE,CAACe,KAAK,qBAAR2d,UAAA,CAAUD,MAAM,MAAK,gBAAgB,EAAE;cAChD9X,GAAG,CAAC6S,kBAAkB,EAAE,4BAA4B,CAAC;cACrD7S,GAAG,CAAC8S,sBAAsB,EAAE,4BAA4B,CAAC;;YAE3D;UACF,KAAK,wBAAwB;YAC3B9S,GAAG,CAAC6S,kBAAkB,EAAE,wBAAwB,CAAC;YACjD7S,GAAG,CAAC8S,sBAAsB,EAAE,wBAAwB,CAAC;YACrD;UACF,KAAK,SAAS;UACd;YACE9S,GAAG,CAAC6S,kBAAkB,EAAE,SAAS,CAAC;YAClC7S,GAAG,CAAC8S,sBAAsB,EAAE,SAAS,CAAC;YACtC;;OAEL,CAAC;KACH;KACH,EAAE,CACH,CACF;;;;EAKD1Z,aAAa,CACX,gBAAgB,EAChBkJ,iBAAiB,CACf,UAAA0V,MAAA;IAAA,IAAGxV,iBAAiB,GAAAwV,MAAA,CAAjBxV,iBAAiB;IAAA,OAClB;MACEA,iBAAiB,CAAC,UAAAyV,MAAA;YAAGjY,GAAG,GAAAiY,MAAA,CAAHjY,GAAG;QACtBA,GAAG,CAAC6S,kBAAkB,EAAE,SAAS,CAAC;QAClC7S,GAAG,CAAC8S,sBAAsB,EAAE,SAAS,CAAC;OACvC,CAAC;MACFoC,kBAAkB,EAAE;KACrB;KACH,CAACA,kBAAkB,CAAC,CACrB,CACF;EAED,OACEtQ,oBAAC6N,mBAAmB,CAACyF,QAAQ;IAAC1Z,KAAK,EAAE;MAAEkU,cAAc,EAAdA;;KACpCxQ,QAAQ,CACoB;AAEnC,CAAC;;ACjWM,IAAMiW,kBAAkB,gBAAG9W,IAAI,CAAqB;EACzDzG,GAAG,EAAEH,aAAa,GAAG,gBAAgB;EACrC,WAAS;IACP2d,QAAQ,EAAE3R,SAAS;IACnB4R,eAAe,EAAE,KAAK;IACtBC,MAAM,EAAE7R;;CAEX,CAAC;AAEF,AAAO,IAAM8R,kBAAkB,GAA+C,SAAjEA,kBAAkBA,CAAArd,IAAA;MAC7BgH,QAAQ,GAAAhH,IAAA,CAARgH,QAAQ;EAER9I,aAAa,CACX,wBAAwB,EACxBkJ,iBAAiB,CACf,UAAAjH,KAAA;IAAA,IAAG2E,GAAG,GAAA3E,KAAA,CAAH2E,GAAG;IAAA,OACJ,UAAC3G,EAAE;MACD2G,GAAG,CAACmY,kBAAkB,EAAE;QACtBE,eAAe,EAAE,IAAI;QACrBC,MAAM,EAAEjf,EAAE,oBAAFA,EAAE,CAAEif;OACb,CAAC;KACH;KACH,EAAE,CACH,CACF;EAEDlf,aAAa,CACX,wBAAwB,EACxBkJ,iBAAiB,CACf,UAAApG,KAAA;IAAA,IAAG8D,GAAG,GAAA9D,KAAA,CAAH8D,GAAG;IAAA,OACJ;MACEA,GAAG,CAACmY,kBAAkB,EAAE,UAACK,SAAS;QAAA,OAAA1Y,QAAA,KAC7B0Y,SAAS;UACZH,eAAe,EAAE,KAAK;UACtBC,MAAM,EAAE7R;;OACR,CAAC;KACJ;KACH,EAAE,CACH,CACF;EAEDrN,aAAa,CACX,sBAAsB,EACtBkJ,iBAAiB,CACf,UAAAC,KAAA;IAAA,IAAGvC,GAAG,GAAAuC,KAAA,CAAHvC,GAAG;IAAA,OACJ,UAAC3G,EAAE;MACD2G,GAAG,CAACmY,kBAAkB,EAAE,UAACK,SAAS;QAAA,OAAA1Y,QAAA,KAC7B0Y,SAAS;UACZJ,QAAQ,EAAE/e,EAAE,CAAC+e;;OACb,CAAC;KACJ;KACH,EAAE,CACH,CACF;EAEDhf,aAAa,CACX,cAAc,EACdkJ,iBAAiB,CACf,UAAAI,KAAA;IAAA,IAAGY,KAAK,GAAAZ,KAAA,CAALY,KAAK;IAAA,OACN;MACEA,KAAK,CAAC6U,kBAAkB,CAAC;KAC1B;KACH,EAAE,CACH,CACF;EAED,OAAOvT,0CAAG1C,QAAQ,CAAI;AACxB,CAAC;;ACnEM,IAAMuW,iBAAiB,gBAAGpX,IAAI,CAAoB;EACvDzG,GAAG,EAAEH,aAAa,GAAG,eAAe;EACpC,WAAS;CACV,CAAC;AAEF,AAAO,IAAMie,iBAAiB,gBAAGrX,IAAI,CAAoC;EACvEzG,GAAG,EAAEH,aAAa,GAAG,eAAe;EACpC,WAAS;CACV,CAAC;AAEF,AAAO,IAAMke,kBAAkB,gBAAGtX,IAAI,CAAuC;EAC3EzG,GAAG,EAAEH,aAAa,GAAG,iBAAiB;EACtC,WAAS;CACV,CAAC;AAEF,AAAO,IAAMme,uBAAuB,gBAAGvX,IAAI,CAA2B;EACpEzG,GAAG,EAAE,sBAAsB;EAC3B,WAAS;IACPie,IAAI,EAAEpS,SAAS;IACfqS,QAAQ,EAAE;;CAEb,CAAC;AAEF,AAAO,IAAMC,YAAY,GAA0C,SAAtDA,YAAYA,CAAA7d,IAAA;MACvBgH,QAAQ,GAAAhH,IAAA,CAARgH,QAAQ;EAER,IAAMxJ,KAAK,GAAGD,QAAQ,EAAE;;;;EAKxB,IAAMugB,kBAAkB,GAAG1W,iBAAiB,CAC1C,UAAAjH,KAAA;IAAA,IAAG2E,GAAG,GAAA3E,KAAA,CAAH2E,GAAG;IAAA,OACJ;MACE,IAAI,CAACtH,KAAK,EAAE;MACZ,IAAMugB,YAAY,GAAGvgB,KAAK,CAACugB,YAAY,EAAE;MACzCjZ,GAAG,CAACyY,iBAAiB,EAAEQ,YAAY,CAAC;MACpC,OAAOA,YAAY;KACpB;KACH,CAACvgB,KAAK,CAAC,CACR;EAEDU,aAAa,CAAC,SAAS,EAAE4f,kBAAkB,CAAC;EAC5C5f,aAAa,CAAC,QAAQ,EAAE4f,kBAAkB,CAAC;EAC3C5f,aAAa,CAAC,iBAAiB,EAAE4f,kBAAkB,CAAC;EACpD5f,aAAa,CAAC,gBAAgB,EAAE4f,kBAAkB,CAAC;EACnD5f,aAAa,CAAC,cAAc,EAAE4f,kBAAkB,CAAC;EACjD5f,aAAa,CACX,OAAO,EACPkJ,iBAAiB,CACf,UAAApG,KAAA;IAAA,IAAG8D,GAAG,GAAA9D,KAAA,CAAH8D,GAAG;IAAA,OACJ,UAAC3G,EAAE;MACD2G,GAAG,CAAC0Y,iBAAiB,EAAErf,EAAE,CAAC;MAC1B2f,kBAAkB,EAAE;KACrB;KACH,CAACA,kBAAkB,CAAC,CACrB,CACF;EACD5f,aAAa,CACX,gBAAgB,EAChBkJ,iBAAiB,CACf,UAAAC,KAAA;IAAA,IAAGvC,GAAG,GAAAuC,KAAA,CAAHvC,GAAG;IAAA,OACJ,UAAC3G,EAAE;MACD2G,GAAG,CAAC2Y,kBAAkB,EAAEtf,EAAE,CAAC;KAC5B;KACH,EAAE,CACH,CACF;;;;EAKD,IAAM6f,uBAAuB,GAAG5W,iBAAiB,CAC/C,UAAAI,KAAA;IAAA,IAAG1C,GAAG,GAAA0C,KAAA,CAAH1C,GAAG;IAAA,OACJ;MACE,IAAI,CAACtH,KAAK,EAAE;MACZsH,GAAG,CAAC4Y,uBAAuB,EAAElgB,KAAK,CAACygB,mBAAmB,EAAE,CAAC;KAC1D;KACH,CAACzgB,KAAK,CAAC,CACR;;;;EAKDU,aAAa,CAAC,gBAAgB,EAAE8f,uBAAuB,CAAC;;;;EAKxD9f,aAAa,CACX,+BAA+B,EAC/BkJ,iBAAiB,CACf,UAAAa,KAAA;IAAA,IAAGnD,GAAG,GAAAmD,KAAA,CAAHnD,GAAG;IAAA,OACJ,UAAC3G,EAAE;MACD2G,GAAG,CAAC4Y,uBAAuB,EAAEvf,EAAE,CAAC8f,mBAAmB,CAAC;KACrD;KACH,EAAE,CACH,CACF;;;;EAKD/f,aAAa,CACX,cAAc,EACdkJ,iBAAiB,CACf,UAAAe,KAAA;IAAA,IAAGC,KAAK,GAAAD,KAAA,CAALC,KAAK;IAAA,OACN;MACEA,KAAK,CAACsV,uBAAuB,CAAC;KAC/B;KACH,EAAE,CACH,CACF;;;;EAKDxf,aAAa,CACX,yBAAyB,EACzBkJ,iBAAiB,CACf,UAAA8W,KAAA;IAAA,IAAG5W,iBAAiB,GAAA4W,KAAA,CAAjB5W,iBAAiB;IAAA,OAClB;MACEA,iBAAiB,CAAC,UAAAkB,KAAA;YAAGJ,KAAK,GAAAI,KAAA,CAALJ,KAAK;QACxBA,KAAK,CAACmV,iBAAiB,CAAC;QACxBnV,KAAK,CAACoV,iBAAiB,CAAC;QACxBpV,KAAK,CAACqV,kBAAkB,CAAC;QACzBrV,KAAK,CAACsV,uBAAuB,CAAC;OAC/B,CAAC;KACH;KACH,EAAE,CACH,CACF;EAED,OAAOhU,0CAAG1C,QAAQ,CAAI;AACxB,CAAC;;AC3IM,IAAMmX,aAAa,gBAAGhY,IAAI,CAAgC;EAC/DzG,GAAG,EAAEH,aAAa,GAAG,UAAU;EAC/B,WAAS;CACV,CAAC;AACF,AAAO,IAAM6e,mBAAmB,gBAAGjY,IAAI,CAA+B;EACpEzG,GAAG,EAAEH,aAAa,GAAG,gBAAgB;EACrC,WAAS;CACV,CAAC;AACF,AAAO,IAAM8e,qBAAqB,gBAAGlY,IAAI,CAAiC;EACxEzG,GAAG,EAAEH,aAAa,GAAG,kBAAkB;EACvC,WAAS;CACV,CAAC;AAEF,AAAO,IAAM+e,YAAY,GAA0C,SAAtDA,YAAYA,CAAAte,IAAA;MACvBgH,QAAQ,GAAAhH,IAAA,CAARgH,QAAQ;EAER,IAAMxJ,KAAK,GAAGD,QAAQ,EAAE;EAExB,IAAMqgB,QAAQ,GAAGld,cAAc,CAACyd,aAAa,CAAC;EAE9C,IAAMI,YAAY,GAAGnX,iBAAiB,CACpC,UAAAjH,KAAA;IAAA,IAAG2E,GAAG,GAAA3E,KAAA,CAAH2E,GAAG;IAAA,oBAAAwD,iBAAA,CACJ;MACE,IAAI,CAAC9K,KAAK,EAAE;MACZ,IAAMogB,QAAQ,SAASpgB,KAAK,CAACghB,kBAAkB,EAAE;MACjD,IAAI,CAACZ,QAAQ,IAAI,CAAAA,QAAQ,oBAARA,QAAQ,CAAEA,QAAQ,MAAK,MAAM,EAAE;MAChD9Y,GAAG,CAACqZ,aAAa,EAAEP,QAAQ,CAACA,QAAQ,CAAC;KACtC;KACH,CAACpgB,KAAK,CAAC,CACR;EAEDU,aAAa,CAAC,gBAAgB,EAAEqgB,YAAY,CAAC;EAC7CrgB,aAAa,CACX,oBAAoB,EACpBkJ,iBAAiB,CACf,UAAAC,KAAA;IAAA,IAAGvC,GAAG,GAAAuC,KAAA,CAAHvC,GAAG;IAAA,OACJ,UAAC3G,EAAE;MACD,QAAQA,EAAE,CAACmB,KAAK;QACd,KAAK,WAAW;UACd,IAAInB,EAAE,CAACsP,IAAI,KAAK,cAAc,EAAE3I,GAAG,CAACqZ,aAAa,EAAE,MAAM,CAAC;UAC1D,IAAIhgB,EAAE,CAACsP,IAAI,KAAK,KAAK,EAAE3I,GAAG,CAACqZ,aAAa,EAAE,KAAK,CAAC;UAChD;;KAEL;KACH,EAAE,CACH,CACF;EACDjgB,aAAa,CACX,wBAAwB,EACxBkJ,iBAAiB,CACf,UAAAI,KAAA;IAAA,IAAGF,iBAAiB,GAAAE,KAAA,CAAjBF,iBAAiB;IAAA,OAClB,UAACnJ,EAAE;MACDmJ,iBAAiB,CAAC,UAAAW,KAAA;YAAGnD,GAAG,GAAAmD,KAAA,CAAHnD,GAAG;QACtBA,GAAG,CAACsZ,mBAAmB,EAAE,UAACK,WAAW;UAAA,OACnCA,WAAW,KAAKtgB,EAAE,CAACugB,OAAO,GAAGvgB,EAAE,CAACugB,OAAO,GAAGD,WAAW;UACtD;QACD3Z,GAAG,CAACuZ,qBAAqB,EAAE,UAACM,aAAa;UAAA,OACvCA,aAAa,KAAKxgB,EAAE,CAACygB,SAAS,GAAGzgB,EAAE,CAACygB,SAAS,GAAGD,aAAa;UAC9D;OACF,CAAC;KACH;KACH,EAAE,CACH,CACF;EAEDzgB,aAAa,CACX,cAAc,EACdkJ,iBAAiB,CACf,UAAAe,KAAA;IAAA,IAAGb,iBAAiB,GAAAa,KAAA,CAAjBb,iBAAiB;IAAA,OAClB;MACEA,iBAAiB,CAAC,UAAA4W,KAAA;YAAG9V,KAAK,GAAA8V,KAAA,CAAL9V,KAAK;QACxBA,KAAK,CAAC+V,aAAa,CAAC;QACpB/V,KAAK,CAACgW,mBAAmB,CAAC;QAC1BhW,KAAK,CAACiW,qBAAqB,CAAC;OAC7B,CAAC;KACH;KACH,EAAE,CACH,CACF;EAEDtf,SAAS,CAAC;IACR,IAAI,CAACvB,KAAK,IAAIogB,QAAQ,KAAK,MAAM,EAAE;IACnCW,YAAY,EAAE;GACf,EAAE,CAAC/gB,KAAK,EAAE+gB,YAAY,EAAEX,QAAQ,CAAC,CAAC;EAEnC,OAAOlU,0CAAG1C,QAAQ,CAAI;AACxB,CAAC;;AC3CM,IAAM6X,cAAc,gBAAG1Y,IAAI,CAAiB;EACjDzG,GAAG,EAAEH,aAAa,GAAG,WAAW;EAChC,WAAS;IACPuf,0BAA0B,EAAE,KAAK;IACjCC,WAAW,EAAE;;CAEhB,CAAC;AAEF,AAAO,IAAMC,eAAe,GAA+C,SAA9DA,eAAeA,CAAAhf,IAAA;MAC1BgH,QAAQ,GAAAhH,IAAA,CAARgH,QAAQ;EAER,IAAMiY,QAAQ,GAAGC,iBAAiB,CAACL,cAAc,CAAC;EAElD,IAAM1U,cAAc,GAAGR,iBAAiB,EAAE;EAE1C,IAAMwV,uBAAuB,GAAG3T,iBAAiB,CAAC;IAChDxF,MAAM,EAAE;GACT,CAAC;;;;EAIFjH,SAAS,CAAC;IACR,IAAMqgB,wBAAwB,GAAGD,uBAAuB,CAAC5d,MAAM,GAAG,CAAC;IACnE,IAAM8d,2BAA2B,GAAGF,uBAAuB,CAAClW,QAAQ,CAClEkB,cAAc,IAAI,OAAO,CAC1B;IACD8U,QAAQ,CAAC,UAACpR,CAAC;MAAA,OAAAjJ,QAAA,KACNiJ,CAAC;;QAEJiR,0BAA0B,EACxB,CAAAjR,CAAC,oBAADA,CAAC,CAAEJ,IAAI,MAAK,OAAO,IAAI,EAACI,CAAC,YAADA,CAAC,CAAEJ,IAAI,IAC3B2R,wBAAwB,GACxBvR,CAAC,CAACiR,0BAA0B;QAClCC,WAAW,EACT,CAAAlR,CAAC,oBAADA,CAAC,CAAEJ,IAAI,MAAK,OAAO,IAAI,EAACI,CAAC,YAADA,CAAC,CAAEJ,IAAI,IAC3B2R,wBAAwB,GACxBvR,CAAC,CAACkR,WAAW;QACnBtX,KAAK,EACH,CAAC,CAAAoG,CAAC,oBAADA,CAAC,CAAEJ,IAAI,MAAK,OAAO,IAAI,EAACI,CAAC,YAADA,CAAC,CAAEJ,IAAI,MAAK2R,wBAAwB,GACzDC,2BAA2B,GAC3BxR,CAAC,oBAADA,CAAC,CAAEpG,KAAK;;;;;QAKdgG,IAAI,EAAE2R,wBAAwB,GAAG,OAAO,GAAGvR,CAAC,oBAADA,CAAC,CAAEJ;;KAC9C,CAAC;GACJ,EAAE,CAACtD,cAAc,EAAEgV,uBAAuB,EAAEF,QAAQ,CAAC,CAAC;EAEvD/gB,aAAa,CACX,mBAAmB,EACnBkJ,iBAAiB,CACf,UAAAjH,KAAA;IAAA,IAAG2E,GAAG,GAAA3E,KAAA,CAAH2E,GAAG;IAAA,OACJ,UAAC3G,EAAE;MACD,IAAI2gB,0BAA0B,GAAG,IAAI;MACrC,QAAQ3gB,EAAE,CAACsP,IAAI;QACb,KAAK,YAAY;QACjB,KAAK,OAAO;UAAE;YAAA,IAAA6R,UAAA;YACZ,IACEnV,cAAc,IACd,EAAAmV,UAAA,GAAAnhB,EAAE,CAACif,MAAM,qBAATkC,UAAA,CAAWC,MAAM,MAAK,oBAAoB,IAC1CphB,EAAE,CAACif,MAAM,CAAC1V,UAAU,KAAKyC,cAAc,EACvC;cACA2U,0BAA0B,GAAG,KAAK;;YAEpC;;;MAGJha,GAAG,CAAC+Z,cAAc,EAAE;QAClB3f,KAAK,EAAE,KAAK;QACZ4f,0BAA0B,EAA1BA,0BAA0B;QAC1BC,WAAW,EAAE,IAAI;QACjB3B,MAAM,EAAEjf,EAAE,oBAAFA,EAAE,CAAEif,MAAM;QAClB3V,KAAK,EAAEtJ,EAAE,oBAAFA,EAAE,CAAEsJ,KAAK;QAChB+X,WAAW,EAAErhB,EAAE,oBAAFA,EAAE,CAAEqhB,WAAW;QAC5BC,oBAAoB,EAAE,IAAI/c,IAAI,EAAE;QAChCgd,SAAS,EAAEvhB,EAAE,oBAAFA,EAAE,CAAEuhB,SAAS;QACxBjS,IAAI,EAAEtP,EAAE,oBAAFA,EAAE,CAAEsP;OACX,CAAC;KACH;KACH,CAACtD,cAAc,CAAC,CACjB,CACF;EACDjM,aAAa,CACX,mBAAmB,EACnBkJ,iBAAiB,CACf,UAAApG,KAAA;IAAA,IAAG8D,GAAG,GAAA9D,KAAA,CAAH8D,GAAG;IAAA,OACJ;MACEA,GAAG,CAAC+Z,cAAc,EAAE,UAACvB,SAAS;QAAA,OAAA1Y,QAAA,KACzB0Y,SAAS;UACZwB,0BAA0B,EAAE,KAAK;UACjCC,WAAW,EAAE;;OACb,CAAC;KACJ;KACH,EAAE,CACH,CACF;EACD7gB,aAAa,CACX,iBAAiB,EACjBkJ,iBAAiB,CACf,UAAAC,KAAA;IAAA,IAAGvC,GAAG,GAAAuC,KAAA,CAAHvC,GAAG;IAAA,OACJ;MACEA,GAAG,CAAC+Z,cAAc,EAAE,UAACvB,SAAS;QAAA,OAAA1Y,QAAA,KACzB0Y,SAAS;UACZpe,KAAK,EAAE,IAAI;UACX4f,0BAA0B,EAAE,KAAK;UACjCC,WAAW,EAAE;;OACb,CAAC;KACJ;KACH,EAAE,CACH,CACF;EACD7gB,aAAa,CACX,cAAc,EACdkJ,iBAAiB,CACf,UAAAI,KAAA;IAAA,IAAGY,KAAK,GAAAZ,KAAA,CAALY,KAAK;IAAA,OACN;MACEA,KAAK,CAACyW,cAAc,CAAC;KACtB;KACH,EAAE,CACH,CACF;EACD,OAAOnV,0CAAG1C,QAAQ,CAAI;AACxB,CAAC;;ACxKD;;;AAGA,IAAa2Y,eAAe,GAAG,SAAlBA,eAAeA;EAC1B,IAAM5B,YAAY,GAAGrd,cAAc,CAAC6c,iBAAiB,CAAC;EACtD7f,aAAa,CAACqgB,YAAY,CAAC;EAC3B,OAAOA,YAAY;AACrB,CAAC;;ACJM,IAAM6B,SAAS,gBAAGzZ,IAAI,CAAuB;EAClDzG,GAAG,EAAEH,aAAa,GAAG,MAAM;EAC3B,WAAS;CACV,CAAC;AAEF,AAAO,IAAMsgB,SAAS,GAA0C,SAAnDA,SAASA,CAAA7f,IAAA;MACpBgH,QAAQ,GAAAhH,IAAA,CAARgH,QAAQ;EAER,IAAMxJ,KAAK,GAAGD,QAAQ,EAAE;EACxB,IAAMwgB,YAAY,GAAG4B,eAAe,EAAE;EAEtC,IAAMG,UAAU,GAAG1Y,iBAAiB,CAClC,UAAAjH,KAAA;IAAA,IAAG2E,GAAG,GAAA3E,KAAA,CAAH2E,GAAG;IAAA,oBAAAwD,iBAAA,CACJ;MACE,IAAI,CAAC9K,KAAK,IAAIugB,YAAY,KAAK,cAAc,EAAE;MAC/C,IAAMgC,IAAI,SAASviB,KAAK,CAACuiB,IAAI,EAAE;MAC/B,IAAIA,IAAI,IAAI,IAAI,IAAIA,IAAI,EAAE;QACxBjb,GAAG,CAAC8a,SAAS,EAAEG,IAAI,CAAC;;MAEtB,OAAOA,IAAI;KACZ;KACH,CAACviB,KAAK,EAAEugB,YAAY,CAAC,CACtB;EAED7f,aAAa,CAAC,sBAAsB,EAAE4hB,UAAU,CAAC;EAEjD5hB,aAAa,CACX,cAAc,EACdkJ,iBAAiB,CACf,UAAAC,KAAA;IAAA,IAAGe,KAAK,GAAAf,KAAA,CAALe,KAAK;IAAA,OACN;MACEA,KAAK,CAACwX,SAAS,CAAC;KACjB;KACH,EAAE,CACH,CACF;EAED,OAAOlW,0CAAG1C,QAAQ,CAAI;AACxB,CAAC;;ACAM,IAAMgZ,kBAAkB,gBAAG7Z,IAAI,CAAqB;EACzDzG,GAAG,EAAEH,aAAa,GAAG,eAAe;EACpC,WAAS;IACP0gB,cAAc,EAAE,KAAK;IACrBC,KAAK,EAAE,SAAS;IAChBC,QAAQ,EAAE,IAAI;IACdC,cAAc,EAAE;;CAEnB,CAAC;AAEF,AAAO,IAAMC,mBAAmB,GAA0C,SAA7DA,mBAAmBA,CAAArgB,IAAA;MAC9BgH,QAAQ,GAAAhH,IAAA,CAARgH,QAAQ;EAER9I,aAAa,CACX,uBAAuB,EACvBkJ,iBAAiB,CACf,UAAAjH,KAAA;IAAA,IAAG2E,GAAG,GAAA3E,KAAA,CAAH2E,GAAG;IAAA,OACJ,UAAC3G,EAAE;MACD2G,GAAG,CAACkb,kBAAkB,EAAApb,QAAA;QACpB1F,KAAK,EAAE,KAAK;QACZ+gB,cAAc,EAAE,IAAI;QACpBK,sBAAsB,EAAE,IAAI5d,IAAI,EAAE;QAClC0d,cAAc,EAAE;SACbjiB,EAAE,CACN,CAAC;KACH;KACH,EAAE,CACH,CACF;EACDD,aAAa,CACX,uBAAuB,EACvBkJ,iBAAiB,CACf,UAAApG,KAAA;IAAA,IAAG8D,GAAG,GAAA9D,KAAA,CAAH8D,GAAG;IAAA,OACJ,UAAC3G,EAAE;MACD2G,GAAG,CAACkb,kBAAkB,EAAE,UAAC1C,SAAS;QAAA,OAAA1Y,QAAA,KAC7B0Y,SAAS;UACZiD,SAAS,EAAEpiB,EAAE,oBAAFA,EAAE,CAAEoiB,SAAS;UACxBN,cAAc,EAAE;;OAChB,CAAC;KACJ;KACH,EAAE,CACH,CACF;EACD/hB,aAAa,CACX,qBAAqB,EACrBkJ,iBAAiB,CACf,UAAAC,KAAA;IAAA,IAAGvC,GAAG,GAAAuC,KAAA,CAAHvC,GAAG;IAAA,OACJ;MACEA,GAAG,CAACkb,kBAAkB,EAAE,UAAC1C,SAAS;QAAA,OAAA1Y,QAAA,KAC7B0Y,SAAS;UACZpe,KAAK,EAAE,IAAI;UACX+gB,cAAc,EAAE;;OAChB,CAAC;KACJ;KACH,EAAE,CACH,CACF;EACD/hB,aAAa,CACX,cAAc,EACdkJ,iBAAiB,CACf,UAAAI,KAAA;IAAA,IAAG1C,GAAG,GAAA0C,KAAA,CAAH1C,GAAG;IAAA,OACJ;MACEA,GAAG,CAACkb,kBAAkB,EAAE,UAAC1C,SAAS;QAAA,OAAA1Y,QAAA,KAC7B0Y,SAAS;UACZ2C,cAAc,EAAE;;OAChB,CAAC;KACJ;KACH,EAAE,CACH,CACF;EACD/hB,aAAa,CACX,aAAa,EACbkJ,iBAAiB,CACf,UAAAa,KAAA;IAAA,IAAGnD,GAAG,GAAAmD,KAAA,CAAHnD,GAAG;IAAA,OACJ,UAAC3G,EAA6C;MAC5C,IAAI,CAAAA,EAAE,oBAAFA,EAAE,CAAEqiB,MAAM,MAAK,eAAe,EAAE;QAClC1b,GAAG,CAACkb,kBAAkB,EAAE,UAAC1C,SAAS;UAAA,OAAA1Y,QAAA,KAC7B0Y,SAAS;;;;YAIZ2C,cAAc,EAAE,IAAI;YACpBG,cAAc,KAAA3a,MAAA,CAAM6X,SAAS,CAAC8C,cAAc,GAAEjiB,EAAE,CAACwf,IAAI;;SACrD,CAAC;;KAEN;KACH,EAAE,CACH,CACF;EAED,OAAOjU,0CAAG1C,QAAQ,CAAI;AACxB,CAAC;;ACnID,IAAMyZ,cAAc,GAAwB,EAAE;AAC9C,IAAMC,2BAA2B,GAAG,SAA9BA,2BAA2BA;EAAA,OAAS,IAAI;AAAA;AAQ9C,IAAMC,YAAY,GAAU;EAC1Bvc,OAAO,EAAEqc,cAAc;EACvBG,oBAAoB,EAAEF;CACvB;AAED;;;AAGA,AAAO,IAAMG,eAAe,GAAG,SAAlBA,eAAeA,CAC1BpT,IAAkB,EAAA1D,KAAA;gCAKP4W,YAAY,GAAA5W,KAAA;IAHrB+W,WAAW,GAAA9gB,IAAA,CAAX8gB,WAAW;IAAAC,YAAA,GAAA/gB,IAAA,CACXoE,OAAO;IAAPA,OAAO,GAAA2c,YAAA,cAAGN,cAAc,GAAAM,YAAA;IAAAC,qBAAA,GAAAhhB,IAAA,CACxB4gB,oBAAoB;IAApBA,oBAAoB,GAAAI,qBAAA,cAAGN,2BAA2B,GAAAM,qBAAA;EAGpD,IAAAziB,SAAA,GAAwCC,QAAQ,CAAmB,IAAI,CAAC;IAAjEyiB,YAAY,GAAA1iB,SAAA;IAAE2iB,eAAe,GAAA3iB,SAAA;;;;EAKpC,IAAM4iB,eAAe,GAAGviB,MAAM,EAAuB;EACrDG,SAAS,CAAC;;;;;;;;IAQR,IACG0O,IAAI,KAAK,WAAW,IAAI,CAAAqT,WAAW,oBAAXA,WAAW,CAAE9hB,OAAO,MAAK,IAAI,IACtD,CAAC4hB,oBAAoB,EAAE,EAEvB;IAAO,SAEMQ,mBAAmBA,CAAAzN,EAAA;MAAA,OAAA0N,oBAAA,CAAA7b,KAAA,OAAA6H,SAAA;;;;;IAIlC,SAAAgU;MAAAA,oBAAA,GAAA/Y,iBAAA,CAJA,WAAmCgZ,EAAa;QAC9C,MAAMA,EAAE,CAACC,OAAO,EAAE;OACnB;MAAA,OAAAF,oBAAA,CAAA7b,KAAA,OAAA6H,SAAA;;IAKD,IAAMmU,uBAAuB,GAAG,SAA1BA,uBAAuBA;;;;;;MAM3BpiB,UAAU,CAAC;QAAA,OAAM8hB,eAAe,CAAC,IAAI,CAAC;SAAE,CAAC,CAAC;KAC3C;IAED,IAAII,EAAE,GAAGG,KAAK,CAACC,eAAe,EAAE;;;;;IAMhC,IAAI,CAACT,YAAY,IAAIK,EAAE,IAAI,CAACA,EAAE,CAAC3O,WAAW,EAAE,EAAE;MAC5C2O,EAAE,CAACK,IAAI,CAAC,yBAAyB,EAAEH,uBAAuB,CAAC;MAC3DN,eAAe,CAACI,EAAE,CAAC;MACnB;;;;;IAMF,IAAIL,YAAY,EAAE;;;;MAIhB,IAAI,CAACnf,eAAe,CAACqf,eAAe,CAACniB,OAAO,EAAEoF,OAAO,CAAC,EAAE;QACtDgd,mBAAmB,CAACH,YAAY,CAAC;;;;;MAKnC;;IAGF,IAAI,CAACK,EAAE,IAAIA,EAAE,CAAC3O,WAAW,EAAE,EAAE;;;;;;MAM3B,QAAQlF,IAAI;QACV,KAAK,WAAW;UACd6T,EAAE,GAAGR,WAAW,YAAXA,WAAW,CAAE9hB,OAAO,GACrByiB,KAAK,CAACG,WAAW,CAACd,WAAW,CAAC9hB,OAAO,EAAA4F,QAAA,KAAOR,OAAO,CAAE,CAAC,GACtDqd,KAAK,CAACG,WAAW,CAAAhd,QAAA,KAAMR,OAAO,CAAE,CAAC;UACrC;QACF,KAAK,YAAY;UACfkd,EAAE,GAAGG,KAAK,CAACI,gBAAgB,CAAAjd,QAAA,KAAMR,OAAO,CAAE,CAAC;UAC3C;;MAEJ+c,eAAe,CAACniB,OAAO,GAAGoF,OAAO;;IAGnC8c,eAAe,CAACI,EAAE,CAAC;IAEnBA,EAAE,CAACK,IAAI,CAAC,yBAAyB,EAAEH,uBAAuB,CAAC;;;;;;GAO5D,EAAE,CAACP,YAAY,EAAE7c,OAAO,EAAE0c,WAAW,EAAEF,oBAAoB,EAAEnT,IAAI,CAAC,CAAC;EAEpE,OAAOwT,YAAY;AACrB,CAAC;;AC3HD;;;AAGA,IAAaa,aAAa,GAAG,SAAhBA,aAAaA,CAAIjT,KAAsB;EAAA,OAClDgS,eAAe,CAAC,YAAY,EAAEhS,KAAK,CAAC;AAAA;;;ACFtC,IAiCakT,aAAa,GAA6C,SAA1DA,aAAaA,CAAA/hB,IAAA;MACxBgH,QAAQ,GAAAhH,IAAA,CAARgH,QAAQ;IAAAgb,oBAAA,GAAAhiB,IAAA,CACRiiB,eAAe;IAAfA,eAAe,GAAAD,oBAAA,cAAG,EAAE,GAAAA,oBAAA;IACjBnT,KAAK,GAAAC,6BAAA,CAAA9O,IAAA,EAAA+O,WAAA;EAER,IAAMmT,SAAS,GAAGtjB,MAAM,CAAY,EAAE,CAAC;;;;EAKvC,IAAMujB,WAAW,GAAG7gB,WAAW,CAAC,UAACnD,EAAoB;;IACnD,IAAI,EAAE,QAAQ,IAAIA,EAAE,CAAC,EAAE;IACvB,IAAMmB,KAAK,GAAGnB,EAAE,CAACwK,MAAoB;IACrC,IAAMyZ,WAAW,GAAGzhB,KAAK,CAACwQ,IAAI,EAAAkR,qBAAA,IAAAC,kBAAA,GAACJ,SAAS,CAACljB,OAAO,qBAAjBsjB,kBAAA,CAAoBhjB,KAAK,CAAC,YAAA+iB,qBAAA,GAAI,EAAE,CAAC;IAChE,IAAME,gBAAgB,GAAGH,WAAW,CAACpc,MAAM,CAAC,UAAA7F,KAAA;MAAA,IAAET,GAAG,GAAAS,KAAA;MAAA,OAAMT,GAAG,GAAG,CAAC;MAAC;IAC/D,IAAM8iB,cAAc,GAAGJ,WAAW,CAACpc,MAAM,CAAC,UAAAhF,KAAA;MAAA,IAAEtB,GAAG,GAAAsB,KAAA;MAAA,OAAMtB,GAAG,GAAG,CAAC;MAAC;IAC7D,IAAM+iB,cAAc,MAAAhd,MAAA,CAAO8c,gBAAgB,EAAKC,cAAc,CAAC;IAC/D,SAAAvf,SAAA,GAAAC,+BAAA,CAAmBuf,cAAc,GAAArf,KAAA,IAAAA,KAAA,GAAAH,SAAA,IAAAI,IAAA,GAAE;MAAA,IAAAqf,WAAA,GAAAtf,KAAA,CAAAE,KAAA;QAAvBqf,EAAE,GAAAD,WAAA;MACZC,EAAE,CAACxkB,EAAE,CAAC;;GAET,EAAE,EAAE,CAAC;;;;;EAMN,IAAMykB,iBAAiB,GAAGthB,WAAW,CACnC,UAAC9D,KAAgB;IACf,IAAI,CAACA,KAAK,EAAE;IACXsG,MAAM,CAACC,IAAI,CAACme,SAAS,CAACljB,OAAO,CAAkB,CAAC6C,OAAO,CAAC,UAACvC,KAAK;MAC7D9B,KAAK,CAACK,GAAG,CAACyB,KAAmB,EAAE6iB,WAAW,CAAC;MAC3C,IAAI,CAAC3kB,KAAK,CAACmV,WAAW,EAAE,EAAE;QACxBnV,KAAK,CAACI,EAAE,CAAC0B,KAAmB,EAAE6iB,WAAW,CAAC;;KAE7C,CAAC;GACH,EACD,CAACA,WAAW,CAAC,CACd;EAED,IAAMU,kBAAkB,GAAG,YAAY,IAAIhU,KAAK,GAAGA,KAAK,CAACiU,UAAU,GAAG,IAAI;EAE1E,IAAMC,eAAe,GAAGjkB,OAAO,CAC7B;IAAA,OAAO,YAAY,IAAI+P,KAAK,GAAG,EAAE,GAAGA,KAAK;GAAC,EAC1C,CAACA,KAAK,CAAC,CACR;EACD,IAAMmU,kBAAkB,GAAGlB,aAAa,CAAC;IACvC1d,OAAO,EAAE2e,eAAe;IACxBnC,oBAAoB,EAAEtf,WAAW,CAAC;MAChC,OAAO,EAAE,YAAY,IAAIuN,KAAK,CAAC;KAChC,EAAE,CAACA,KAAK,CAAC;GACX,CAAC;EAEF,IAAMiU,UAAU,GAAGD,kBAAkB,WAAlBA,kBAAkB,GAAIG,kBAAkB;EAE3DjkB,SAAS,CAAC;IACR,IAAI,CAAC+jB,UAAU,EAAE;IACjBF,iBAAiB,CAACE,UAAU,CAAC;GAC9B,EAAE,CAACA,UAAU,EAAEF,iBAAiB,CAAC,CAAC;;;;EAKnC,IAAMhlB,EAAE,GAAG0D,WAAW,CACpB,UAACnD,EAAc,EAAEwkB,EAAY,EAAEjjB,GAAW;;IACxC,IAAI,CAACwiB,SAAS,CAACljB,OAAO,CAACb,EAAE,CAAC,EAAE;MAC1B+jB,SAAS,CAACljB,OAAO,CAACb,EAAE,CAAC,GAAG,IAAIqF,GAAG,EAAE;MACjC,IAAIsf,UAAU,EAAE;;;;;QAKdA,UAAU,CAACjlB,GAAG,CAACM,EAAE,EAAEgkB,WAAW,CAAC;QAC/B,IAAI,CAACW,UAAU,CAACnQ,WAAW,EAAE,EAAE;UAC7BmQ,UAAU,CAACllB,EAAE,CAACO,EAAE,EAAEgkB,WAAW,CAAC;;;;IAIpC,IAAI,GAAAc,sBAAA,GAACf,SAAS,CAACljB,OAAO,CAACb,EAAE,CAAC,aAArB8kB,sBAAA,CAAuB1f,GAAG,CAAC7D,GAAG,CAAC,GAAE;MAAA,IAAAwjB,sBAAA;MACpC,CAAAA,sBAAA,GAAAhB,SAAS,CAACljB,OAAO,CAACb,EAAE,CAAC,qBAArB+kB,sBAAA,CAAuBpe,GAAG,CAACpF,GAAG,EAAEijB,EAAE,CAAC;;GAEtC,EACD,CAACG,UAAU,EAAEX,WAAW,CAAC,CAC1B;;;;EAKD,IAAMtkB,GAAG,GAAGyD,WAAW,CACrB,UAACnD,EAAc,EAAEuB,GAAW;;IAC1B,CAAAyjB,sBAAA,GAAAjB,SAAS,CAACljB,OAAO,CAACb,EAAE,CAAC,qBAArBglB,sBAAA,UAA6B,CAACzjB,GAAG,CAAC;IAClC,IAAI,EAAA0jB,sBAAA,GAAAlB,SAAS,CAACljB,OAAO,CAACb,EAAE,CAAC,qBAArBilB,sBAAA,CAAuBpgB,IAAI,MAAK,CAAC,EAAE;MACrC8f,UAAU,oBAAVA,UAAU,CAAEjlB,GAAG,CAACM,EAAE,EAAEgkB,WAAW,CAAC;MAChC,OAAOD,SAAS,CAACljB,OAAO,CAACb,EAAE,CAAC;;GAE/B,EACD,CAAC2kB,UAAU,EAAEX,WAAW,CAAC,CAC1B;EAED,OACEzY,oBAAC2Z,UAAU,oBAAKpB,eAAe,GAC7BvY,oBAACrM,YAAY,CAAC2f,QAAQ;IAAC1Z,KAAK,EAAEwf;KAC5BpZ,oBAAC/L,iBAAiB,CAACqf,QAAQ;IAAC1Z,KAAK,EAAE;MAAE1F,EAAE,EAAFA,EAAE;MAAEC,GAAG,EAAHA;;KACvC6L,oBAACmW,SAAS,QACRnW,oBAACmU,YAAY,QACXnU,oBAAC4U,YAAY,QACX5U,oBAAC3C,iBAAiB,QAChB2C,oBAACsV,eAAe,QACdtV,oBAAC2T,kBAAkB,QACjB3T,oBAAC2W,mBAAmB,QAClB3W,oBAACuO,YAAY,QAAEjR,QAAQ,CAAgB,CACnB,CACH,CACL,CACA,CACP,CACF,CACL,CACe,CACP,CACb;AAEjB,CAAC;;ACpJD;;;;;AAKA,IAAasc,cAAc,GAAG,SAAjBA,cAAcA,CACzB3U,SAAiB,EAAA5E,KAAA;gCACiD,EAAE,GAAAA,KAAA;IAAlE4B,iBAAiB,GAAA3L,IAAA,CAAjB2L,iBAAiB;IAAEC,oBAAoB,GAAA5L,IAAA,CAApB4L,oBAAoB;EAEzC,IAAM/F,WAAW,GAAGnF,cAAc,CAAC6F,gBAAgB,CAACoI,SAAS,CAAC,CAAC;EAE/D1N,sBAAsB,CACpB,CAAC,qBAAqB,EAAE,kBAAkB,CAAC,EAC3CK,WAAW,CACT,UAACmH,IAAI;IACH,IAAM8a,YAAY,GAAG9a,IAAI,CAACzC,MAAM,CAC9B,UAAC7H,EAAE;MAAA,OAAKA,EAAE,CAAC0H,WAAW,CAAC6B,UAAU,KAAKiH,SAAS;MAChD;IACD,IAAI,CAAC4U,YAAY,CAAChiB,MAAM,EAAE;IAC1BgiB,YAAY,CAAC1hB,OAAO,CAAC,UAAC1D,EAAE;MACtB,QAAQA,EAAE,CAACwK,MAAM;QACf,KAAK,qBAAqB;UACxBiD,oBAAoB,oBAApBA,oBAAoB,CAAGzN,EAAE,CAAC;UAC1B;QACF,KAAK,kBAAkB;UACrBwN,iBAAiB,oBAAjBA,iBAAiB,CAAGxN,EAAE,CAAC;UACvB;;KAEL,CAAC;GACH,EACD,CAACwN,iBAAiB,EAAEC,oBAAoB,EAAE+C,SAAS,CAAC,CACrD,CACF;EAEDjR,aAAa,CAACmI,WAAW,CAAC;EAE1B,OAAOA,WAAW;AACpB,CAAC;;AC7BD;;;;AAIA,IAAa2d,oBAAoB,GAAG,SAAvBA,oBAAoBA,CAAAzZ,KAAA;gCAGH,EAAE,GAAAA,KAAA;IAAAE,gBAAA,GAAAjK,IAAA,CAF9BkK,WAAW;IAAXA,WAAW,GAAAD,gBAAA,cAAG,KAAK,GAAAA,gBAAA;IACnBwB,qBAAqB,GAAAzL,IAAA,CAArByL,qBAAqB;EAErB,IAAMjO,KAAK,GAAGD,QAAQ,EAAE;EACxB,IAAM6M,cAAc,GAAG1J,cAAc,CAACwF,aAAa,CAAC;EACpD,IAAA3H,SAAA,GAAgCC,QAAQ,CAAC,EAAE,CAAC;IAArCgM,QAAQ,GAAAjM,SAAA;IAAEkM,WAAW,GAAAlM,SAAA;EAC5B,IAAMklB,iBAAiB,GAAGH,cAAc,CAAC9Y,QAAQ,CAAC;EAElDzL,SAAS,CAAC;;IACR,IAAI,CAACvB,KAAK,EAAE;IACZ,IAAMiK,KAAK,GAAGjK,KAAK,qBAAAgV,mBAAA,GAALhV,KAAK,CAAE+J,YAAY,EAAE,qBAArBiL,mBAAA,CAAuB/K,KAAK;IAC1C,IAAIyC,WAAW,IAAIE,cAAc,MAAK3C,KAAK,oBAALA,KAAK,CAAEC,UAAU,GAAE;;IAGzD+C,WAAW,CAACL,cAAc,WAAdA,cAAc,GAAI,EAAE,CAAC;GAClC,EAAE,CAAC5M,KAAK,EAAE0M,WAAW,EAAEE,cAAc,CAAC,CAAC;EAExClM,aAAa,CACX,uBAAuB,EACvBoD,WAAW,CACT,UAACnD,EAAE;IACDsN,qBAAqB,oBAArBA,qBAAqB,CAAGtN,EAAE,CAAC;GAC5B,EACD,CAACsN,qBAAqB,CAAC,CACxB,CACF;EAED/N,aAAa,CAAC+lB,iBAAiB,CAAC;EAEhC,OAAOA,iBAAiB;AAC1B,CAAC;;ACpCD;;;;AAIA,IAAaC,aAAa,GAAG,SAAhBA,aAAaA,CAAA3Z,KAAA;gCAEG,EAAE,GAAAA,KAAA;IAD7B4Z,YAAY,GAAA3jB,IAAA,CAAZ2jB,YAAY;EAEZ,IAAMnmB,KAAK,GAAGD,QAAQ,EAAE;EAExB,IAAMqmB,cAAc,GAAyBtiB,WAAW,CACtD,UAACqc,IAAI,EAAEkG,EAAE;QAAFA,EAAE;MAAFA,EAAE,GAAG,GAAG;;IACb,IAAI,CAACrmB,KAAK,EAAE;IACZA,KAAK,CAAComB,cAAc,CAACjG,IAAI,EAAEkG,EAAE,CAAC;GAC/B,EACD,CAACrmB,KAAK,CAAC,CACR;EAED,IAAMsmB,gBAAgB,GAAGxiB,WAAW,CAClC,UAACnD,EAAoC;IACnCwlB,YAAY,oBAAZA,YAAY,CAAGxlB,EAAE,EAAEylB,cAAc,CAAC;GACnC,EACD,CAACD,YAAY,EAAEC,cAAc,CAAC,CAC/B;EAED1lB,aAAa,CAAC,aAAa,EAAE4lB,gBAAgB,CAAC;EAE9C,OAAOF,cAAc;AACvB,CAAC;;AC9CD,IAAMG,mBAAmB,uwCA8CxB;AAED,AAAO,IAAMC,kBAAkB,8DAA+CC,kBAAkB,CAC9FF,mBAAmB,CAClB;;AC/CH;;;;;;AAMA,IAAaG,aAAa,GAAG,SAAhBA,aAAaA,CACxBC,UAAwC,EACxCC,cAAwC;EAExC,IAAMC,QAAQ,GAAGzlB,MAAM,EAAgB;EAEvCG,SAAS,CACP,SAASulB,6BAA6BA;;IAEpC,IAAI,CAACH,UAAU,EAAE;IACjB,IAAMI,QAAQ,GACZ,OAAOC,YAAY,KAAK,WAAW,GAC/BA,YAAY,GACZ,OAAOC,MAAM,CAACC,kBAAkB,KAAK,WAAW,GAChDD,MAAM,CAACC,kBAAkB,GACzB,IAAI;;IAEV,IAAI,CAACH,QAAQ,EAAE;IACf,IAAI,CAACF,QAAQ,CAACrlB,OAAO,EAAE;;MAErBqlB,QAAQ,CAACrlB,OAAO,GAAG,IAAIulB,QAAQ,EAAE;;IAEnC,IAAMI,YAAY,GAAGN,QAAQ,CAACrlB,OAAO;;IAErC,IAAI,CAAC2lB,YAAY,EAAE;IAEnB,IAAMC,iBAAiB,GAAGD,YAAY,CAACE,uBAAuB,CAC5D,IAAI5iB,WAAW,CAAC,CAACkiB,UAAU,CAAC,CAAC,CAC9B;IACD,IAAIW,IAA6B;IACjC,IAAIC,QAAkB;IAEtB,IAAMC,eAAe;MAAA,IAAAhlB,IAAA,GAAAsI,iBAAA,CAAG;;;;;;;;;;;QAWtB,IAAI;UACFwc,IAAI,GAAG,IAAIG,gBAAgB,CAACN,YAAY,EAAE,YAAY,CAAC;UACvDI,QAAQ,GAAGJ,YAAY,CAACO,UAAU,EAAE;SACrC,CAAC,OAAAzK,OAAA,EAAM;UACN,IAAI;YACF,MAAMkK,YAAY,CAACQ,YAAY,CAACC,SAAS,CAACpB,kBAAkB,CAAC;YAC7Dc,IAAI,GAAG,IAAIG,gBAAgB,CAACN,YAAY,EAAE,YAAY,CAAC;YACvDI,QAAQ,GAAGJ,YAAY,CAACO,UAAU,EAAE;WACrC,CAAC,OAAO9jB,CAAC,EAAE;YACVnC,OAAO,CAACC,KAAK,CAACkC,CAAC,CAAC;;;QAIpB,IAAI,EAAE0jB,IAAI,IAAIC,QAAQ,CAAC,EAAE;QAEzBD,IAAI,CAACO,IAAI,CAACC,SAAS,GAAG,UAAChmB,KAAK;UAC1B,IAAIimB,MAAM,GAAG,CAAC;UACd,IAAIjmB,KAAK,CAACqe,IAAI,CAAC4H,MAAM,EAAEA,MAAM,GAAGjmB,KAAK,CAACqe,IAAI,CAAC4H,MAAM;UACjD,IAAI,CAACT,IAAI,EAAE;UACXV,cAAc,CAACmB,MAAM,CAAC;SACvB;QAEDR,QAAQ,CAACS,IAAI,CAACliB,KAAK,GAAG,CAAC;QAEvB,IAAI;UACFshB,iBAAiB,CACda,OAAO,CAACX,IAAI,CAAC,CACbW,OAAO,CAACV,QAAQ,CAAC,CACjBU,OAAO,CAACd,YAAY,CAACe,WAAW,CAAC;SACrC,CAAC,OAAOtkB,CAAC,EAAE;UACVnC,OAAO,CAAC8W,IAAI,CAAC3U,CAAC,CAAC;;OAElB;MAAA,gBA3CK4jB,eAAeA;QAAA,OAAAhlB,IAAA,CAAAwF,KAAA,OAAA6H,SAAA;;OA2CpB;IAED2X,eAAe,EAAE;IAEjB,OAAO;;MACL,CAAAW,KAAA,GAAAb,IAAI,qBAAJa,KAAA,CAAMC,UAAU,EAAE;MAClBd,IAAI,GAAG,IAAI;MACXF,iBAAiB,oBAAjBA,iBAAiB,CAAEgB,UAAU,EAAE;KAChC;GACF,EACD,CAACxB,cAAc,EAAED,UAAU,CAAC,CAC7B;AACH,CAAC;;ACxFD;;;;;AAKA,IAAa0B,qBAAqB,GAAG,SAAxBA,qBAAqBA,CAAI5lB,EAAU,EAAE0iB,EAAsB;EACtE,IAAMnlB,KAAK,GAAGD,QAAQ,EAAE;EACxB,IAAM4M,cAAc,GAAGR,iBAAiB,EAAE;EAC1C,IAAMiL,OAAO,GAAG3U,EAAE,KAAKkK,cAAc;EAErCjM,aAAa,CACX,mBAAmB,EACnBoD,WAAW,CACT,UAACnD,EAAE;IACD,IAAI,CAACyW,OAAO,EAAE;IACd+N,EAAE,CAACxkB,EAAE,CAAC2nB,UAAU,CAAC;GAClB,EACD,CAACnD,EAAE,EAAE/N,OAAO,CAAC,CACd,CACF;EAED1W,aAAa,CACX,iCAAiC,EACjCoD,WAAW,CACT,UAACnD,EAAE;IACD,IAAIyW,OAAO,EAAE;IACb+N,EAAE,CAACxkB,EAAE,CAAC4nB,sBAAsB,CAAC9lB,EAAE,CAAC,CAAC;GAClC,EACD,CAAC0iB,EAAE,EAAE1iB,EAAE,EAAE2U,OAAO,CAAC,CAClB,CACF;EAED7V,SAAS,CACP,SAASinB,4BAA4BA;IACnC,IAAI,CAACxoB,KAAK,IAAIA,KAAK,CAACmV,WAAW,EAAE,IAAI,CAACiC,OAAO,EAAE;IAC/C,IAAIpX,KAAK,CAACyoB,gCAAgC,EAAE,EAAE;IAC9CzoB,KAAK,CAAC0oB,4BAA4B,EAAE;GACrC,EACD,CAAC1oB,KAAK,EAAEoX,OAAO,CAAC,CACjB;EAED7V,SAAS,CACP,SAASonB,6BAA6BA;IACpC,IAAI,CAAC3oB,KAAK,IAAIA,KAAK,CAACmV,WAAW,EAAE,IAAIiC,OAAO,EAAE;IAC9C,IAAIpX,KAAK,CAAC4oB,6CAA6C,EAAE,EAAE;IAC3D5oB,KAAK,CAAC6oB,yCAAyC,EAAE;GAClD,EACD,CAAC7oB,KAAK,EAAEoX,OAAO,CAAC,CACjB;AACH,CAAC;;ACvDD;;;;AAIA,IAAa0R,aAAa,GAAG,SAAhBA,aAAaA,CAAI9lB,aAAqB;EAAA,OACjDsN,aAAa,CAACtN,aAAa,EAAE,OAAO,CAAC;AAAA;;ACHvC;;;AAGA,IAAa+lB,YAAY,GAAG,SAAfA,YAAYA,CAAI1X,KAAY;EAAA,OACvCgS,eAAe,CAAC,WAAW,EAAEhS,KAAK,CAAC;AAAA;;ACMrC,IAAM2X,YAAY,gBAAGrgB,IAAI,CAAU;EACjCzG,GAAG,EAAE,gBAAgB;EACrB,WAAS;IACPsO,KAAK,EAAE,KAAK;IACZ4O,MAAM,EAAE;;CAEX,CAAC;AAMF;;;;AAIA,IAAa6J,UAAU,GAAG,SAAbA,UAAUA,CAAA1c,KAAA;gCAAiC,EAAE,GAAAA,KAAA;IAA7B2c,eAAe,GAAA1mB,IAAA,CAAf0mB,eAAe;EAC1C,IAAMC,GAAG,GAAGjmB,cAAc,CAAC8lB,YAAY,CAAC;EACxC,IAAMhpB,KAAK,GAAGD,QAAQ,EAAE;EACxB,IAAMwgB,YAAY,GAAG4B,eAAe,EAAE;EAEtC,IAAMiH,kBAAkB,GAAGxf,iBAAiB,CAC1C,UAAAjH,KAAA;IAAA,IAAG2E,GAAG,GAAA3E,KAAA,CAAH2E,GAAG;MAAEuD,QAAQ,GAAAlI,KAAA,CAARkI,QAAQ;IAAA;MAAA,IAAArH,KAAA,GAAAsH,iBAAA,CACd,WAAOqe,GAAY;QACjB,IAAM7d,IAAI,SAAST,QAAQ,CAACE,UAAU,CAACie,YAAY,CAAC;QACpD,IAAIK,SAAS,CAAC/d,IAAI,EAAE6d,GAAG,CAAC,EAAE;QAC1B7hB,GAAG,CAAC0hB,YAAY,EAAEG,GAAG,CAAC;OACvB;MAAA,iBAAAhT,EAAA;QAAA,OAAA3S,KAAA,CAAAwE,KAAA,OAAA6H,SAAA;;;KACH,EAAE,CACH;EAEDtO,SAAS,CAAC;IACR,IAAI+nB,OAAO,GAAG,IAAI;IAClB,IAAI,CAACtpB,KAAK,IAAIA,KAAK,CAACmV,WAAW,EAAE,IAAIoL,YAAY,KAAK,gBAAgB,EACpE;IACFvgB,KAAK,CAACupB,eAAe,EAAE,CAAClR,IAAI,CAAC,UAACmR,KAAK;MACjC,IAAI,CAACF,OAAO,EAAE;MACdF,kBAAkB,CAAC;QACjB5Y,KAAK,EAAEgZ,KAAK,CAACC,YAAY;QACzBrK,MAAM,EAAEoK,KAAK,CAACE;OACf,CAAC;KACH,CAAC;IACF,OAAO;MACLJ,OAAO,GAAG,KAAK;KAChB;GACF,EAAE,CAACtpB,KAAK,EAAEugB,YAAY,EAAE6I,kBAAkB,CAAC,CAAC;EAE7C1oB,aAAa,CACX,iBAAiB,EACjBoD,WAAW,CACT,UAACnD,EAAE;IACDyoB,kBAAkB,CAAC;MACjB5Y,KAAK,EAAE7P,EAAE,CAAC8oB,YAAY;MACtBrK,MAAM,EAAEze,EAAE,CAAC+oB;KACZ,CAAC;IACFR,eAAe,oBAAfA,eAAe,CAAGvoB,EAAE,CAAC;GACtB,EACD,CAACuoB,eAAe,EAAEE,kBAAkB,CAAC,CACtC,CACF;EAEDlpB,aAAa,CAACipB,GAAG,CAAC;EAElB,OAAOA,GAAG;AACZ,CAAC;;ACzED;;;AAGA,IAAaQ,aAAa,GAAG,SAAhBA,aAAaA;EACxB,IAAMC,YAAY,GAAG1mB,cAAc,CAAC8c,iBAAiB,CAAC;EACtD,IAAM6J,aAAa,GAAG3mB,cAAc,CAAC+c,kBAAkB,CAAC;EACxD,IAAMlR,MAAM,GAAG;IACb6a,YAAY,EAAZA,YAAY;IACZC,aAAa,EAAbA;GACD;EACD3pB,aAAa,CAAC6O,MAAM,CAAC;EACrB,OAAOA,MAAM;AACf,CAAC;;ACHD;;;AAGA,IAAa+a,UAAU,GAAG,SAAbA,UAAUA;EACrB,IAAM9pB,KAAK,GAAGD,QAAQ,EAAE;EAExB,IAAMgqB,QAAQ,GAAG7mB,cAAc,CAACiX,kBAAkB,CAAC;EACnD,IAAM6P,QAAQ,GAAG9mB,cAAc,CAACkX,sBAAsB,CAAC;EACvD,IAAM6P,UAAU,GAAG/mB,cAAc,CAACmX,kBAAkB,CAAC;EACrD,IAAM6P,UAAU,GAAGhnB,cAAc,CAACoX,sBAAsB,CAAC;EACzD,IAAM6P,cAAc,GAAGjnB,cAAc,CAACqX,mBAAmB,CAAC;EAC1D,IAAM6P,WAAW,GAAGlnB,cAAc,CAACsX,oBAAoB,CAAC;EAExD,IAAA1Z,WAAA,GAA2Bb,UAAU,CAAC8Z,mBAAmB,CAAC;IAAlDC,cAAc,GAAAlZ,WAAA,CAAdkZ,cAAc;;;;EAKtB,IAAMqQ,SAAS,GAAGvmB,WAAW;IAAA,IAAAtB,IAAA,GAAAsI,iBAAA,CAC3B,WAAOwQ,QAAgB;MACrB,MAAMtb,KAAK,oBAALA,KAAK,CAAEsqB,oBAAoB,CAAC;QAChCC,aAAa,EAAE,IAAI;QACnBC,aAAa,EAAElP;OAChB,CAAC;KACH;IAAA,iBAAAnF,EAAA;MAAA,OAAA3T,IAAA,CAAAwF,KAAA,OAAA6H,SAAA;;OACD,CAAC7P,KAAK,CAAC,CACR;;;;EAKD,IAAMyqB,aAAa,GAAG3mB,WAAW;IAAA,IAAAnB,KAAA,GAAAmI,iBAAA,CAC/B,WAAOwQ,QAAgB;MACrB,MAAMtb,KAAK,oBAALA,KAAK,CAAEsqB,oBAAoB,CAAC;QAChCC,aAAa,EAAEjP,QAAQ;QACvBkP,aAAa,EAAE;OAChB,CAAC;KACH;IAAA,iBAAAE,GAAA;MAAA,OAAA/nB,KAAA,CAAAqF,KAAA,OAAA6H,SAAA;;OACD,CAAC7P,KAAK,CAAC,CACR;;;;EAKD,IAAM2qB,UAAU,GAAG7mB,WAAW;IAAA,IAAAN,KAAA,GAAAsH,iBAAA,CAC5B,WAAOwQ,QAAgB;MACrB,MAAMtb,KAAK,oBAALA,KAAK,CAAE4qB,oBAAoB,CAAC;QAChCC,cAAc,EAAEvP;OACjB,CAAC;KACH;IAAA,iBAAAwP,GAAA;MAAA,OAAAtnB,KAAA,CAAAwE,KAAA,OAAA6H,SAAA;;OACD,CAAC7P,KAAK,CAAC,CACR;EAED,IAAM+qB,WAAW,GAAsB,CACrC,SAAS,EACT,QAAQ,EACR,WAAW,EACX,qBAAqB,EACrB,4BAA4B,EAC5B,wBAAwB,EACxB,SAAS,CACV;EAED,IAAMhc,MAAM,GAAG;;;;IAIbqb,WAAW,EAAXA,WAAW;;;;IAIXY,OAAO,EAAEf,UAAU;;;;IAInBF,QAAQ,EAARA,QAAQ;;;;IAIRkB,UAAU,EAAEhB,UAAU,CAAC9N,IAAI,CAAC,UAAC+O,GAAG;MAAA,OAAKA,GAAG,CAAChP,QAAQ;MAAC;;;;IAIlDiP,UAAU,EAAEjB,UAAU,CAAC/N,IAAI,CAAC,UAACR,GAAG;MAAA,OAAKA,GAAG,CAACO,QAAQ;MAAC;;;;IAIlDkP,cAAc,EAAEjB,cAAc,CAAChO,IAAI,CAAC,UAACP,OAAO;MAAA,OAAKA,OAAO,CAACM,QAAQ;MAAC;;;;IAIlEmP,WAAW,EAAEN,WAAW,CAACtf,QAAQ,CAACse,QAAQ,CAAC;;;;IAI3CuB,WAAW,EAAEP,WAAW,CAACtf,QAAQ,CAACue,QAAQ,CAAC;;;;IAI3CuB,WAAW,EAAErB,UAAU;;;;IAIvBF,QAAQ,EAARA,QAAQ;;;;IAIRhQ,cAAc,EAAdA,cAAc;;;;IAIdqQ,SAAS,EAATA,SAAS;;;;IAITI,aAAa,EAAbA,aAAa;;;;IAIbE,UAAU,EAAVA,UAAU;;;;IAIV3X,QAAQ,EAAEmX;GACX;EAEDjqB,aAAa,CAAC6O,MAAM,CAAC;EAErB,OAAOA,MAAM;AACf,CAAC;;ACrHD,IAAMyc,kBAAkB,gBAAG7iB,IAAI,CAA4B;EACzDzG,GAAG,EAAEH,aAAa,GAAG,gBAAgB;EACrC,WAAS;CACV,CAAC;AAEF,IAAa0pB,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAAAlf,KAAA;gCAGH,EAAE,GAAAA,KAAA;IAF1B+C,OAAO,GAAA9M,IAAA,CAAP8M,OAAO;IACPoc,sBAAsB,GAAAlpB,IAAA,CAAtBkpB,sBAAsB;EAEtB,IAAMC,aAAa,GAAGzoB,cAAc,CAACsoB,kBAAkB,CAAC;EACxD,IAAAI,cAAA,GAA0BjC,aAAa,EAAE;IAAjCE,aAAa,GAAA+B,cAAA,CAAb/B,aAAa;EACrB,IAAM7pB,KAAK,GAAGD,QAAQ,EAAE;EAExB,IAAM8rB,wBAAwB,GAAGjiB,iBAAiB,CAChD,UAAAjH,KAAA;IAAA,IAAG2E,GAAG,GAAA3E,KAAA,CAAH2E,GAAG;IAAA,OACJ,UAACqkB,aAAiC;MAChCrkB,GAAG,CAACkkB,kBAAkB,EAAEG,aAAa,CAAC;KACvC;KACH,EAAE,CACH;EAEDpqB,SAAS,CAAC;IACR,IAAI,CAACvB,KAAK,EAAE;IACZA,KAAK,CAAC8rB,gBAAgB,EAAE,CAACzT,IAAI,CAACwT,wBAAwB,CAAC;GACxD,EAAE,CAAC7rB,KAAK,EAAE6rB,wBAAwB,CAAC,CAAC;;;;EAKrCnrB,aAAa,CACX,wBAAwB,EACxBoD,WAAW,CACT,UAACnD,EAAE;IACDkrB,wBAAwB,CAAClrB,EAAE,CAACgrB,aAAa,CAAC;IAC1CD,sBAAsB,oBAAtBA,sBAAsB,CAAG/qB,EAAE,CAAC;GAC7B,EACD,CAAC+qB,sBAAsB,EAAEG,wBAAwB,CAAC,CACnD,CACF;;;;EAKDnrB,aAAa,CACX,gBAAgB,EAChBoD,WAAW,CACT,UAACnD,EAAE;IACD,IAAIA,EAAE,CAACsP,IAAI,KAAK,sBAAsB,EAAE;IACxCX,OAAO,oBAAPA,OAAO,CAAG3O,EAAwC,CAAC;GACpD,EACD,CAAC2O,OAAO,CAAC,CACV,CACF;;;;EAKD,IAAMyc,mBAAmB,GAAGjoB,WAAW,CACrC;sCAAI4L,IAAkD,OAAAvM,KAAA,CAAAwM,IAAA,GAAAC,IAAA,MAAAA,IAAA,GAAAD,IAAA,EAAAC,IAAA;MAAlDF,IAAkD,CAAAE,IAAA,IAAAC,SAAA,CAAAD,IAAA;;IACpD,OAAO5P,KAAK,oBAALA,KAAK,CAAE+rB,mBAAmB,CAAA/jB,KAAA,CAA1BhI,KAAK,EAAyB0P,IAAI,CAAC;GAC3C,EACD,CAAC1P,KAAK,CAAC,CACR;EAED,IAAM+O,MAAM,GAAG;IACb2Q,QAAQ,EACN,CAAAmK,aAAa,oBAAbA,aAAa,CAAE5Z,IAAI,MAAK,sBAAsB,GAC1C4Z,aAAa,CAACnK,QAAQ,GACtB,IAAI;IACViM,aAAa,EAAbA,aAAa;IACbI,mBAAmB,EAAnBA;GACD;EAED7rB,aAAa,CAAC6O,MAAM,CAAC;EAErB,OAAOA,MAAM;AACf,CAAC;;AC3ED;;;;;;AAMA,IAAaid,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAAAzf,KAAA;gCAMH,EAAE,GAAAA,KAAA;IAL1B0f,oBAAoB,GAAAzpB,IAAA,CAApBypB,oBAAoB;IACpBC,sBAAsB,GAAA1pB,IAAA,CAAtB0pB,sBAAsB;IACtBC,sBAAsB,GAAA3pB,IAAA,CAAtB2pB,sBAAsB;IACtBC,sBAAsB,GAAA5pB,IAAA,CAAtB4pB,sBAAsB;IACtBC,sBAAsB,GAAA7pB,IAAA,CAAtB6pB,sBAAsB;EAEtB,IAAMrsB,KAAK,GAAGD,QAAQ,EAAE;EACxB,IAAMyQ,KAAK,GAAGtN,cAAc,CAACuc,kBAAkB,CAAC;EAEhD/e,aAAa,CACX,wBAAwB,EACxBoD,WAAW,CACT,UAACnD,EAAE;IACDurB,sBAAsB,oBAAtBA,sBAAsB,CAAGvrB,EAAE,CAAC;GAC7B,EACD,CAACurB,sBAAsB,CAAC,CACzB,CACF;EACDxrB,aAAa,CACX,wBAAwB,EACxBoD,WAAW,CACT,UAACnD,EAAE;IACDwrB,sBAAsB,oBAAtBA,sBAAsB,CAAGxrB,EAAE,CAAC;GAC7B,EACD,CAACwrB,sBAAsB,CAAC,CACzB,CACF;EACDzrB,aAAa,CACX,wBAAwB,EACxBoD,WAAW,CACT,UAACnD,EAAE;IACDyrB,sBAAsB,oBAAtBA,sBAAsB,CAAGzrB,EAAE,CAAC;GAC7B,EACD,CAACyrB,sBAAsB,CAAC,CACzB,CACF;EACD1rB,aAAa,CACX,sBAAsB,EACtBoD,WAAW,CACT,UAACnD,EAAE;IACDsrB,oBAAoB,oBAApBA,oBAAoB,CAAGtrB,EAAE,CAAC;GAC3B,EACD,CAACsrB,oBAAoB,CAAC,CACvB,CACF;EACDvrB,aAAa,CACX,gBAAgB,EAChBoD,WAAW,CACT,UAACnD,EAAE;IACD,IAAIA,EAAE,CAACsP,IAAI,KAAK,wBAAwB,EAAE;IAC1Coc,sBAAsB,oBAAtBA,sBAAsB,CAAG1rB,EAA0C,CAAC;GACrE,EACD,CAAC0rB,sBAAsB,CAAC,CACzB,CACF;EAED,IAAMC,kBAAkB,GAAGxoB,WAAW,CACpC;IACE,IAAI,CAAC9D,KAAK,EAAE;IACZA,KAAK,CAACssB,kBAAkB,CAAAtkB,KAAA,CAAxBhI,KAAK,EAAA6P,SAA2B,CAAC;GAClC,EACD,CAAC7P,KAAK,CAAC,CACR;EAED,IAAMusB,iBAAiB,GAAGzoB,WAAW,CACnC;IACE,IAAI,CAAC9D,KAAK,EAAE;IACZA,KAAK,CAACusB,iBAAiB,CAAAvkB,KAAA,CAAvBhI,KAAK,EAAA6P,SAA0B,CAAC;GACjC,EACD,CAAC7P,KAAK,CAAC,CACR;EAED,IAAMwsB,mBAAmB,GAAG1oB,WAAW,CACrC;IACE,IAAI,CAAC9D,KAAK,EAAE;IACZA,KAAK,CAACwsB,mBAAmB,CAAAxkB,KAAA,CAAzBhI,KAAK,EAAA6P,SAA4B,CAAC;GACnC,EACD,CAAC7P,KAAK,CAAC,CACR;EAED,IAAM+O,MAAM,GAAA3H,QAAA,KACPoJ,KAAK;IACR8b,kBAAkB,EAAlBA,kBAAkB;IAClBC,iBAAiB,EAAjBA,iBAAiB;IACjBC,mBAAmB,EAAnBA;IACD;EAEDtsB,aAAa,CAAC6O,MAAM,CAAC;EAErB,OAAOA,MAAM;AACf,CAAC;;ACtHD;;;;AAIA,IAAa0d,mBAAmB,GAAG,SAAtBA,mBAAmBA;EAC9B,IAAMrgB,OAAO,GAAGlJ,cAAc,CAAC0F,YAAY,CAAC;EAC5C,IAAM8jB,gBAAgB,GAAG5G,cAAc,CAAC1Z,OAAO,CAAC;EAChDlM,aAAa,CAACwsB,gBAAgB,CAAC;EAC/B,OAAOA,gBAAgB;AACzB,CAAC;;ACGD;;;AAGA,IAAaC,sBAAsB,GAAG,SAAzBA,sBAAsBA,CAAApgB,KAAA;gCAAkC,EAAE,GAAAA,KAAA;IAArB+C,OAAO,GAAA9M,IAAA,CAAP8M,OAAO;EACvD,IAAMmR,mBAAmB,GAAGvd,cAAc,CAACgd,uBAAuB,CAAC;EAEnExf,aAAa,CACX,gBAAgB,EAChBoD,WAAW,CACT,UAACnD,EAAE;IACD,IAAIA,EAAE,CAACsP,IAAI,KAAK,4BAA4B,EAAE;IAC9CX,OAAO,oBAAPA,OAAO,CAAG3O,EAA6C,CAAC;GACzD,EACD,CAAC2O,OAAO,CAAC,CACV,CACF;EAED,IAAMP,MAAM,GAAG;IACboR,IAAI,EAAEM,mBAAmB,oBAAnBA,mBAAmB,CAAEN,IAAS;IACpCC,QAAQ,EAAEK,mBAAmB,oBAAnBA,mBAAmB,CAAEL;GAChC;EAEDlgB,aAAa,CAAC6O,MAAM,CAAC;EAErB,OAAOA,MAAM;AACf,CAAC;;AC1BD;;;;AAIA,IAAa6d,UAAU,GAAG,SAAbA,UAAUA,CAAArgB,KAAA;gCAGH,EAAE,GAAAA,KAAA;IAFpBsgB,mBAAmB,GAAArqB,IAAA,CAAnBqqB,mBAAmB;IACnBC,sBAAsB,GAAAtqB,IAAA,CAAtBsqB,sBAAsB;EAEtB,IAAM9sB,KAAK,GAAGD,QAAQ,EAAE;EAExB,IAAMqgB,QAAQ,GAAGld,cAAc,CAACyd,aAAa,CAAC;EAC9C,IAAMO,OAAO,GAAGhe,cAAc,CAAC0d,mBAAmB,CAAC;EACnD,IAAMQ,SAAS,GAAGle,cAAc,CAAC2d,qBAAqB,CAAC;EAEvDngB,aAAa,CACX,oBAAoB,EACpBoD,WAAW,CACT,UAACnD,EAAE;IACDksB,mBAAmB,oBAAnBA,mBAAmB,CAAGlsB,EAAE,CAAC;GAC1B,EACD,CAACksB,mBAAmB,CAAC,CACtB,CACF;EACDnsB,aAAa,CACX,wBAAwB,EACxBoD,WAAW,CACT,UAACnD,EAAE;IACDmsB,sBAAsB,oBAAtBA,sBAAsB,CAAGnsB,EAAE,CAAC;GAC7B,EACD,CAACmsB,sBAAsB,CAAC,CACzB,CACF;EAED,IAAMC,QAAQ,GAAGjpB,WAAW,eAAAgH,iBAAA,CAAC;IAC3B,IAAMkiB,QAAQ,SAAShtB,KAAK,oBAALA,KAAK,CAAEitB,eAAe,EAAE;IAC/C,OAAOD,QAAQ,oBAARA,QAAQ,CAAExD,KAAK;GACvB,GAAE,CAACxpB,KAAK,CAAC,CAAC;EAEX,IAAM+O,MAAM,GAAG;IACbge,QAAQ,EAARA,QAAQ;IACR7L,OAAO,EAAPA,OAAO;IACPE,SAAS,EAATA,SAAS;IACThB,QAAQ,EAARA;GACD;EAEDlgB,aAAa,CAAC6O,MAAM,CAAC;EAErB,OAAOA,MAAM;AACf,CAAC;;ACzDD,IAAMme,sBAAsB,gBAAGvkB,IAAI,CAAyB;EAC1DzG,GAAG,EAAEH,aAAa,GAAG,oBAAoB;EACzC,WAAS;IACPuX,MAAM,EAAE,CAAC;IACT6T,OAAO,EAAE;;CAEZ,CAAC;AAQF;;;AAGA,IAAaC,oBAAoB,GAAG,SAAvBA,oBAAoBA,CAAA7gB,KAAA;gCAEtB,EAAE,GAAAA,KAAA;IADX8gB,0BAA0B,GAAA7qB,IAAA,CAA1B6qB,0BAA0B;EAE1B,IAAMrtB,KAAK,GAAGD,QAAQ,EAAE;EACxB,IAAMutB,iBAAiB,GAAGpqB,cAAc,CAACgqB,sBAAsB,CAAC;EAEhE,IAAMK,YAAY,GAAG3jB,iBAAiB,CACpC,UAAAjH,KAAA;IAAA,IAAG2E,GAAG,GAAA3E,KAAA,CAAH2E,GAAG;IAAA,OACJ,UAACkmB,MAA8B;MAC7BlmB,GAAG,CAAC4lB,sBAAsB,EAAEM,MAAM,CAAC;KACpC;KACH,EAAE,CACH;EAED9sB,aAAa,CACX,4BAA4B,EAC5BoD,WAAW,CACT,UAACnD,EAAE;IACD4sB,YAAY,CAAC5sB,EAAE,CAAC2sB,iBAAiB,CAAC;IAClCD,0BAA0B,oBAA1BA,0BAA0B,CAAG1sB,EAAE,CAAC;GACjC,EACD,CAAC0sB,0BAA0B,EAAEE,YAAY,CAAC,CAC3C,CACF;EAEDhsB,SAAS,CAAC;IACR,IAAI,CAACvB,KAAK,IAAIA,KAAK,CAACmV,WAAW,EAAE,EAAE;IACnCoY,YAAY,CAACvtB,KAAK,CAACstB,iBAAiB,EAAE,CAAC;GACxC,EAAE,CAACttB,KAAK,EAAEutB,YAAY,CAAC,CAAC;EAEzBrtB,aAAa,CAACotB,iBAAiB,CAAC;EAEhC,OAAOA,iBAAiB;AAC1B,CAAC;;ACrDD;;;;;AAKA,IAAaG,cAAc,GAAG,SAAjBA,cAAcA,CAAItc,SAAkB;;EAC/C,IAAMxE,cAAc,GAAGR,iBAAiB,EAAE;EAC1C,IAAM0Q,WAAW,GAAG9Z,sBAAsB,CACxCoO,SAAS,WAATA,SAAS,GAAIxE,cAAc,EAC3B,aAAa,CACd;EAED,IAAM+gB,YAAY,GAChB,QAAO7Q,WAAW,oBAAXA,WAAW,CAAE8Q,OAAO,MAAK,SAAS,GACrC9Q,WAAW,oBAAXA,WAAW,CAAE8Q,OAAO,GACpBjf,OAAO,CAACmO,WAAW,qBAAA+Q,oBAAA,GAAX/Q,WAAW,CAAE8Q,OAAO,qBAApBC,oBAAA,CAAsB7nB,GAAG,CAAC,OAAO,CAAC,CAAC;EACjD,IAAM8nB,YAAY,GAChB,QAAOhR,WAAW,oBAAXA,WAAW,CAAE8Q,OAAO,MAAK,SAAS,GACrC9Q,WAAW,oBAAXA,WAAW,CAAE8Q,OAAO,GACpBjf,OAAO,CAACmO,WAAW,qBAAAiR,qBAAA,GAAXjR,WAAW,CAAE8Q,OAAO,qBAApBG,qBAAA,CAAsB/nB,GAAG,CAAC,OAAO,CAAC,CAAC;EACjD,IAAMgoB,kBAAkB,GACtB,QAAOlR,WAAW,oBAAXA,WAAW,CAAE8Q,OAAO,MAAK,SAAS,GACrC9Q,WAAW,oBAAXA,WAAW,CAAE8Q,OAAO,GACpBjf,OAAO,CAACmO,WAAW,qBAAAmR,qBAAA,GAAXnR,WAAW,CAAE8Q,OAAO,qBAApBK,qBAAA,CAAsBjoB,GAAG,CAAC,aAAa,CAAC,CAAC;EACvD,IAAMkoB,kBAAkB,GACtB,QAAOpR,WAAW,oBAAXA,WAAW,CAAE8Q,OAAO,MAAK,SAAS,GACrC9Q,WAAW,oBAAXA,WAAW,CAAE8Q,OAAO,GACpBjf,OAAO,CAACmO,WAAW,qBAAAqR,qBAAA,GAAXrR,WAAW,CAAE8Q,OAAO,qBAApBO,qBAAA,CAAsBnoB,GAAG,CAAC,aAAa,CAAC,CAAC;EACvD,IAAMooB,kBAAkB,GACtB,QAAOtR,WAAW,oBAAXA,WAAW,CAAE8Q,OAAO,MAAK,SAAS,GACrC9Q,WAAW,oBAAXA,WAAW,CAAE8Q,OAAO,GACpBjf,OAAO,CAACmO,WAAW,qBAAAuR,qBAAA,GAAXvR,WAAW,CAAE8Q,OAAO,qBAApBS,qBAAA,CAAsBroB,GAAG,CAAC,aAAa,CAAC,CAAC;EACvD,IAAMsoB,kBAAkB,GACtB,QAAOxR,WAAW,oBAAXA,WAAW,CAAE8Q,OAAO,MAAK,SAAS,GACrC9Q,WAAW,oBAAXA,WAAW,CAAE8Q,OAAO,GACpBjf,OAAO,CAACmO,WAAW,qBAAAyR,qBAAA,GAAXzR,WAAW,CAAE8Q,OAAO,qBAApBW,qBAAA,CAAsBvoB,GAAG,CAAC,aAAa,CAAC,CAAC;EACvD,IAAMwoB,oBAAoB,GACxB,QAAO1R,WAAW,oBAAXA,WAAW,CAAE2R,QAAQ,MAAK,SAAS,GACtC3R,WAAW,oBAAXA,WAAW,CAAE2R,QAAQ,GACrB9f,OAAO,CAACmO,WAAW,qBAAA4R,qBAAA,GAAX5R,WAAW,CAAE2R,QAAQ,qBAArBC,qBAAA,CAAuB1oB,GAAG,CAAC,cAAc,CAAC,CAAC;EACzD,IAAM2oB,iBAAiB,GACrB,QAAO7R,WAAW,oBAAXA,WAAW,CAAE2R,QAAQ,MAAK,SAAS,GACtC3R,WAAW,oBAAXA,WAAW,CAAE2R,QAAQ,GACrB9f,OAAO,CAACmO,WAAW,qBAAA8R,sBAAA,GAAX9R,WAAW,CAAE2R,QAAQ,qBAArBG,sBAAA,CAAuB5oB,GAAG,CAAC,WAAW,CAAC,CAAC;EACtD,IAAM6oB,qBAAqB,GACzB,QAAO/R,WAAW,oBAAXA,WAAW,CAAE2R,QAAQ,MAAK,SAAS,GACtC3R,WAAW,oBAAXA,WAAW,CAAE2R,QAAQ,GACrB9f,OAAO,CAACmO,WAAW,qBAAAgS,sBAAA,GAAXhS,WAAW,CAAE2R,QAAQ,qBAArBK,sBAAA,CAAuB9oB,GAAG,CAAC,eAAe,CAAC,CAAC;EAE1D,IAAMgJ,MAAM,GAAG;IACbwf,oBAAoB,EAApBA,oBAAoB;IACpBG,iBAAiB,EAAjBA,iBAAiB;IACjBE,qBAAqB,EAArBA,qBAAqB;IACrBlB,YAAY,EAAZA,YAAY;IACZK,kBAAkB,EAAlBA,kBAAkB;IAClBE,kBAAkB,EAAlBA,kBAAkB;IAClBE,kBAAkB,EAAlBA,kBAAkB;IAClBE,kBAAkB,EAAlBA,kBAAkB;IAClBR,YAAY,EAAZA,YAAY;IACZiB,WAAW,EAAEjS,WAAW,oBAAXA,WAAW,CAAEiS,WAAW;IACrCjS,WAAW,EAAXA;GACD;EAED3c,aAAa,CAAC6O,MAAM,CAAC;EAErB,OAAOA,MAAM;AACf,CAAC;;ACzDD,IAAMggB,+BAA+B,gBAAG9sB,UAAU,CAGhD;EACAC,GAAG,EAAEH,aAAa,GAAG,8BAA8B;EACnD,WAAS;CACV,CAAC;AASF;;;;;;AAMA,IAAaitB,kBAAkB,GAAG,SAArBA,kBAAkBA,CAAAziB,KAAA;gCAGH,EAAE,GAAAA,KAAA;IAAA0iB,OAAA,GAAAzsB,IAAA,CAF5BC,EAAE;IAAFA,EAAE,GAAAwsB,OAAA,cAAG,MAAM,GAAAA,OAAA;IACXC,wBAAwB,GAAA1sB,IAAA,CAAxB0sB,wBAAwB;EAExB,IAAMC,YAAY,GAAGjsB,cAAc,CAAC6rB,+BAA+B,CAAC,MAAM,CAAC,CAAC;EAC5E,IAAMK,eAAe,GAAGlsB,cAAc,CAAC6rB,+BAA+B,CAACtsB,EAAE,CAAC,CAAC;EAC3E,IAAMzC,KAAK,GAAGD,QAAQ,EAAE;EACxB,IAAMwgB,YAAY,GAAG4B,eAAe,EAAE;EAEtC,IAAMkN,0BAA0B,GAAGzlB,iBAAiB,CAClD,UAAAjH,KAAA;IAAA,IAAGmH,iBAAiB,GAAAnH,KAAA,CAAjBmH,iBAAiB;IAAA,OAClB,UAACslB,eAAqC;MACpCtlB,iBAAiB,CAAC,UAAAtG,KAAA;YAAGoH,KAAK,GAAApH,KAAA,CAALoH,KAAK;UAAEtD,GAAG,GAAA9D,KAAA,CAAH8D,GAAG;QAC7B,IAAWgC,GAAG,GAAAlC,QAAA,KAAKgoB,eAAe;QAClC,SAAA3oB,EAAA,MAAA6oB,eAAA,GAA2BhpB,MAAM,CAACJ,OAAO,CAACoD,GAAG,CAAC,EAAA7C,EAAA,GAAA6oB,eAAA,CAAAvrB,MAAA,EAAA0C,EAAA,IAAE;UAA3C,IAAA8oB,kBAAA,GAAAD,eAAA,CAAA7oB,EAAA;YAAKhE,GAAE,GAAA8sB,kBAAA;YAAEC,QAAQ,GAAAD,kBAAA;UACpBjoB,GAAG,CAACynB,+BAA+B,CAACtsB,GAAE,CAAC,EAAE+sB,QAAQ,CAAC;;QAEpD,IAAI,EAAE/sB,EAAE,IAAI6G,GAAG,CAAC,EAAE;UAChBsB,KAAK,CAACmkB,+BAA+B,CAACtsB,EAAE,CAAC,CAAC;;OAE7C,CAAC;KACH;KACH,CAACA,EAAE,CAAC,CACL;EACD/B,aAAa,CACX,0BAA0B,EAC1BoD,WAAW,CACT,UAACnD,EAAE;IACD0uB,0BAA0B,CAAC1uB,EAAE,CAACyuB,eAAe,CAAC;IAC9CF,wBAAwB,oBAAxBA,wBAAwB,CAAGvuB,EAAE,CAAC;GAC/B,EACD,CAACuuB,wBAAwB,EAAEG,0BAA0B,CAAC,CACvD,CACF;EAED9tB,SAAS,CAAC;IACR,IAAI,CAACvB,KAAK,IAAIA,KAAK,CAACmV,WAAW,EAAE,EAAE;IACnCnV,KAAK,CAACyvB,kBAAkB,EAAE,CAACpX,IAAI,CAACgX,0BAA0B,CAAC;GAC5D,EAAE,CAACrvB,KAAK,EAAEqvB,0BAA0B,CAAC,CAAC;EAEvC,IAAMK,qBAAqB,GAAG5rB,WAAW,CACvC;IACE,IAAI,CAAC9D,KAAK,IAAIugB,YAAY,KAAK,gBAAgB,EAAE;IAAO,SAAA5Q,IAAA,GAAAE,SAAA,CAAA9L,MAAA,EADtD2L,IAAoD,OAAAvM,KAAA,CAAAwM,IAAA,GAAAC,IAAA,MAAAA,IAAA,GAAAD,IAAA,EAAAC,IAAA;MAApDF,IAAoD,CAAAE,IAAA,IAAAC,SAAA,CAAAD,IAAA;;IAEtD5P,KAAK,oBAALA,KAAK,CAAE0vB,qBAAqB,oBAA5B1vB,KAAK,CAAE0vB,qBAAqB,CAAA1nB,KAAA,CAA5BhI,KAAK,EAA6B0P,IAAI,CAAC;GACxC,EACD,CAAC1P,KAAK,EAAEugB,YAAY,CAAC,CACtB;EAED,IAAMxR,MAAM,GAAG;IACbqgB,eAAe,EACb3sB,EAAE,KAAK,MAAM,IAAI6D,MAAM,CAACC,IAAI,CAAC6oB,eAAe,CAAC,CAACrrB,MAAM,KAAK,CAAC,GACtDorB,YAAY,GACZC,eAAe;IACrBM,qBAAqB,EAArBA;GACD;EAEDxvB,aAAa,CAAC6O,MAAM,CAAC;EAErB,OAAOA,MAAM;AACf,CAAC;;IC/EY4gB,YAAY,GAAG,SAAfA,YAAYA,CAAApjB,KAAA;gCAKH,EAAE,GAAAA,KAAA;IAJtBqjB,eAAe,GAAAptB,IAAA,CAAfotB,eAAe;IACfC,gBAAgB,GAAArtB,IAAA,CAAhBqtB,gBAAgB;IAChBC,kBAAkB,GAAAttB,IAAA,CAAlBstB,kBAAkB;IAClBC,kBAAkB,GAAAvtB,IAAA,CAAlButB,kBAAkB;EAElB,IAAM/vB,KAAK,GAAGD,QAAQ,EAAE;EACxB,IAAMyQ,KAAK,GAAGtN,cAAc,CAACme,cAAc,CAAC;EAE5C3gB,aAAa,CACX,mBAAmB,EACnBoD,WAAW,CACT,UAACnD,EAAE;IACDmvB,kBAAkB,oBAAlBA,kBAAkB,CAAGnvB,EAAE,CAAC;GACzB,EACD,CAACmvB,kBAAkB,CAAC,CACrB,CACF;EACDpvB,aAAa,CACX,mBAAmB,EACnBoD,WAAW,CACT,UAACnD,EAAE;IACDovB,kBAAkB,oBAAlBA,kBAAkB,CAAGpvB,EAAE,CAAC;GACzB,EACD,CAACovB,kBAAkB,CAAC,CACrB,CACF;EACDrvB,aAAa,CACX,iBAAiB,EACjBoD,WAAW,CACT,UAACnD,EAAE;IACDkvB,gBAAgB,oBAAhBA,gBAAgB,CAAGlvB,EAAE,CAAC;GACvB,EACD,CAACkvB,gBAAgB,CAAC,CACnB,CACF;EACDnvB,aAAa,CACX,gBAAgB,EAChBoD,WAAW,CACT,UAACnD,EAAE;IACDivB,eAAe,oBAAfA,eAAe,CAAGjvB,EAAE,CAAC;GACtB,EACD,CAACivB,eAAe,CAAC,CAClB,CACF;;;;EAKD,IAAMI,cAAc,GAAGlsB,WAAW,CAChC;IACE,IAAI,CAAC9D,KAAK,EAAE;IACZA,KAAK,CAACgwB,cAAc,CAAAhoB,KAAA,CAApBhI,KAAK,EAAA6P,SAAuB,CAAC;GAC9B,EACD,CAAC7P,KAAK,CAAC,CACR;;;;EAKD,IAAMiwB,aAAa,GAAGnsB,WAAW,CAC/B;IACE,IAAI,CAAC9D,KAAK,EAAE;IACZA,KAAK,CAACiwB,aAAa,CAAAjoB,KAAA,CAAnBhI,KAAK,EAAA6P,SAAsB,CAAC;GAC7B,EACD,CAAC7P,KAAK,CAAC,CACR;;;;EAKD,IAAMkwB,eAAe,GAAGpsB,WAAW,CACjC;IACE,IAAI,CAAC9D,KAAK,EAAE;IACZA,KAAK,CAACkwB,eAAe,CAAAloB,KAAA,CAArBhI,KAAK,EAAA6P,SAAwB,CAAC;GAC/B,EACD,CAAC7P,KAAK,CAAC,CACR;EAED,IAAM+O,MAAM,GAAA3H,QAAA,KACPoJ,KAAK;IACRwf,cAAc,EAAdA,cAAc;IACdC,aAAa,EAAbA,aAAa;IACbC,eAAe,EAAfA;IACD;EAEDhwB,aAAa,CAAC6O,MAAM,CAAC;EAErB,OAAOA,MAAM;AACf,CAAC;;AClGD;;;;AAIA,IAAaohB,OAAO,GAAG,SAAVA,OAAOA;EAClB,IAAM5N,IAAI,GAAGrf,cAAc,CAACkf,SAAS,CAAC;EACtCliB,aAAa,CAACqiB,IAAI,CAAC;EACnB,OAAOA,IAAI;AACb,CAAC;;ICEY6N,UAAU,GAAG,SAAbA,UAAUA,CAAA7jB,KAAA;;gCAA6B,EAAE,GAAAA,KAAA;IAAzB8jB,WAAW,GAAA7tB,IAAA,CAAX6tB,WAAW;EACtC,IAAMC,aAAa,GAAGptB,cAAc,CAAC2F,kBAAkB,CAAC;EACxD,IAAM0Z,IAAI,GAAG4N,OAAO,EAAE;EAEtB,IAAApvB,SAAA,GAAkCC,QAAQ,CAAc,IAAI,CAAC;IAAtDuvB,SAAS,GAAAxvB,SAAA;IAAEyvB,YAAY,GAAAzvB,SAAA;EAE9BQ,SAAS,CAAC;;IACR,IAAMkvB,iBAAiB,IAAA9tB,KAAA,IAAA+tB,qBAAA,GACrBnO,IAAI,qBAAAoO,iBAAA,GAAJpO,IAAI,CAAEqO,WAAW,qBAAjBD,iBAAA,CAAmBE,mBAAmB,YAAAH,qBAAA,GACtCnO,IAAI,qBAAAuO,YAAA,GAAJvO,IAAI,CAAEwO,MAAM,qBAAZD,YAAA,CAAcD,mBAAmB,YAAAluB,KAAA,GACjC,CAAC;IACH,IAAMquB,eAAe,IAAAxtB,KAAA,IAAAytB,qBAAA,GAAG1O,IAAI,qBAAA2O,kBAAA,GAAJ3O,IAAI,CAAEqO,WAAW,qBAAjBM,kBAAA,CAAmBC,GAAG,YAAAF,qBAAA,GAAI1O,IAAI,qBAAA6O,aAAA,GAAJ7O,IAAI,CAAEwO,MAAM,qBAAZK,aAAA,CAAcD,GAAG,YAAA3tB,KAAA,GAAI,CAAC;IACxE,IAAM6tB,UAAU,IAAAxnB,KAAA,IAAAynB,sBAAA,GACd/O,IAAI,qBAAAgP,kBAAA,GAAJhP,IAAI,CAAEqO,WAAW,qBAAjBW,kBAAA,CAAmBC,kBAAkB,YAAAF,sBAAA,GACrC/O,IAAI,qBAAAkP,aAAA,GAAJlP,IAAI,CAAEwO,MAAM,qBAAZU,aAAA,CAAcC,iBAAiB,YAAA7nB,KAAA,GAC/B,KAAK;IAEP,IAAI8nB,YAAY,GAAS,IAAIzsB,IAAI,CAAC,CAAC,CAAC;IAEpC,IAAIurB,iBAAiB,IAAIH,aAAa,EAAE;MACtCqB,YAAY,GAAG,IAAIzsB,IAAI,CACrBorB,aAAa,CAACnrB,OAAO,EAAE,GAAG,IAAI,GAAGsrB,iBAAiB,CACnD;;IAGH,IAAIY,UAAU,IAAIL,eAAe,EAAE;MACjC,IAAMY,OAAO,GAAG,IAAI1sB,IAAI,CAAC8rB,eAAe,GAAG,IAAI,CAAC;MAChD,IACE,CAACW,YAAY,CAACxsB,OAAO,EAAE,IACtBwsB,YAAY,CAACxsB,OAAO,EAAE,GAAG,CAAC,IAAIysB,OAAO,GAAGD,YAAa,EAEtDA,YAAY,GAAGC,OAAO;;IAG1B,IAAID,YAAY,CAACxsB,OAAO,EAAE,KAAK,CAAC,EAAE;IAElCqrB,YAAY,CAAC,UAACqB,YAAY;MAAA,OACxB,CAAAA,YAAY,oBAAZA,YAAY,CAAE1sB,OAAO,EAAE,MAAKwsB,YAAY,CAACxsB,OAAO,EAAE,GAC9CwsB,YAAY,GACZE,YAAY;MACjB;GACF,EAAE,CACDvB,aAAa,EACb/N,IAAI,qBAAAuP,aAAA,GAAJvP,IAAI,CAAEwO,MAAM,qBAAZe,aAAA,CAAcjB,mBAAmB,EACjCtO,IAAI,qBAAAwP,aAAA,GAAJxP,IAAI,CAAEwO,MAAM,qBAAZgB,aAAA,CAAcL,iBAAiB,EAC/BnP,IAAI,qBAAAyP,aAAA,GAAJzP,IAAI,CAAEwO,MAAM,qBAAZiB,aAAA,CAAcb,GAAG,EACjB5O,IAAI,qBAAA0P,kBAAA,GAAJ1P,IAAI,CAAEqO,WAAW,qBAAjBqB,kBAAA,CAAmBpB,mBAAmB,EACtCtO,IAAI,qBAAA2P,kBAAA,GAAJ3P,IAAI,CAAEqO,WAAW,qBAAjBsB,kBAAA,CAAmBV,kBAAkB,EACrCjP,IAAI,qBAAA4P,kBAAA,GAAJ5P,IAAI,CAAEqO,WAAW,qBAAjBuB,kBAAA,CAAmBhB,GAAG,CACvB,CAAC;EAEF5vB,SAAS,CAAC;IACR,IAAI,CAACgvB,SAAS,IAAIA,SAAS,CAACprB,OAAO,EAAE,KAAK,CAAC,EAAE;IAE7C,IAAMkF,QAAQ,GAAGC,WAAW,CAAC;;MAC3B,IAAM8nB,KAAK,GAAG,EAAAC,kBAAA,GAAC9B,SAAS,oBAATA,SAAS,CAAEprB,OAAO,EAAE,YAAAktB,kBAAA,GAAI,CAAC,IAAI,IAAI;MAChD,IAAMC,GAAG,GAAGptB,IAAI,CAACotB,GAAG,EAAE,GAAG,IAAI;MAC7B,IAAMC,IAAI,GAAGH,KAAK,GAAGE,GAAG;MACxB,IAAIC,IAAI,GAAG,CAAC,EAAE;MACd,IAAMC,KAAK,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAED,IAAI,CAACE,KAAK,CAACJ,IAAI,GAAG,IAAI,CAAC,CAAC;MAClD,IAAMK,OAAO,GAAGH,IAAI,CAACC,GAAG,CAAC,CAAC,EAAED,IAAI,CAACE,KAAK,CAAEJ,IAAI,GAAG,IAAI,GAAI,EAAE,CAAC,CAAC;MAC3D,IAAMM,OAAO,GAAGJ,IAAI,CAACC,GAAG,CAAC,CAAC,EAAED,IAAI,CAACE,KAAK,CAACJ,IAAI,GAAG,EAAE,CAAC,CAAC;MAClDlC,WAAW,oBAAXA,WAAW,CAAG;QACZmC,KAAK,EAALA,KAAK;QACLI,OAAO,EAAPA,OAAO;QACPC,OAAO,EAAPA;OACD,CAAC;KACH,EAAE,IAAI,CAAC;IACR,OAAO;MACLtoB,aAAa,CAACF,QAAQ,CAAC;KACxB;GACF,EAAE,CAACkmB,SAAS,EAAEF,WAAW,CAAC,CAAC;EAE5B,IAAMthB,MAAM,GAAG;IACbwhB,SAAS,EAATA;GACD;EAEDrwB,aAAa,CAAC6O,MAAM,CAAC;EAErB,OAAOA,MAAM;AACf,CAAC;;AC9FD;;;;AAIA,IAAa+jB,mBAAmB,GAAG,SAAtBA,mBAAmBA,CAAI9vB,aAAqB;EAAA,OACvDsN,aAAa,CAACtN,aAAa,EAAE,aAAa,CAAC;AAAA;;ACL7C;;;;AAIA,IAAa+vB,mBAAmB,GAAG,SAAtBA,mBAAmBA,CAAI/vB,aAAqB;EAAA,OACvDsN,aAAa,CAACtN,aAAa,EAAE,aAAa,CAAC;AAAA;;ACK7C,IAAMgwB,iBAAiB,gBAAGrqB,IAAI,CAA2B;EACvDzG,GAAG,EAAEH,aAAa,GAAG,eAAe;EACpC,WAAS;CACV,CAAC;AAMF;;;AAGA,IAAakxB,eAAe,GAAG,SAAlBA,eAAeA,CAAA1mB,KAAA;gCAAuC,EAAE,GAAAA,KAAA;IAAnC2mB,qBAAqB,GAAA1wB,IAAA,CAArB0wB,qBAAqB;EACrD,IAAMlzB,KAAK,GAAGD,QAAQ,EAAE;EACxB,IAAMozB,YAAY,GAAGjwB,cAAc,CAAC8vB,iBAAiB,CAAC;EAEtDtyB,aAAa,CACX,uBAAuB,EACvBkJ,iBAAiB,CACf,UAAAjH,KAAA;IAAA,IAAG2E,GAAG,GAAA3E,KAAA,CAAH2E,GAAG;IAAA,OACJ,UAAC3G,EAAE;MACD2G,GAAG,CAAC0rB,iBAAiB,EAAEryB,EAAE,CAACwyB,YAAY,CAAC;MACvCD,qBAAqB,oBAArBA,qBAAqB,CAAGvyB,EAAE,CAAC;KAC5B;KACH,CAACuyB,qBAAqB,CAAC,CACxB,CACF;EAED,IAAME,iBAAiB,GAAGxpB,iBAAiB,CACzC,UAAApG,KAAA;IAAA,IAAG8D,GAAG,GAAA9D,KAAA,CAAH8D,GAAG;IAAA,OACJ,UAAC6rB,YAAsC;MACrC7rB,GAAG,CAAC0rB,iBAAiB,EAAEG,YAAY,CAAC;KACrC;KACH,EAAE,CACH;EAED5xB,SAAS,CAAC;IACR,IAAI,CAACvB,KAAK,IAAIA,KAAK,CAACmV,WAAW,EAAE,EAAE;IACnCie,iBAAiB,CAACpzB,KAAK,CAACqzB,eAAe,EAAE,CAAC;GAC3C,EAAE,CAACrzB,KAAK,EAAEozB,iBAAiB,CAAC,CAAC;;;;;EAM9B,IAAME,kBAAkB,GAAGxvB,WAAW,eAAAgH,iBAAA,CACpC;sCAAU4E,IAAiD,OAAAvM,KAAA,CAAAwM,IAAA,GAAAC,IAAA,MAAAA,IAAA,GAAAD,IAAA,EAAAC,IAAA;MAAjDF,IAAiD,CAAAE,IAAA,IAAAC,SAAA,CAAAD,IAAA;;IACzD,IAAM2jB,eAAe,SAASvzB,KAAK,oBAALA,KAAK,CAAEszB,kBAAkB,CAAAtrB,KAAA,CAAzBhI,KAAK,EAAwB0P,IAAI,CAAC;IAChE,IAAI,CAAC6jB,eAAe,EAAE;IACtBH,iBAAiB,CAACG,eAAe,CAAC;IAClC,OAAOA,eAAe;GACvB,GACD,CAACvzB,KAAK,EAAEozB,iBAAiB,CAAC,CAC3B;EAED,IAAMrkB,MAAM,GAAG;IACbokB,YAAY,EAAZA,YAAY;IACZG,kBAAkB,EAAlBA;GACD;EAEDpzB,aAAa,CAAC6O,MAAM,CAAC;EAErB,OAAOA,MAAM;AACf,CAAC;;ICpDYykB,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAAAjnB,KAAA;gCAMH,EAAE,GAAAA,KAAA;IAL1BknB,sBAAsB,GAAAjxB,IAAA,CAAtBixB,sBAAsB;IACtBC,oBAAoB,GAAAlxB,IAAA,CAApBkxB,oBAAoB;IACpBC,sBAAsB,GAAAnxB,IAAA,CAAtBmxB,sBAAsB;IACtBC,sBAAsB,GAAApxB,IAAA,CAAtBoxB,sBAAsB;IACtBC,sBAAsB,GAAArxB,IAAA,CAAtBqxB,sBAAsB;EAEtB,IAAM7zB,KAAK,GAAGD,QAAQ,EAAE;EAExB,IAAMyQ,KAAK,GAAGtN,cAAc,CAACsf,kBAAkB,CAAC;EAEhD9hB,aAAa,CACX,uBAAuB,EACvBoD,WAAW,CACT,UAACnD,EAAE;IACDizB,sBAAsB,oBAAtBA,sBAAsB,CAAGjzB,EAAE,CAAC;GAC7B,EACD,CAACizB,sBAAsB,CAAC,CACzB,CACF;EACDlzB,aAAa,CACX,uBAAuB,EACvBoD,WAAW,CACT,UAACnD,EAAE;IACDkzB,sBAAsB,oBAAtBA,sBAAsB,CAAGlzB,EAAE,CAAC;GAC7B,EACD,CAACkzB,sBAAsB,CAAC,CACzB,CACF;EACDnzB,aAAa,CACX,qBAAqB,EACrBoD,WAAW,CACT,UAACnD,EAAE;IACD+yB,oBAAoB,oBAApBA,oBAAoB,CAAG/yB,EAAE,CAAC;GAC3B,EACD,CAAC+yB,oBAAoB,CAAC,CACvB,CACF;EACDhzB,aAAa,CACX,uBAAuB,EACvBoD,WAAW,CACT,UAACnD,EAAE;IACDgzB,sBAAsB,oBAAtBA,sBAAsB,CAAGhzB,EAAE,CAAC;GAC7B,EACD,CAACgzB,sBAAsB,CAAC,CACzB,CACF;EACDjzB,aAAa,CACX,aAAa,EACboD,WAAW,CACT,UAACnD,EAA6C;IAC5C,IAAI,CAAAA,EAAE,oBAAFA,EAAE,CAAEqiB,MAAM,MAAK,eAAe,EAAE;MAClCyQ,sBAAsB,oBAAtBA,sBAAsB,CAAG9yB,EAAE,CAAC;;GAE/B,EACD,CAAC8yB,sBAAsB,CAAC,CACzB,CACF;;;;EAKD,IAAMK,kBAAkB,GAAGhwB,WAAW,CACpC;IACE,IAAI,CAAC9D,KAAK,EAAE;IACZA,KAAK,CAAC8zB,kBAAkB,CAAA9rB,KAAA,CAAxBhI,KAAK,EAAA6P,SAA2B,CAAC;GAClC,EACD,CAAC7P,KAAK,CAAC,CACR;;;;EAKD,IAAM+zB,iBAAiB,GAAGjwB,WAAW,CACnC;IACE,IAAI,CAAC9D,KAAK,EAAE;IACZA,KAAK,CAAC+zB,iBAAiB,CAAA/rB,KAAA,CAAvBhI,KAAK,EAAA6P,SAA0B,CAAC;GACjC,EACD,CAAC7P,KAAK,CAAC,CACR;EAED,IAAM+O,MAAM,GAAA3H,QAAA,KACPoJ,KAAK;IACRsjB,kBAAkB,EAAlBA,kBAAkB;IAClBC,iBAAiB,EAAjBA;IACD;EAED7zB,aAAa,CAAC6O,MAAM,CAAC;EAErB,OAAOA,MAAM;AACf,CAAC;;AC/GD;;;;AAIA,IAAailB,aAAa,GAAG,SAAhBA,aAAaA,CAAIhxB,aAAqB;EAAA,OACjDsN,aAAa,CAACtN,aAAa,EAAE,OAAO,CAAC;AAAA;;ACavC;;;AAGA,IAAaixB,sBAAsB,GAAG,SAAzBA,sBAAsBA,CAAA1nB,KAAA;gCAIH,EAAE,GAAAA,KAAA;IAHhC2nB,yBAAyB,GAAA1xB,IAAA,CAAzB0xB,yBAAyB;IACzBC,2BAA2B,GAAA3xB,IAAA,CAA3B2xB,2BAA2B;IAC3BC,2BAA2B,GAAA5xB,IAAA,CAA3B4xB,2BAA2B;EAE3B,IAAMp0B,KAAK,GAAGD,QAAQ,EAAE;EAExB,IAAMs0B,mBAAmB,GAAGnxB,cAAc,CAACmG,8BAA8B,CAAC;EAE1E3I,aAAa,CACX,2BAA2B,EAC3BoD,WAAW,CACT,UAACnD,EAAE;IACDuzB,yBAAyB,oBAAzBA,yBAAyB,CAAGvzB,EAAE,CAAC;GAChC,EACD,CAACuzB,yBAAyB,CAAC,CAC5B,CACF;EACDxzB,aAAa,CACX,6BAA6B,EAC7BoD,WAAW,CACT,UAACnD,EAAE;IACDwzB,2BAA2B,oBAA3BA,2BAA2B,CAAGxzB,EAAE,CAAC;GAClC,EACD,CAACwzB,2BAA2B,CAAC,CAC9B,CACF;EACDzzB,aAAa,CACX,6BAA6B,EAC7BoD,WAAW,CACT,UAACnD,EAAE;IACDyzB,2BAA2B,oBAA3BA,2BAA2B,CAAGzzB,EAAE,CAAC;GAClC,EACD,CAACyzB,2BAA2B,CAAC,CAC9B,CACF;EAED,IAAME,8BAA8B,GAAGxwB,WAAW,CAChD,UAACrB,EAAgB,EAAE8xB,oBAA6B;IAC9C,IAAI9xB,EAAE,KAAK,GAAG,EAAE;MACdzC,KAAK,oBAALA,KAAK,CAAEw0B,yBAAyB,CAAC;QAC/B,GAAG,EAAE;UACHD,oBAAoB,EAApBA;;OAEH,CAAC;MACF;;IAEFv0B,KAAK,oBAALA,KAAK,CAAEy0B,wBAAwB,CAAChyB,EAAE,EAAE;MAClC8xB,oBAAoB,EAApBA;KACD,CAAC;GACH,EACD,CAACv0B,KAAK,CAAC,CACR;EAED,IAAM00B,WAAW,GAAG5wB,WAAW,CAC7B,UAACrB,EAAgB;IACf6xB,8BAA8B,CAAC7xB,EAAE,EAAE,IAAI,CAAC;GACzC,EACD,CAAC6xB,8BAA8B,CAAC,CACjC;EAED,IAAMK,UAAU,GAAG7wB,WAAW,CAC5B,UAACrB,EAAgB;IACf6xB,8BAA8B,CAAC7xB,EAAE,EAAE,KAAK,CAAC;GAC1C,EACD,CAAC6xB,8BAA8B,CAAC,CACjC;EAED,IAAMvlB,MAAM,GAAG;IACbslB,mBAAmB,EAAnBA,mBAAmB;IACnBK,WAAW,EAAXA,WAAW;IACXC,UAAU,EAAVA;GACD;EAEDz0B,aAAa,CAAC6O,MAAM,CAAC;EAErB,OAAOA,MAAM;AACf,CAAC;;;;"}